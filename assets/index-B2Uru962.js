(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const as=!1;var hn=Array.isArray,vu=Array.prototype.indexOf,mn=Array.from,pu=Object.defineProperty,Rt=Object.getOwnPropertyDescriptor,la=Object.getOwnPropertyDescriptors,xu=Object.prototype,bu=Array.prototype,Ts=Object.getPrototypeOf,yo=Object.isExtensible;function Eu(e){return typeof e=="function"}const Tr=()=>{};function yu(e){return e()}function ls(e){for(var t=0;t<e.length;t++)e[t]()}function ua(){var e,t,r=new Promise((n,s)=>{e=n,t=s});return{promise:r,resolve:e,reject:t}}const J=2,As=4,_n=8,gu=1<<24,Le=16,Je=32,Bt=64,vn=128,Ae=512,Q=1024,fe=2048,Fe=4096,ve=8192,Ye=16384,pn=32768,ct=65536,go=1<<17,ca=1<<18,ar=1<<19,fa=1<<20,Ke=1<<25,Ft=32768,us=1<<21,Fs=1<<22,it=1<<23,We=Symbol("$state"),Ru=Symbol("legacy props"),Su=Symbol(""),Qt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ws(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Tu(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Au(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Fu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function wu(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Pu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Cu(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Bu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Iu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Du(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Mu(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Nu=1,ku=2,da=4,Gu=8,Lu=16,Uu=1,Ou=2,Vu=4,zu=8,Hu=16,$u=4,Xu=2,te=Symbol(),qu="http://www.w3.org/1999/xhtml";function Ku(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Yu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ha(e){return e===this.v}function Wu(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ma(e){return!Wu(e,this.v)}let lr=!1,ju=!1;function Qu(){lr=!0}let X=null;function nr(e){X=e}function ge(e,t=!1,r){X={p:X,i:!1,c:null,e:null,s:e,x:null,l:lr&&!t?{s:null,u:null,$:[]}:null}}function Re(e){var t=X,r=t.e;if(r!==null){t.e=null;for(var n of r)Fa(n)}return e!==void 0&&(t.x=e),t.i=!0,X=t.p,e??{}}function Lr(){return!lr||X!==null&&X.l===null}let Zt=[];function Zu(){var e=Zt;Zt=[],ls(e)}function It(e){if(Zt.length===0){var t=Zt;queueMicrotask(()=>{t===Zt&&Zu()})}Zt.push(e)}function _a(e){var t=L;if(t===null)return N.f|=it,e;if((t.f&pn)===0){if((t.f&vn)===0)throw e;t.b.error(e)}else sr(e,t)}function sr(e,t){for(;t!==null;){if((t.f&vn)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const $r=new Set;let H=null,Zr=null,Ee=null,Ie=[],Ps=null,cs=!1;class De{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#o=new Set;#s=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#r>0}process(t){Ie=[],Zr=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[]};for(const n of t)this.#i(n,r);this.is_fork||this.#c(),this.is_deferred()?(this.#a(r.effects),this.#a(r.render_effects)):(Zr=this,H=null,Ro(r.render_effects),Ro(r.effects),Zr=null,this.#l?.resolve()),Ee=null}#i(t,r){t.f^=Q;for(var n=t.first;n!==null;){var s=n.f,o=(s&(Je|Bt))!==0,a=o&&(s&Q)!==0,i=a||(s&ve)!==0||this.skipped_effects.has(n);if((n.f&vn)!==0&&n.b?.is_pending()&&(r={parent:r,effect:n,effects:[],render_effects:[]}),!i&&n.fn!==null){o?n.f^=Q:(s&As)!==0?r.effects.push(n):dr(n)&&((n.f&Le)!==0&&this.#o.add(n),or(n));var l=n.first;if(l!==null){n=l;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)u===r.effect&&(this.#a(r.effects),this.#a(r.render_effects),r=r.parent),n=u.next,u=u.parent}}#a(t){for(const r of t)(r.f&fe)!==0?this.#o.add(r):(r.f&Fe)!==0&&this.#s.add(r),this.#u(r.deps),Z(r,Q)}#u(t){if(t!==null)for(const r of t)(r.f&J)===0||(r.f&Ft)===0||(r.f^=Ft,this.#u(r.deps))}capture(t,r){this.previous.has(t)||this.previous.set(t,r),(t.f&it)===0&&(this.current.set(t,t.v),Ee?.set(t,t.v))}activate(){H=this,this.apply()}deactivate(){H===this&&(H=null,Ee=null)}flush(){if(this.activate(),Ie.length>0){if(Ju(),H!==null&&H!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#c(){if(this.#r===0){for(const t of this.#e)t();this.#e.clear()}this.#n===0&&this.#f()}#f(){if($r.size>1){this.previous.clear();var t=Ee,r=!0,n={parent:null,effect:null,effects:[],render_effects:[]};for(const o of $r){if(o===this){r=!1;continue}const a=[];for(const[l,u]of this.current){if(o.current.has(l))if(r&&u!==o.current.get(l))o.current.set(l,u);else continue;a.push(l)}if(a.length===0)continue;const i=[...o.current.keys()].filter(l=>!this.current.has(l));if(i.length>0){var s=Ie;Ie=[];const l=new Set,u=new Map;for(const f of a)va(f,i,l,u);if(Ie.length>0){H=o,o.apply();for(const f of Ie)o.#i(f,n);o.deactivate()}Ie=s}}H=null,Ee=t}this.committed=!0,$r.delete(this)}increment(t){this.#n+=1,t&&(this.#r+=1)}decrement(t){this.#n-=1,t&&(this.#r-=1),this.revive()}revive(){for(const t of this.#o)this.#s.delete(t),Z(t,fe),wt(t);for(const t of this.#s)Z(t,Fe),wt(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=ua()).promise}static ensure(){if(H===null){const t=H=new De;$r.add(H),De.enqueue(()=>{H===t&&t.flush()})}return H}static enqueue(t){It(t)}apply(){}}function Ju(){var e=Tt;cs=!0;var t=null;try{var r=0;for(sn(!0);Ie.length>0;){var n=De.ensure();if(r++>1e3){var s,o;ec()}n.process(Ie),at.clear()}}finally{cs=!1,sn(e),Ps=null}}function ec(){try{Pu()}catch(e){sr(e,Ps)}}let Xe=null;function Ro(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Ye|ve))===0&&dr(n)&&(Xe=new Set,or(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?Ca(n):n.fn=null),Xe?.size>0)){at.clear();for(const s of Xe){if((s.f&(Ye|ve))!==0)continue;const o=[s];let a=s.parent;for(;a!==null;)Xe.has(a)&&(Xe.delete(a),o.push(a)),a=a.parent;for(let i=o.length-1;i>=0;i--){const l=o[i];(l.f&(Ye|ve))===0&&or(l)}}Xe.clear()}}Xe=null}}function va(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const s of e.reactions){const o=s.f;(o&J)!==0?va(s,t,r,n):(o&(Fs|Le))!==0&&(o&fe)===0&&pa(s,t,n)&&(Z(s,fe),wt(s))}}function pa(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&J)!==0&&pa(s,t,r))return r.set(s,!0),!0}return r.set(e,!1),!1}function wt(e){for(var t=Ps=e;t.parent!==null;){t=t.parent;var r=t.f;if(cs&&t===L&&(r&Le)!==0&&(r&ca)===0)return;if((r&(Bt|Je))!==0){if((r&Q)===0)return;t.f^=Q}}Ie.push(t)}function tc(e){let t=0,r=Pt(0),n;return()=>{Dr()&&(p(r),En(()=>(t===0&&(n=we(()=>e(()=>Br(r)))),t+=1,()=>{It(()=>{t-=1,t===0&&(n?.(),n=void 0,Br(r))})})))}}var rc=ct|ar|vn;function nc(e,t,r){new sc(e,t,r)}class sc{parent;#e=!1;#t;#n=null;#r;#l;#o;#s=null;#i=null;#a=null;#u=null;#c=null;#f=0;#d=0;#m=!1;#h=null;#b=tc(()=>(this.#h=Pt(this.#f),()=>{this.#h=null}));constructor(t,r,n){this.#t=t,this.#r=r,this.#l=n,this.parent=L.b,this.#e=!!this.#r.pending,this.#o=yn(()=>{L.b=this;{var s=this.#p();try{this.#s=be(()=>n(s))}catch(o){this.error(o)}this.#d>0?this.#v():this.#e=!1}return()=>{this.#c?.remove()}},rc)}#E(){try{this.#s=be(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#y(){const t=this.#r.pending;t&&(this.#i=be(()=>t(this.#t)),De.enqueue(()=>{var r=this.#p();this.#s=this.#_(()=>(De.ensure(),be(()=>this.#l(r)))),this.#d>0?this.#v():(St(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#p(){var t=this.#t;return this.#e&&(this.#c=lt(),this.#t.before(this.#c),t=this.#c),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#_(t){var r=L,n=N,s=X;Ne(this.#o),ue(this.#o),nr(this.#o.ctx);try{return t()}catch(o){return _a(o),null}finally{Ne(r),ue(n),nr(s)}}#v(){const t=this.#r.pending;this.#s!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),Da(this.#s,this.#u)),this.#i===null&&(this.#i=be(()=>t(this.#t)))}#x(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#x(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#i&&St(this.#i,()=>{this.#i=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(t){this.#x(t),this.#f+=t,this.#h&&Ct(this.#h,this.#f)}get_effect_pending(){return this.#b(),p(this.#h)}error(t){var r=this.#r.onerror;let n=this.#r.failed;if(this.#m||!r&&!n)throw t;this.#s&&(ce(this.#s),this.#s=null),this.#i&&(ce(this.#i),this.#i=null),this.#a&&(ce(this.#a),this.#a=null);var s=!1,o=!1;const a=()=>{if(s){Yu();return}s=!0,o&&Mu(),De.ensure(),this.#f=0,this.#a!==null&&St(this.#a,()=>{this.#a=null}),this.#e=this.has_pending_snippet(),this.#s=this.#_(()=>(this.#m=!1,be(()=>this.#l(this.#t)))),this.#d>0?this.#v():this.#e=!1};var i=N;try{ue(null),o=!0,r?.(t,a),o=!1}catch(l){sr(l,this.#o&&this.#o.parent)}finally{ue(i)}n&&It(()=>{this.#a=this.#_(()=>{De.ensure(),this.#m=!0;try{return be(()=>{n(this.#t,()=>t,()=>a)})}catch(l){return sr(l,this.#o.parent),null}finally{this.#m=!1}})})}}function oc(e,t,r,n){const s=Lr()?xn:st;if(r.length===0&&e.length===0){n(t.map(s));return}var o=H,a=L,i=ic();function l(){Promise.all(r.map(u=>ac(u))).then(u=>{i();try{n([...t.map(s),...u])}catch(f){(a.f&Ye)===0&&sr(f,a)}o?.deactivate(),nn()}).catch(u=>{sr(u,a)})}e.length>0?Promise.all(e).then(()=>{i();try{return l()}finally{o?.deactivate(),nn()}}):l()}function ic(){var e=L,t=N,r=X,n=H;return function(o=!0){Ne(e),ue(t),nr(r),o&&n?.activate()}}function nn(){Ne(null),ue(null),nr(null)}function xn(e){var t=J|fe,r=N!==null&&(N.f&J)!==0?N:null;return L!==null&&(L.f|=ar),{ctx:X,deps:null,effects:null,equals:ha,f:t,fn:e,reactions:null,rv:0,v:te,wv:0,parent:r??L,ac:null}}function ac(e,t){let r=L;r===null&&Tu();var n=r.b,s=void 0,o=Pt(te),a=!N,i=new Map;return xc(()=>{var l=ua();s=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{u===H&&u.committed&&u.deactivate(),nn()})}catch(c){l.reject(c),nn()}var u=H;if(a){var f=!n.is_pending();n.update_pending_count(1),u.increment(f),i.get(u)?.reject(Qt),i.delete(u),i.set(u,l)}const h=(c,d=void 0)=>{if(u.activate(),d)d!==Qt&&(o.f|=it,Ct(o,d));else{(o.f&it)!==0&&(o.f^=it),Ct(o,c);for(const[m,_]of i){if(i.delete(m),m===u)break;_.reject(Qt)}}a&&(n.update_pending_count(-1),u.decrement(f))};l.promise.then(h,c=>h(null,c||"unknown"))}),bn(()=>{for(const l of i.values())l.reject(Qt)}),new Promise(l=>{function u(f){function h(){f===s?l(o):u(s)}f.then(h,h)}u(s)})}function st(e){const t=xn(e);return t.equals=ma,t}function xa(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)ce(t[r])}}function lc(e){for(var t=e.parent;t!==null;){if((t.f&J)===0)return(t.f&Ye)===0?t:null;t=t.parent}return null}function Cs(e){var t,r=L;Ne(lc(e));try{e.f&=~Ft,xa(e),t=Ga(e)}finally{Ne(r)}return t}function ba(e){var t=Cs(e);if(e.equals(t)||(H?.is_fork||(e.v=t),e.wv=Na()),!Dt)if(Ee!==null)(Dr()||H?.is_fork)&&Ee.set(e,t);else{var r=(e.f&Ae)===0?Fe:Q;Z(e,r)}}let fs=new Set;const at=new Map;let Ea=!1;function Pt(e,t){var r={f:0,v:e,reactions:null,equals:ha,rv:0,wv:0};return r}function tt(e,t){const r=Pt(e);return gc(r),r}function M(e,t=!1,r=!0){const n=Pt(e);return t||(n.equals=ma),lr&&r&&X!==null&&X.l!==null&&(X.l.s??=[]).push(n),n}function R(e,t,r=!1){N!==null&&(!Me||(N.f&go)!==0)&&Lr()&&(N.f&(J|Le|Fs|go))!==0&&!je?.includes(e)&&Du();let n=r?Jt(t):t;return Ct(e,n)}function Ct(e,t){if(!e.equals(t)){var r=e.v;Dt?at.set(e,t):at.set(e,r),e.v=t;var n=De.ensure();n.capture(e,r),(e.f&J)!==0&&((e.f&fe)!==0&&Cs(e),Z(e,(e.f&Ae)!==0?Q:Fe)),e.wv=Na(),ya(e,fe),Lr()&&L!==null&&(L.f&Q)!==0&&(L.f&(Je|Bt))===0&&(xe===null?Rc([e]):xe.push(e)),!n.is_fork&&fs.size>0&&!Ea&&uc()}return t}function uc(){Ea=!1;var e=Tt;sn(!0);const t=Array.from(fs);try{for(const r of t)(r.f&Q)!==0&&Z(r,Fe),dr(r)&&or(r)}finally{sn(e)}fs.clear()}function Br(e){R(e,e.v+1)}function ya(e,t){var r=e.reactions;if(r!==null)for(var n=Lr(),s=r.length,o=0;o<s;o++){var a=r[o],i=a.f;if(!(!n&&a===L)){var l=(i&fe)===0;if(l&&Z(a,t),(i&J)!==0){var u=a;Ee?.delete(u),(i&Ft)===0&&(i&Ae&&(a.f|=Ft),ya(u,Fe))}else l&&((i&Le)!==0&&Xe!==null&&Xe.add(a),wt(a))}}}function Jt(e){if(typeof e!="object"||e===null||We in e)return e;const t=Ts(e);if(t!==xu&&t!==bu)return e;var r=new Map,n=hn(e),s=tt(0),o=At,a=i=>{if(At===o)return i();var l=N,u=At;ue(null),Po(o);var f=i();return ue(l),Po(u),f};return n&&r.set("length",tt(e.length)),new Proxy(e,{defineProperty(i,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Bu();var f=r.get(l);return f===void 0?f=a(()=>{var h=tt(u.value);return r.set(l,h),h}):R(f,u.value,!0),!0},deleteProperty(i,l){var u=r.get(l);if(u===void 0){if(l in i){const f=a(()=>tt(te));r.set(l,f),Br(s)}}else R(u,te),Br(s);return!0},get(i,l,u){if(l===We)return e;var f=r.get(l),h=l in i;if(f===void 0&&(!h||Rt(i,l)?.writable)&&(f=a(()=>{var d=Jt(h?i[l]:te),m=tt(d);return m}),r.set(l,f)),f!==void 0){var c=p(f);return c===te?void 0:c}return Reflect.get(i,l,u)},getOwnPropertyDescriptor(i,l){var u=Reflect.getOwnPropertyDescriptor(i,l);if(u&&"value"in u){var f=r.get(l);f&&(u.value=p(f))}else if(u===void 0){var h=r.get(l),c=h?.v;if(h!==void 0&&c!==te)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return u},has(i,l){if(l===We)return!0;var u=r.get(l),f=u!==void 0&&u.v!==te||Reflect.has(i,l);if(u!==void 0||L!==null&&(!f||Rt(i,l)?.writable)){u===void 0&&(u=a(()=>{var c=f?Jt(i[l]):te,d=tt(c);return d}),r.set(l,u));var h=p(u);if(h===te)return!1}return f},set(i,l,u,f){var h=r.get(l),c=l in i;if(n&&l==="length")for(var d=u;d<h.v;d+=1){var m=r.get(d+"");m!==void 0?R(m,te):d in i&&(m=a(()=>tt(te)),r.set(d+"",m))}if(h===void 0)(!c||Rt(i,l)?.writable)&&(h=a(()=>tt(void 0)),R(h,Jt(u)),r.set(l,h));else{c=h.v!==te;var _=a(()=>Jt(u));R(h,_)}var v=Reflect.getOwnPropertyDescriptor(i,l);if(v?.set&&v.set.call(f,u),!c){if(n&&typeof l=="string"){var b=r.get("length"),E=Number(l);Number.isInteger(E)&&E>=b.v&&R(b,E+1)}Br(s)}return!0},ownKeys(i){p(s);var l=Reflect.ownKeys(i).filter(h=>{var c=r.get(h);return c===void 0||c.v!==te});for(var[u,f]of r)f.v!==te&&!(u in i)&&l.push(u);return l},setPrototypeOf(){Iu()}})}function So(e){try{if(e!==null&&typeof e=="object"&&We in e)return e[We]}catch{}return e}function cc(e,t){return Object.is(So(e),So(t))}var To,ga,Ra,Sa;function fc(){if(To===void 0){To=window,ga=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;Ra=Rt(t,"firstChild").get,Sa=Rt(t,"nextSibling").get,yo(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),yo(r)&&(r.__t=void 0)}}function lt(e=""){return document.createTextNode(e)}function Bs(e){return Ra.call(e)}function Ur(e){return Sa.call(e)}function G(e,t){return Bs(e)}function he(e,t=!1){{var r=Bs(e);return r instanceof Comment&&r.data===""?Ur(r):r}}function O(e,t=1,r=!1){let n=e;for(;t--;)n=Ur(n);return n}function dc(e){e.textContent=""}function Ta(){return!1}let Ao=!1;function hc(){Ao||(Ao=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function ur(e){var t=N,r=L;ue(null),Ne(null);try{return e()}finally{ue(t),Ne(r)}}function mc(e,t,r,n=r){e.addEventListener(t,()=>ur(r));const s=e.__on_r;s?e.__on_r=()=>{s(),n(!0)}:e.__on_r=()=>n(!0),hc()}function Aa(e){L===null&&(N===null&&wu(),Fu()),Dt&&Au()}function _c(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Ue(e,t,r){var n=L;n!==null&&(n.f&ve)!==0&&(e|=ve);var s={ctx:X,deps:null,nodes:null,f:e|fe|Ae,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{or(s),s.f|=pn}catch(i){throw ce(s),i}else t!==null&&wt(s);var o=s;if(r&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&ar)===0&&(o=o.first,(e&Le)!==0&&(e&ct)!==0&&o!==null&&(o.f|=ct)),o!==null&&(o.parent=n,n!==null&&_c(o,n),N!==null&&(N.f&J)!==0&&(e&Bt)===0)){var a=N;(a.effects??=[]).push(o)}return s}function Dr(){return N!==null&&!Me}function bn(e){const t=Ue(_n,null,!1);return Z(t,Q),t.teardown=e,t}function ds(e){Aa();var t=L.f,r=!N&&(t&Je)!==0&&(t&pn)===0;if(r){var n=X;(n.e??=[]).push(e)}else return Fa(e)}function Fa(e){return Ue(As|fa,e,!1)}function vc(e){return Aa(),Ue(_n|fa,e,!0)}function pc(e){De.ensure();const t=Ue(Bt|ar,e,!0);return(r={})=>new Promise(n=>{r.outro?St(t,()=>{ce(t),n(void 0)}):(ce(t),n(void 0))})}function Is(e){return Ue(As,e,!1)}function cr(e,t){var r=X,n={effect:null,ran:!1,deps:e};r.l.$.push(n),n.effect=En(()=>{e(),!n.ran&&(n.ran=!0,we(t))})}function fr(){var e=X;En(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&Q)!==0&&Z(r,Fe),dr(r)&&or(r),t.ran=!1}})}function xc(e){return Ue(Fs|ar,e,!0)}function En(e,t=0){return Ue(_n|t,e,!0)}function Te(e,t=[],r=[],n=[]){oc(n,t,r,s=>{Ue(_n,()=>e(...s.map(p)),!0)})}function yn(e,t=0){var r=Ue(Le|t,e,!0);return r}function be(e){return Ue(Je|ar,e,!0)}function wa(e){var t=e.teardown;if(t!==null){const r=Dt,n=N;wo(!0),ue(null);try{t.call(null)}finally{wo(r),ue(n)}}}function Pa(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const s=r.ac;s!==null&&ur(()=>{s.abort(Qt)});var n=r.next;(r.f&Bt)!==0?r.parent=null:ce(r,t),r=n}}function bc(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Je)===0&&ce(t),t=r}}function ce(e,t=!0){var r=!1;(t||(e.f&ca)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Ec(e.nodes.start,e.nodes.end),r=!0),Pa(e,t&&!r),on(e,0),Z(e,Ye);var n=e.nodes&&e.nodes.t;if(n!==null)for(const o of n)o.stop();wa(e);var s=e.parent;s!==null&&s.first!==null&&Ca(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Ec(e,t){for(;e!==null;){var r=e===t?null:Ur(e);e.remove(),e=r}}function Ca(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function St(e,t,r=!0){var n=[];Ba(e,n,!0);var s=()=>{r&&ce(e),t&&t()},o=n.length;if(o>0){var a=()=>--o||s();for(var i of n)i.out(a)}else s()}function Ba(e,t,r){if((e.f&ve)===0){e.f^=ve;var n=e.nodes&&e.nodes.t;if(n!==null)for(const i of n)(i.is_global||r)&&t.push(i);for(var s=e.first;s!==null;){var o=s.next,a=(s.f&ct)!==0||(s.f&Je)!==0&&(e.f&Le)!==0;Ba(s,t,a?r:!1),s=o}}}function Ds(e){Ia(e,!0)}function Ia(e,t){if((e.f&ve)!==0){e.f^=ve,(e.f&Q)===0&&(Z(e,fe),wt(e));for(var r=e.first;r!==null;){var n=r.next,s=(r.f&ct)!==0||(r.f&Je)!==0;Ia(r,s?t:!1),r=n}var o=e.nodes&&e.nodes.t;if(o!==null)for(const a of o)(a.is_global||t)&&a.in()}}function Da(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var s=r===n?null:Ur(r);t.append(r),r=s}}let jt=null;function yc(e){var t=jt;try{if(jt=new Set,we(e),t!==null)for(var r of jt)t.add(r);return jt}finally{jt=t}}function Fo(e){for(var t of yc(e))Ct(t,t.v)}let Tt=!1;function sn(e){Tt=e}let Dt=!1;function wo(e){Dt=e}let N=null,Me=!1;function ue(e){N=e}let L=null;function Ne(e){L=e}let je=null;function gc(e){N!==null&&(je===null?je=[e]:je.push(e))}let se=null,_e=0,xe=null;function Rc(e){xe=e}let Ma=1,Mr=0,At=Mr;function Po(e){At=e}function Na(){return++Ma}function dr(e){var t=e.f;if((t&fe)!==0)return!0;if(t&J&&(e.f&=~Ft),(t&Fe)!==0){var r=e.deps;if(r!==null)for(var n=r.length,s=0;s<n;s++){var o=r[s];if(dr(o)&&ba(o),o.wv>e.wv)return!0}(t&Ae)!==0&&Ee===null&&Z(e,Q)}return!1}function ka(e,t,r=!0){var n=e.reactions;if(n!==null&&!je?.includes(e))for(var s=0;s<n.length;s++){var o=n[s];(o.f&J)!==0?ka(o,t,!1):t===o&&(r?Z(o,fe):(o.f&Q)!==0&&Z(o,Fe),wt(o))}}function Ga(e){var t=se,r=_e,n=xe,s=N,o=je,a=X,i=Me,l=At,u=e.f;se=null,_e=0,xe=null,N=(u&(Je|Bt))===0?e:null,je=null,nr(e.ctx),Me=!1,At=++Mr,e.ac!==null&&(ur(()=>{e.ac.abort(Qt)}),e.ac=null);try{e.f|=us;var f=e.fn,h=f(),c=e.deps;if(se!==null){var d;if(on(e,_e),c!==null&&_e>0)for(c.length=_e+se.length,d=0;d<se.length;d++)c[_e+d]=se[d];else e.deps=c=se;if(Dr()&&(e.f&Ae)!==0)for(d=_e;d<c.length;d++)(c[d].reactions??=[]).push(e)}else c!==null&&_e<c.length&&(on(e,_e),c.length=_e);if(Lr()&&xe!==null&&!Me&&c!==null&&(e.f&(J|Fe|fe))===0)for(d=0;d<xe.length;d++)ka(xe[d],e);return s!==null&&s!==e&&(Mr++,xe!==null&&(n===null?n=xe:n.push(...xe))),(e.f&it)!==0&&(e.f^=it),h}catch(m){return _a(m)}finally{e.f^=us,se=t,_e=r,xe=n,N=s,je=o,nr(a),Me=i,At=l}}function Sc(e,t){let r=t.reactions;if(r!==null){var n=vu.call(r,e);if(n!==-1){var s=r.length-1;s===0?r=t.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(t.f&J)!==0&&(se===null||!se.includes(t))&&(Z(t,Fe),(t.f&Ae)!==0&&(t.f^=Ae,t.f&=~Ft),xa(t),on(t,0))}function on(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Sc(e,r[n])}function or(e){var t=e.f;if((t&Ye)===0){Z(e,Q);var r=L,n=Tt;L=e,Tt=!0;try{(t&(Le|gu))!==0?bc(e):Pa(e),wa(e);var s=Ga(e);e.teardown=typeof s=="function"?s:null,e.wv=Ma;var o;as&&ju&&(e.f&fe)!==0&&e.deps}finally{Tt=n,L=r}}}function p(e){var t=e.f,r=(t&J)!==0;if(jt?.add(e),N!==null&&!Me){var n=L!==null&&(L.f&Ye)!==0;if(!n&&!je?.includes(e)){var s=N.deps;if((N.f&us)!==0)e.rv<Mr&&(e.rv=Mr,se===null&&s!==null&&s[_e]===e?_e++:se===null?se=[e]:se.includes(e)||se.push(e));else{(N.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[N]:o.includes(N)||o.push(N)}}}if(Dt){if(at.has(e))return at.get(e);if(r){var a=e,i=a.v;return((a.f&Q)===0&&a.reactions!==null||Ua(a))&&(i=Cs(a)),at.set(a,i),i}}else r&&(!Ee?.has(e)||H?.is_fork&&!Dr())&&(a=e,dr(a)&&ba(a),Tt&&Dr()&&(a.f&Ae)===0&&La(a));if(Ee?.has(e))return Ee.get(e);if((e.f&it)!==0)throw e.v;return e.v}function La(e){if(e.deps!==null){e.f^=Ae;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&J)!==0&&(t.f&Ae)===0&&La(t)}}function Ua(e){if(e.v===te)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(at.has(t)||(t.f&J)!==0&&Ua(t))return!0;return!1}function we(e){var t=Me;try{return Me=!0,e()}finally{Me=t}}const Tc=-7169;function Z(e,t){e.f=e.f&Tc|t}function Ze(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(We in e)hs(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&We in r&&hs(r)}}}function hs(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{hs(e[n],t)}catch{}const r=Ts(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=la(r);for(let s in n){const o=n[s].get;if(o)try{o.call(e)}catch{}}}}}const Ac=["touchstart","touchmove"];function Fc(e){return Ac.includes(e)}const wc=new Set,Co=new Set;function Pc(e,t,r,n={}){function s(o){if(n.capture||Pr.call(t,o),!o.cancelBubble)return ur(()=>r?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?It(()=>{t.addEventListener(e,s,n)}):t.addEventListener(e,s,n),s}function er(e,t,r,n,s){var o={capture:n,passive:s},a=Pc(e,t,r,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&bn(()=>{t.removeEventListener(e,a,o)})}let Bo=null;function Pr(e){var t=this,r=t.ownerDocument,n=e.type,s=e.composedPath?.()||[],o=s[0]||e.target;Bo=e;var a=0,i=Bo===e&&e.__root;if(i){var l=s.indexOf(i);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;l<=u&&(a=l)}if(o=s[a]||e.target,o!==t){pu(e,"currentTarget",{configurable:!0,get(){return o||r}});var f=N,h=L;ue(null),Ne(null);try{for(var c,d=[];o!==null;){var m=o.assignedSlot||o.parentNode||o.host||null;try{var _=o["__"+n];_!=null&&(!o.disabled||e.target===o)&&_.call(o,e)}catch(v){c?d.push(v):c=v}if(e.cancelBubble||m===t||m===null)break;o=m}if(c){for(let v of d)queueMicrotask(()=>{throw v});throw c}}finally{e.__root=t,delete e.currentTarget,ue(f),Ne(h)}}}function Cc(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Oa(e,t){var r=L;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function re(e,t){var r=(t&Xu)!==0,n,s=!e.startsWith("<!>");return()=>{n===void 0&&(n=Cc(s?e:"<!>"+e),n=Bs(n));var o=r||ga?document.importNode(n,!0):n.cloneNode(!0);return Oa(o,o),o}}function me(){var e=document.createDocumentFragment(),t=document.createComment(""),r=lt();return e.append(t,r),Oa(t,r),e}function V(e,t){e!==null&&e.before(t)}let ms=!0;function Qe(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Bc(e,t){return Ic(e,t)}const $t=new Map;function Ic(e,{target:t,anchor:r,props:n={},events:s,context:o,intro:a=!0}){fc();var i=new Set,l=h=>{for(var c=0;c<h.length;c++){var d=h[c];if(!i.has(d)){i.add(d);var m=Fc(d);t.addEventListener(d,Pr,{passive:m});var _=$t.get(d);_===void 0?(document.addEventListener(d,Pr,{passive:m}),$t.set(d,1)):$t.set(d,_+1)}}};l(mn(wc)),Co.add(l);var u=void 0,f=pc(()=>{var h=r??t.appendChild(lt());return nc(h,{pending:()=>{}},c=>{if(o){ge({});var d=X;d.c=o}s&&(n.$$events=s),ms=a,u=e(c,n)||{},ms=!0,o&&Re()}),()=>{for(var c of i){t.removeEventListener(c,Pr);var d=$t.get(c);--d===0?(document.removeEventListener(c,Pr),$t.delete(c)):$t.set(c,d)}Co.delete(l),h!==r&&h.parentNode?.removeChild(h)}});return Dc.set(u,f),u}let Dc=new WeakMap;class Va{anchor;#e=new Map;#t=new Map;#n=new Map;#r=new Set;#l=!0;constructor(t,r=!0){this.anchor=t,this.#l=r}#o=()=>{var t=H;if(this.#e.has(t)){var r=this.#e.get(t),n=this.#t.get(r);if(n)Ds(n),this.#r.delete(r);else{var s=this.#n.get(r);s&&(this.#t.set(r,s.effect),this.#n.delete(r),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),n=s.effect)}for(const[o,a]of this.#e){if(this.#e.delete(o),o===t)break;const i=this.#n.get(a);i&&(ce(i.effect),this.#n.delete(a))}for(const[o,a]of this.#t){if(o===r||this.#r.has(o))continue;const i=()=>{if(Array.from(this.#e.values()).includes(o)){var u=document.createDocumentFragment();Da(a,u),u.append(lt()),this.#n.set(o,{effect:a,fragment:u})}else ce(a);this.#r.delete(o),this.#t.delete(o)};this.#l||!n?(this.#r.add(o),St(a,i,!1)):i()}}};#s=t=>{this.#e.delete(t);const r=Array.from(this.#e.values());for(const[n,s]of this.#n)r.includes(n)||(ce(s.effect),this.#n.delete(n))};ensure(t,r){var n=H,s=Ta();if(r&&!this.#t.has(t)&&!this.#n.has(t))if(s){var o=document.createDocumentFragment(),a=lt();o.append(a),this.#n.set(t,{effect:be(()=>r(a)),fragment:o})}else this.#t.set(t,be(()=>r(this.anchor)));if(this.#e.set(n,t),s){for(const[i,l]of this.#t)i===t?n.skipped_effects.delete(l):n.skipped_effects.add(l);for(const[i,l]of this.#n)i===t?n.skipped_effects.delete(l.effect):n.skipped_effects.add(l.effect);n.oncommit(this.#o),n.ondiscard(this.#s)}else this.#o()}}function ae(e,t,r=!1){var n=new Va(e),s=r?ct:0;function o(a,i){n.ensure(a,i)}yn(()=>{var a=!1;t((i,l=!0)=>{a=!0,o(l,i)}),a||o(!1,null)},s)}function Mc(e,t,r){for(var n=[],s=t.length,o,a=t.length,i=0;i<s;i++){let h=t[i];St(h,()=>{if(o){if(o.pending.delete(h),o.done.add(h),o.pending.size===0){var c=e.outrogroups;_s(mn(o.done)),c.delete(o),c.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var l=n.length===0&&r!==null;if(l){var u=r,f=u.parentNode;dc(f),f.append(u),e.items.clear()}_s(t,!l)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function _s(e,t=!0){for(var r=0;r<e.length;r++)ce(e[r],t)}var Io;function vs(e,t,r,n,s,o=null){var a=e,i=new Map,l=(t&da)!==0;if(l){var u=e;a=u.appendChild(lt())}var f=null,h=st(()=>{var b=r();return hn(b)?b:b==null?[]:mn(b)}),c,d=!0;function m(){v.fallback=f,Nc(v,c,a,t,n),f!==null&&(c.length===0?(f.f&Ke)===0?Ds(f):(f.f^=Ke,Cr(f,null,a)):St(f,()=>{f=null}))}var _=yn(()=>{c=p(h);for(var b=c.length,E=new Set,y=H,g=Ta(),x=0;x<b;x+=1){var S=c[x],F=n(S,x),P=d?null:i.get(F);P?(P.v&&Ct(P.v,S),P.i&&Ct(P.i,x),g&&y.skipped_effects.delete(P.e)):(P=kc(i,d?a:Io??=lt(),S,F,x,s,t,r),d||(P.e.f|=Ke),i.set(F,P)),E.add(F)}if(b===0&&o&&!f&&(d?f=be(()=>o(a)):(f=be(()=>o(Io??=lt())),f.f|=Ke)),!d)if(g){for(const[A,C]of i)E.has(A)||y.skipped_effects.add(C.e);y.oncommit(m),y.ondiscard(()=>{})}else m();p(h)}),v={effect:_,items:i,outrogroups:null,fallback:f};d=!1}function Nc(e,t,r,n,s){var o=(n&Gu)!==0,a=t.length,i=e.items,l=e.effect.first,u,f=null,h,c=[],d=[],m,_,v,b;if(o)for(b=0;b<a;b+=1)m=t[b],_=s(m,b),v=i.get(_).e,(v.f&Ke)===0&&(v.nodes?.a?.measure(),(h??=new Set).add(v));for(b=0;b<a;b+=1){if(m=t[b],_=s(m,b),v=i.get(_).e,e.outrogroups!==null)for(const C of e.outrogroups)C.pending.delete(v),C.done.delete(v);if((v.f&Ke)!==0)if(v.f^=Ke,v===l)Cr(v,null,r);else{var E=f?f.next:l;v===e.effect.last&&(e.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),rt(e,f,v),rt(e,v,E),Cr(v,E,r),f=v,c=[],d=[],l=f.next;continue}if((v.f&ve)!==0&&(Ds(v),o&&(v.nodes?.a?.unfix(),(h??=new Set).delete(v))),v!==l){if(u!==void 0&&u.has(v)){if(c.length<d.length){var y=d[0],g;f=y.prev;var x=c[0],S=c[c.length-1];for(g=0;g<c.length;g+=1)Cr(c[g],y,r);for(g=0;g<d.length;g+=1)u.delete(d[g]);rt(e,x.prev,S.next),rt(e,f,x),rt(e,S,y),l=y,f=S,b-=1,c=[],d=[]}else u.delete(v),Cr(v,l,r),rt(e,v.prev,v.next),rt(e,v,f===null?e.effect.first:f.next),rt(e,f,v),f=v;continue}for(c=[],d=[];l!==null&&l!==v;)(u??=new Set).add(l),d.push(l),l=l.next;if(l===null)continue}(v.f&Ke)===0&&c.push(v),f=v,l=v.next}if(e.outrogroups!==null){for(const C of e.outrogroups)C.pending.size===0&&(_s(mn(C.done)),e.outrogroups?.delete(C));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||u!==void 0){var F=[];if(u!==void 0)for(v of u)(v.f&ve)===0&&F.push(v);for(;l!==null;)(l.f&ve)===0&&l!==e.fallback&&F.push(l),l=l.next;var P=F.length;if(P>0){var A=(n&da)!==0&&a===0?r:null;if(o){for(b=0;b<P;b+=1)F[b].nodes?.a?.measure();for(b=0;b<P;b+=1)F[b].nodes?.a?.fix()}Mc(e,F,A)}}o&&It(()=>{if(h!==void 0)for(v of h)v.nodes?.a?.apply()})}function kc(e,t,r,n,s,o,a,i){var l=(a&Nu)!==0?(a&Lu)===0?M(r,!1,!1):Pt(r):null,u=(a&ku)!==0?Pt(s):null;return{v:l,i:u,e:be(()=>(o(t,l??r,u??s,i),()=>{e.delete(n)}))}}function Cr(e,t,r){if(e.nodes)for(var n=e.nodes.start,s=e.nodes.end,o=t&&(t.f&Ke)===0?t.nodes.start:r;n!==null;){var a=Ur(n);if(o.before(n),n===s)return;n=a}}function rt(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function Xt(e,t,r){var n=new Va(e);yn(()=>{var s=t()??null;n.ensure(s,s&&(o=>r(o,s)))},ct)}const Gc=()=>performance.now(),qe={tick:e=>requestAnimationFrame(e),now:()=>Gc(),tasks:new Set};function za(){const e=qe.now();qe.tasks.forEach(t=>{t.c(e)||(qe.tasks.delete(t),t.f())}),qe.tasks.size!==0&&qe.tick(za)}function Lc(e){let t;return qe.tasks.size===0&&qe.tick(za),{promise:new Promise(r=>{qe.tasks.add(t={c:e,f:r})}),abort(){qe.tasks.delete(t)}}}function Xr(e,t){ur(()=>{e.dispatchEvent(new CustomEvent(t))})}function Uc(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Do(e){const t={},r=e.split(";");for(const n of r){const[s,o]=n.split(":");if(!s||o===void 0)break;const a=Uc(s.trim());t[a]=o.trim()}return t}const Oc=e=>e;function Vc(e,t,r,n){var s=(e&$u)!==0,o="both",a,i=t.inert,l=t.style.overflow,u,f;function h(){return ur(()=>a??=r()(t,n?.()??{},{direction:o}))}var c={is_global:s,in(){t.inert=i,Xr(t,"introstart"),u=ps(t,h(),f,1,()=>{Xr(t,"introend"),u?.abort(),u=a=void 0,t.style.overflow=l})},out(v){t.inert=!0,Xr(t,"outrostart"),f=ps(t,h(),u,0,()=>{Xr(t,"outroend"),v?.()})},stop:()=>{u?.abort(),f?.abort()}},d=L;if((d.nodes.t??=[]).push(c),ms){var m=s;if(!m){for(var _=d.parent;_&&(_.f&ct)!==0;)for(;(_=_.parent)&&(_.f&Le)===0;);m=!_||(_.f&pn)!==0}m&&Is(()=>{we(()=>c.in())})}}function ps(e,t,r,n,s){var o=n===1;if(Eu(t)){var a,i=!1;return It(()=>{if(!i){var v=t({direction:o?"in":"out"});a=ps(e,v,r,n,s)}}),{abort:()=>{i=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(r?.deactivate(),!t?.duration)return s(),{abort:Tr,deactivate:Tr,reset:Tr,t:()=>n};const{delay:l=0,css:u,tick:f,easing:h=Oc}=t;var c=[];if(o&&r===void 0&&(f&&f(0,1),u)){var d=Do(u(0,1));c.push(d,d)}var m=()=>1-n,_=e.animate(c,{duration:l,fill:"forwards"});return _.onfinish=()=>{_.cancel();var v=r?.t()??1-n;r?.abort();var b=n-v,E=t.duration*Math.abs(b),y=[];if(E>0){var g=!1;if(u)for(var x=Math.ceil(E/16.666666666666668),S=0;S<=x;S+=1){var F=v+b*h(S/x),P=Do(u(F,1-F));y.push(P),g||=P.overflow==="hidden"}g&&(e.style.overflow="hidden"),m=()=>{var A=_.currentTime;return v+b*h(A/E)},f&&Lc(()=>{if(_.playState!=="running")return!1;var A=m();return f(A,1-A),!0})}_=e.animate(y,{duration:E,fill:"forwards"}),_.onfinish=()=>{m=()=>n,f?.(n,1-n),s()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=Tr)},deactivate:()=>{s=Tr},reset:()=>{n===0&&f?.(1,0)},t:()=>m()}}const Mo=[...` 	
\r\fÂ \v\uFEFF`];function zc(e,t,r){var n=e==null?"":""+e;if(r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var o=s.length,a=0;(a=n.indexOf(s,a))>=0;){var i=a+o;(a===0||Mo.includes(n[a-1]))&&(i===n.length||Mo.includes(n[i]))?n=(a===0?"":n.substring(0,a))+n.substring(i+1):a=i}}return n===""?null:n}function xs(e,t,r,n,s,o){var a=e.__className;if(a!==r||a===void 0){var i=zc(r,n,o);i==null?e.removeAttribute("class"):e.className=i,e.__className=r}else if(o&&s!==o)for(var l in o){var u=!!o[l];(s==null||u!==!!s[l])&&e.classList.toggle(l,u)}return o}function Ha(e,t,r=!1){if(e.multiple){if(t==null)return;if(!hn(t))return Ku();for(var n of e.options)n.selected=t.includes(Ir(n));return}for(n of e.options){var s=Ir(n);if(cc(s,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Hc(e){var t=new MutationObserver(()=>{Ha(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),bn(()=>{t.disconnect()})}function No(e,t,r=t){var n=new WeakSet,s=!0;mc(e,"change",o=>{var a=o?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(a),Ir);else{var l=e.querySelector(a)??e.querySelector("option:not([disabled])");i=l&&Ir(l)}r(i),H!==null&&n.add(H)}),Is(()=>{var o=t();if(e===document.activeElement){var a=Zr??H;if(n.has(a))return}if(Ha(e,o,s),s&&o===void 0){var i=e.querySelector(":checked");i!==null&&(o=Ir(i),r(o))}e.__value=o,s=!1}),Hc(e)}function Ir(e){return"__value"in e?e.__value:e.value}const $c=Symbol("is custom element"),Xc=Symbol("is html");function qc(e,t){var r=Ms(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Kc(e,t){var r=Ms(e);r.checked!==(r.checked=t??void 0)&&(e.checked=t)}function Jr(e,t,r,n){var s=Ms(e);s[t]!==(s[t]=r)&&(t==="loading"&&(e[Su]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Yc(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Ms(e){return e.__attributes??={[$c]:e.nodeName.includes("-"),[Xc]:e.namespaceURI===qu}}var ko=new Map;function Yc(e){var t=e.getAttribute("is")||e.nodeName,r=ko.get(t);if(r)return r;ko.set(t,r=[]);for(var n,s=e,o=Element.prototype;o!==s;){n=la(s);for(var a in n)n[a].set&&r.push(a);s=Ts(s)}return r}function Wc(e,t,r){var n=Rt(e,t);n&&n.set&&(e[t]=r,bn(()=>{e[t]=null}))}function Go(e,t){return e===t||e?.[We]===t}function es(e={},t,r,n){return Is(()=>{var s,o;return En(()=>{s=o,o=[],we(()=>{e!==r(...o)&&(t(e,...o),s&&Go(r(...s),e)&&t(null,...s))})}),()=>{It(()=>{o&&Go(r(...o),e)&&t(null,...o)})}}),e}function et(e=!1){const t=X,r=t.l.u;if(!r)return;let n=()=>Ze(t.s);if(e){let s=0,o={};const a=xn(()=>{let i=!1;const l=t.s;for(const u in l)l[u]!==o[u]&&(o[u]=l[u],i=!0);return i&&s++,s});n=()=>p(a)}r.b.length&&vc(()=>{Lo(t,n),ls(r.b)}),ds(()=>{const s=we(()=>r.m.map(yu));return()=>{for(const o of s)typeof o=="function"&&o()}}),r.a.length&&ds(()=>{Lo(t,n),ls(r.a)})}function Lo(e,t){if(e.l.s)for(const r of e.l.s)p(r);t()}let qr=!1;function jc(e){var t=qr;try{return qr=!1,[e(),qr]}finally{qr=t}}function K(e,t,r,n){var s=!lr||(r&Ou)!==0,o=(r&zu)!==0,a=(r&Hu)!==0,i=n,l=!0,u=()=>(l&&(l=!1,i=a?we(n):n),i),f;if(o){var h=We in e||Ru in e;f=Rt(e,t)?.set??(h&&t in e?y=>e[t]=y:void 0)}var c,d=!1;o?[c,d]=jc(()=>e[t]):c=e[t],c===void 0&&n!==void 0&&(c=u(),f&&(s&&Cu(),f(c)));var m;if(s?m=()=>{var y=e[t];return y===void 0?u():(l=!0,y)}:m=()=>{var y=e[t];return y!==void 0&&(i=void 0),y===void 0?i:y},s&&(r&Vu)===0)return m;if(f){var _=e.$$legacy;return(function(y,g){return arguments.length>0?((!s||!g||_||d)&&f(g?m():y),y):m()})}var v=!1,b=((r&Uu)!==0?xn:st)(()=>(v=!1,m()));o&&p(b);var E=L;return(function(y,g){if(arguments.length>0){const x=g?p(b):s&&o?Jt(y):y;return R(b,x),v=!0,i!==void 0&&(i=x),y}return Dt&&v||(E.f&Ye)!==0?b.v:p(b)})}function $a(e){X===null&&ws(),lr&&X.l!==null?Jc(X).m.push(e):ds(()=>{const t=we(e);if(typeof t=="function")return t})}function Qc(e){X===null&&ws(),$a(()=>()=>we(e))}function Zc(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function Ns(){const e=X;return e===null&&ws(),(t,r,n)=>{const s=e.s.$$events?.[t];if(s){const o=hn(s)?s.slice():[s],a=Zc(t,r,n);for(const i of o)i.call(e.x,a);return!a.defaultPrevented}return!0}}function Jc(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const ef="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ef);Qu();let ks=Float32Array;function Gs(e,t,r){const n=new ks(3);return e&&(n[0]=e),t&&(n[1]=t),r&&(n[2]=r),n}function tf(e,t,r){return r=r||new ks(3),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function rf(e,t,r){return r=r||new ks(3),r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}let Xa=Float32Array;function nf(e){return e=e||new Xa(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function sf(e,t){t=t||new Xa(16);const r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],i=e[5],l=e[6],u=e[7],f=e[8],h=e[9],c=e[10],d=e[11],m=e[12],_=e[13],v=e[14],b=e[15],E=c*b,y=v*d,g=l*b,x=v*u,S=l*d,F=c*u,P=s*b,A=v*o,C=s*d,k=c*o,ne=s*u,j=l*o,de=f*_,pe=m*h,Ce=a*_,ze=m*i,He=a*h,$e=f*i,vt=r*_,Mt=m*n,Nt=r*h,kt=f*n,pt=r*i,xt=a*n,pr=E*i+x*h+S*_-(y*i+g*h+F*_),xr=y*n+P*h+k*_-(E*n+A*h+C*_),Gt=g*n+A*i+ne*_-(x*n+P*i+j*_),Hr=F*n+C*i+j*h-(S*n+k*i+ne*h),W=1/(r*pr+a*xr+f*Gt+m*Hr);return t[0]=W*pr,t[1]=W*xr,t[2]=W*Gt,t[3]=W*Hr,t[4]=W*(y*a+g*f+F*m-(E*a+x*f+S*m)),t[5]=W*(E*r+A*f+C*m-(y*r+P*f+k*m)),t[6]=W*(x*r+P*a+j*m-(g*r+A*a+ne*m)),t[7]=W*(S*r+k*a+ne*f-(F*r+C*a+j*f)),t[8]=W*(de*u+ze*d+He*b-(pe*u+Ce*d+$e*b)),t[9]=W*(pe*o+vt*d+kt*b-(de*o+Mt*d+Nt*b)),t[10]=W*(Ce*o+Mt*u+pt*b-(ze*o+vt*u+xt*b)),t[11]=W*($e*o+Nt*u+xt*d-(He*o+kt*u+pt*d)),t[12]=W*(Ce*c+$e*v+pe*l-(He*v+de*l+ze*c)),t[13]=W*(Nt*v+de*s+Mt*c-(vt*c+kt*v+pe*s)),t[14]=W*(vt*l+xt*v+ze*s-(pt*v+Ce*s+Mt*l)),t[15]=W*(pt*c+He*s+kt*l-(Nt*l+xt*c+$e*s)),t}function of(e,t,r){r=r||Gs();const n=t[0],s=t[1],o=t[2],a=n*e[3]+s*e[7]+o*e[11]+e[15];return r[0]=(n*e[0]+s*e[4]+o*e[8]+e[12])/a,r[1]=(n*e[1]+s*e[5]+o*e[9]+e[13])/a,r[2]=(n*e[2]+s*e[6]+o*e[10]+e[14])/a,r}function af(e,t,r){r=r||Gs();const n=t[0],s=t[1],o=t[2];return r[0]=n*e[0]+s*e[4]+o*e[8],r[1]=n*e[1]+s*e[5]+o*e[9],r[2]=n*e[2]+s*e[6]+o*e[10],r}const Ls=5120,Nr=5121,Us=5122,Os=5123,Vs=5124,zs=5125,Hs=5126,lf=32819,uf=32820,cf=33635,ff=5131,df=33640,hf=35899,mf=35902,_f=36269,vf=34042,qa={};{const e=qa;e[Ls]=Int8Array,e[Nr]=Uint8Array,e[Us]=Int16Array,e[Os]=Uint16Array,e[Vs]=Int32Array,e[zs]=Uint32Array,e[Hs]=Float32Array,e[lf]=Uint16Array,e[uf]=Uint16Array,e[cf]=Uint16Array,e[ff]=Uint16Array,e[df]=Uint32Array,e[hf]=Uint32Array,e[mf]=Uint32Array,e[_f]=Uint32Array,e[vf]=Uint32Array}function gn(e){if(e instanceof Int8Array)return Ls;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return Nr;if(e instanceof Int16Array)return Us;if(e instanceof Uint16Array)return Os;if(e instanceof Int32Array)return Vs;if(e instanceof Uint32Array)return zs;if(e instanceof Float32Array)return Hs;throw new Error("unsupported typed array type")}function Ka(e){if(e===Int8Array)return Ls;if(e===Uint8Array||e===Uint8ClampedArray)return Nr;if(e===Int16Array)return Us;if(e===Uint16Array)return Os;if(e===Int32Array)return Vs;if(e===Uint32Array)return zs;if(e===Float32Array)return Hs;throw new Error("unsupported typed array type")}function Ya(e){const t=qa[e];if(!t)throw new Error("unknown gl type");return t}const kr=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function pf(e,t,r){e.forEach(function(n){const s=t[n];s!==void 0&&(r[n]=s)})}function Wa(...e){console.error(...e)}const Uo=new Map;function Rn(e,t){if(!e||typeof e!="object")return!1;let r=Uo.get(t);r||(r=new WeakMap,Uo.set(t,r));let n=r.get(e);if(n===void 0){const s=Object.prototype.toString.call(e);n=s.substring(8,s.length-1)===t,r.set(e,n)}return n}function xf(e,t){return typeof WebGLBuffer<"u"&&Rn(t,"WebGLBuffer")}function ja(e,t){return typeof WebGLRenderbuffer<"u"&&Rn(t,"WebGLRenderbuffer")}function Sn(e,t){return typeof WebGLTexture<"u"&&Rn(t,"WebGLTexture")}function bf(e,t){return typeof WebGLSampler<"u"&&Rn(t,"WebGLSampler")}const Qa=35044,ut=34962,Za=34963,Ef=34660,yf=5120,gf=5121,Rf=5122,Sf=5123,Tf=5124,Af=5125,Ja=5126,el={attribPrefix:""};function Ff(e,t,r,n,s){e.bindBuffer(t,r),e.bufferData(t,n,s||Qa)}function $s(e,t,r,n){if(xf(e,t))return t;r=r||ut;const s=e.createBuffer();return Ff(e,r,s,t,n),s}function tl(e){return e==="indices"}function wf(e){return e===Int8Array||e===Uint8Array}function Xs(e){return e.length?e:e.data}const Pf=/coord|texture/i,Cf=/color|colour/i;function Bf(e,t){let r;if(Pf.test(e)?r=2:Cf.test(e)?r=4:r=3,t%r>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${r} but ${t} values is not evenly divisible by ${r}. You should specify it.`);return r}function qs(e,t,r){return e.numComponents||e.size||Bf(t,r||Xs(e).length)}function Tn(e,t){if(kr(e))return e;if(kr(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type?Ks(e.type):void 0;return r||(tl(t)?r=Uint16Array:r=Float32Array),new r(e.data)}function If(e){return typeof e=="number"?e:e?Ka(e):Ja}function Ks(e){return typeof e=="number"?Ya(e):e||Float32Array}function Df(e,t){return{buffer:t.buffer,numValues:24,type:If(t.type),arrayType:Ks(t.type)}}function Mf(e,t){const r=t.data||t,n=Ks(t.type),s=r*n.BYTES_PER_ELEMENT,o=e.createBuffer();return e.bindBuffer(ut,o),e.bufferData(ut,s,t.drawType||Qa),{buffer:o,numValues:r,type:Ka(n),arrayType:n}}function Nf(e,t,r){const n=Tn(t,r);return{arrayType:n.constructor,buffer:$s(e,n,void 0,t.drawType),type:gn(n),numValues:0}}function kf(e,t){const r={};return Object.keys(t).forEach(function(n){if(!tl(n)){const s=t[n],o=s.attrib||s.name||s.attribName||el.attribPrefix+n;if(s.value){if(!Array.isArray(s.value)&&!kr(s.value))throw new Error("array.value is not array or typedarray");r[o]={value:s.value}}else{let a;s.buffer&&s.buffer instanceof WebGLBuffer?a=Df:typeof s=="number"||typeof s.data=="number"?a=Mf:a=Nf;const{buffer:i,type:l,numValues:u,arrayType:f}=a(e,s,n),h=s.normalize!==void 0?s.normalize:wf(f),c=qs(s,n,u);r[o]={buffer:i,numComponents:c,type:l,normalize:h,stride:s.stride||0,offset:s.offset||0,divisor:s.divisor===void 0?void 0:s.divisor,drawType:s.drawType}}}}),e.bindBuffer(ut,null),r}function Gf(e,t){return t===yf||t===gf?1:t===Rf||t===Sf?2:t===Tf||t===Af||t===Ja?4:0}const tr=["position","positions","a_position"];function Lf(e){let t,r;for(r=0;r<tr.length&&(t=tr[r],!(t in e));++r);r===tr.length&&(t=Object.keys(e)[0]);const n=e[t],s=Xs(n).length;if(s===void 0)return 1;const o=qs(n,t),a=s/o;if(s%o>0)throw new Error(`numComponents ${o} not correct for length ${s}`);return a}function Uf(e,t){let r,n;for(n=0;n<tr.length&&(r=tr[n],!(r in t||(r=el.attribPrefix+r,r in t)));++n);n===tr.length&&(r=Object.keys(t)[0]);const s=t[r];if(!s.buffer)return 1;e.bindBuffer(ut,s.buffer);const o=e.getBufferParameter(ut,Ef);e.bindBuffer(ut,null);const a=Gf(e,s.type),i=o/a,l=s.numComponents||s.size,u=i/l;if(u%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return u}function Of(e,t,r){const n=kf(e,t),s=Object.assign({},r||{});s.attribs=Object.assign({},r?r.attribs:{},n);const o=t.indices;if(o){const a=Tn(o,"indices");s.indices=$s(e,a,Za),s.numElements=a.length,s.elementType=gn(a)}else s.numElements||(s.numElements=Uf(e,s.attribs));return s}function Vf(e,t,r){const n=r==="indices"?Za:ut,s=Tn(t,r);return $s(e,s,n)}function zf(e,t){const r={};return Object.keys(t).forEach(function(n){r[n]=Vf(e,t[n],n)}),t.indices?(r.numElements=t.indices.length,r.elementType=gn(Tn(t.indices))):r.numElements=Lf(t),r}const yt=Xs,Hf=qs;function rl(e,t){let r=0;return e.push=function(){for(let n=0;n<arguments.length;++n){const s=arguments[n];if(s instanceof Array||kr(s))for(let o=0;o<s.length;++o)e[r++]=s[o];else e[r++]=s}},e.reset=function(n){r=n||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function I(e,t,r){const n=r||Float32Array;return rl(new n(e*t),e)}function $f(e){return e!=="indices"}function Xf(e){const t=e.indices,r={},n=t.length;function s(o){const a=e[o],i=a.numComponents,l=I(i,n,a.constructor);for(let u=0;u<n;++u){const h=t[u]*i;for(let c=0;c<i;++c)l.push(a[h+c])}r[o]=l}return Object.keys(e).filter($f).forEach(s),r}function qf(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal,r=t.length;for(let n=0;n<r;n+=9){const s=t[n+0],o=t[n+1],a=t[n+2],i=t[n+3],l=t[n+4],u=t[n+5],f=t[n+6],h=t[n+7],c=t[n+8];let d=s+i+f,m=o+l+h,_=a+u+c;const v=Math.sqrt(d*d+m*m+_*_);d/=v,m/=v,_/=v,t[n+0]=d,t[n+1]=m,t[n+2]=_,t[n+3]=d,t[n+4]=m,t[n+5]=_,t[n+6]=d,t[n+7]=m,t[n+8]=_}return e}function Ys(e,t,r){const n=e.length,s=new Float32Array(3);for(let o=0;o<n;o+=3)r(t,[e[o],e[o+1],e[o+2]],s),e[o]=s[0],e[o+1]=s[1],e[o+2]=s[2]}function Kf(e,t,r){r=r||Gs();const n=t[0],s=t[1],o=t[2];return r[0]=n*e[0]+s*e[1]+o*e[2],r[1]=n*e[4]+s*e[5]+o*e[6],r[2]=n*e[8]+s*e[9]+o*e[10],r}function nl(e,t){return Ys(e,t,af),e}function sl(e,t){return Ys(e,sf(t),Kf),e}function ol(e,t){return Ys(e,t,of),e}function il(e,t){return Object.keys(e).forEach(function(r){const n=e[r];r.indexOf("pos")>=0?ol(n,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?nl(n,t):r.indexOf("norm")>=0&&sl(n,t)}),e}function Ws(e,t,r){return e=e||2,t=t||0,r=r||0,e*=.5,{position:{numComponents:2,data:[t+-1*e,r+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function js(e,t,r,n,s){e=e||1,t=t||1,r=r||1,n=n||1,s=s||nf();const o=(r+1)*(n+1),a=I(3,o),i=I(3,o),l=I(2,o);for(let c=0;c<=n;c++)for(let d=0;d<=r;d++){const m=d/r,_=c/n;a.push(e*m-e*.5,0,t*_-t*.5),i.push(0,1,0),l.push(m,_)}const u=r+1,f=I(3,r*n*2,Uint16Array);for(let c=0;c<n;c++)for(let d=0;d<r;d++)f.push((c+0)*u+d,(c+1)*u+d,(c+0)*u+d+1),f.push((c+1)*u+d,(c+1)*u+d+1,(c+0)*u+d+1);return il({position:a,normal:i,texcoord:l,indices:f},s)}function Qs(e,t,r,n,s,o,a){if(t<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,s=s||Math.PI,o=o||0,a=a||Math.PI*2;const i=s-n,l=a-o,u=(t+1)*(r+1),f=I(3,u),h=I(3,u),c=I(2,u);for(let _=0;_<=r;_++)for(let v=0;v<=t;v++){const b=v/t,E=_/r,y=l*b+o,g=i*E+n,x=Math.sin(y),S=Math.cos(y),F=Math.sin(g),P=Math.cos(g),A=S*F,C=P,k=x*F;f.push(e*A,e*C,e*k),h.push(A,C,k),c.push(1-b,E)}const d=t+1,m=I(3,t*r*2,Uint16Array);for(let _=0;_<t;_++)for(let v=0;v<r;v++)m.push((v+0)*d+_,(v+0)*d+_+1,(v+1)*d+_),m.push((v+1)*d+_,(v+0)*d+_+1,(v+1)*d+_+1);return{position:f,normal:h,texcoord:c,indices:m}}const Yf=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function Zs(e){e=e||1;const t=e/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],s=[[1,0],[0,0],[0,1],[1,1]],o=24,a=I(3,o),i=I(3,o),l=I(2,o),u=I(3,12,Uint16Array);for(let f=0;f<6;++f){const h=Yf[f];for(let d=0;d<4;++d){const m=r[h[d]],_=n[f],v=s[d];a.push(m),i.push(_),l.push(v)}const c=4*f;u.push(c+0,c+1,c+2),u.push(c+0,c+2,c+3)}return{position:a,normal:i,texcoord:l,indices:u}}function An(e,t,r,n,s,o,a){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(s<1)throw new Error("verticalSubdivisions must be 1 or greater");const i=o===void 0?!0:o,l=a===void 0?!0:a,u=(i?2:0)+(l?2:0),f=(n+1)*(s+1+u),h=I(3,f),c=I(3,f),d=I(2,f),m=I(3,n*(s+u/2)*2,Uint16Array),_=n+1,v=Math.atan2(e-t,r),b=Math.cos(v),E=Math.sin(v),y=i?-2:0,g=s+(l?2:0);for(let x=y;x<=g;++x){let S=x/s,F=r*S,P;x<0?(F=0,S=1,P=e):x>s?(F=r,S=1,P=t):P=e+(t-e)*(x/s),(x===-2||x===s+2)&&(P=0,S=0),F-=r/2;for(let A=0;A<_;++A){const C=Math.sin(A*Math.PI*2/n),k=Math.cos(A*Math.PI*2/n);h.push(C*P,F,k*P),x<0?c.push(0,-1,0):x>s?c.push(0,1,0):P===0?c.push(0,0,0):c.push(C*b,E,k*b),d.push(A/n,1-S)}}for(let x=0;x<s+u;++x)if(!(x===1&&i||x===s+u-2&&l))for(let S=0;S<n;++S)m.push(_*(x+0)+0+S,_*(x+0)+1+S,_*(x+1)+1+S),m.push(_*(x+0)+0+S,_*(x+1)+1+S,_*(x+1)+0+S);return{position:h,normal:c,texcoord:d,indices:m}}function Oo(e,t){t=t||[];const r=[];for(let n=0;n<e.length;n+=4){const s=e[n],o=e.slice(n+1,n+4);o.push.apply(o,t);for(let a=0;a<s;++a)r.push.apply(r,o)}return r}function Js(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],r=Oo([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=Oo([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),s=e.length/3,o={position:I(3,s),texcoord:I(2,s),normal:I(3,s),color:I(4,s,Uint8Array),indices:I(3,s/3,Uint16Array)};o.position.push(e),o.texcoord.push(t),o.normal.push(r),o.color.push(n);for(let a=0;a<s;++a)o.indices.push(a);return o}function Fn(e,t,r,n,s,o,a){if(s<=0)throw new Error("subdivisionDown must be > 0");o=o||0,a=a||1;const i=2,l=a-o,u=(s+1)*2*(2+i),f=I(3,u),h=I(3,u),c=I(2,u);function d(E,y,g){return E+(y-E)*g}function m(E,y,g,x,S,F){for(let P=0;P<=s;P++){const A=y/(i-1),C=P/s,k=(A-.5)*2,ne=(o+C*l)*Math.PI,j=Math.sin(ne),de=Math.cos(ne),pe=d(e,E,j),Ce=k*n,ze=de*e,He=j*pe;f.push(Ce,ze,He);const $e=tf(rf([0,j,de],g),x);h.push($e),c.push(A*S+F,C)}}for(let E=0;E<i;E++){const y=(E/(i-1)-.5)*2;m(t,E,[1,1,1],[0,0,0],1,0),m(t,E,[0,0,0],[y,0,0],0,0),m(r,E,[1,1,1],[0,0,0],1,0),m(r,E,[0,0,0],[y,0,0],0,1)}const _=I(3,s*2*(2+i),Uint16Array);function v(E,y){for(let g=0;g<s;++g)_.push(E+g+0,E+g+1,y+g+0),_.push(E+g+1,y+g+1,y+g+0)}const b=s+1;return v(b*0,b*4),v(b*5,b*7),v(b*6,b*2),v(b*3,b*1),{position:f,normal:h,texcoord:c,indices:_}}function eo(e,t,r,n,s,o){return An(e,e,t,r,n,s,o)}function to(e,t,r,n,s,o){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");s=s||0,o=o||Math.PI*2;const a=o-s,i=r+1,l=n+1,u=i*l,f=I(3,u),h=I(3,u),c=I(2,u),d=I(3,r*n*2,Uint16Array);for(let m=0;m<l;++m){const _=m/n,v=_*Math.PI*2,b=Math.sin(v),E=e+b*t,y=Math.cos(v),g=y*t;for(let x=0;x<i;++x){const S=x/r,F=s+S*a,P=Math.sin(F),A=Math.cos(F),C=P*E,k=A*E,ne=P*b,j=A*b;f.push(C,g,k),h.push(ne,y,j),c.push(S,1-_)}}for(let m=0;m<n;++m)for(let _=0;_<r;++_){const v=1+_,b=1+m;d.push(i*m+_,i*b+_,i*m+v),d.push(i*b+_,i*b+v,i*m+v)}return{position:f,normal:h,texcoord:c,indices:d}}function ro(e,t,r,n,s){if(t<3)throw new Error("divisions must be at least 3");r=r||1,s=s||1,n=n||0;const o=(t+1)*(r+1),a=I(3,o),i=I(3,o),l=I(2,o),u=I(3,r*t*2,Uint16Array);let f=0;const h=e-n,c=t+1;for(let d=0;d<=r;++d){const m=n+h*Math.pow(d/r,s);for(let _=0;_<=t;++_){const v=2*Math.PI*_/t,b=m*Math.cos(v),E=m*Math.sin(v);if(a.push(b,0,E),i.push(0,1,0),l.push(1-_/t,d/r),d>0&&_!==t){const y=f+(_+1),g=f+_,x=f+_-c,S=f+(_+1)-c;u.push(y,g,x),u.push(y,x,S)}}f+=t+1}return{position:a,normal:i,texcoord:l,indices:u}}function Wf(e){return Math.random()*e|0}function jf(e,t){t=t||{};const r=e.position.numElements,n=I(4,r,Uint8Array),s=t.rand||function(o,a){return a<3?Wf(256):255};if(e.color=n,e.indices)for(let o=0;o<r;++o)n.push(s(o,0),s(o,1),s(o,2),s(o,3));else{const o=t.vertsPerColor||3,a=r/o;for(let i=0;i<a;++i){const l=[s(i,0),s(i,1),s(i,2),s(i,3)];for(let u=0;u<o;++u)n.push(l)}}return e}function Oe(e){return function(t){const r=e.apply(this,Array.prototype.slice.call(arguments,1));return zf(t,r)}}function Ve(e){return function(t){const r=e.apply(null,Array.prototype.slice.call(arguments,1));return Of(t,r)}}const Qf=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function bs(e,t,r,n){n=n||0;const s=e.length;for(let o=0;o<s;++o)t[r+o]=e[o]+n}function al(e,t){const r=yt(e),n=new r.constructor(t);let s=n;return r.numComponents&&r.numElements&&rl(n,r.numComponents),e.data&&(s={data:n},pf(Qf,e,s)),s}function Zf(e){const t={};let r;for(let i=0;i<e.length;++i){const l=e[i];Object.keys(l).forEach(function(u){t[u]||(t[u]=[]),!r&&u!=="indices"&&(r=u);const f=l[u],h=Hf(f,u),d=yt(f).length/h;t[u].push(d)})}function n(i){let l=0,u;for(let f=0;f<e.length;++f){const c=e[f][i],d=yt(c);l+=d.length,(!u||c.data)&&(u=c)}return{length:l,spec:u}}function s(i,l,u){let f=0,h=0;for(let c=0;c<e.length;++c){const m=e[c][i],_=yt(m);i==="indices"?(bs(_,u,h,f),f+=l[c]):bs(_,u,h),h+=_.length}}const o=t[r],a={};return Object.keys(t).forEach(function(i){const l=n(i),u=al(l.spec,l.length);s(i,o,yt(u)),a[i]=u}),a}function Jf(e){const t={};return Object.keys(e).forEach(function(r){const n=e[r],s=yt(n),o=al(n,s.length);bs(s,yt(o),0),t[r]=o}),t}const e0=Ve(Js),t0=Oe(Js),r0=Ve(Zs),n0=Oe(Zs),s0=Ve(js),o0=Oe(js),i0=Ve(Qs),a0=Oe(Qs),l0=Ve(An),u0=Oe(An),c0=Ve(Ws),f0=Oe(Ws),ll=Ve(Fn),ul=Oe(Fn),d0=Ve(eo),h0=Oe(eo),m0=Ve(to),_0=Oe(to),v0=Ve(ro),p0=Oe(ro),x0=ll,b0=ul,E0=Fn;var y0=Object.freeze({__proto__:null,create3DFBufferInfo:e0,create3DFBuffers:t0,create3DFVertices:Js,createAugmentedTypedArray:I,createCubeBufferInfo:r0,createCubeBuffers:n0,createCubeVertices:Zs,createPlaneBufferInfo:s0,createPlaneBuffers:o0,createPlaneVertices:js,createSphereBufferInfo:i0,createSphereBuffers:a0,createSphereVertices:Qs,createTruncatedConeBufferInfo:l0,createTruncatedConeBuffers:u0,createTruncatedConeVertices:An,createXYQuadBufferInfo:c0,createXYQuadBuffers:f0,createXYQuadVertices:Ws,createCresentBufferInfo:x0,createCresentBuffers:b0,createCresentVertices:E0,createCrescentBufferInfo:ll,createCrescentBuffers:ul,createCrescentVertices:Fn,createCylinderBufferInfo:d0,createCylinderBuffers:h0,createCylinderVertices:eo,createTorusBufferInfo:m0,createTorusBuffers:_0,createTorusVertices:to,createDiscBufferInfo:v0,createDiscBuffers:p0,createDiscVertices:ro,deindexVertices:Xf,flattenNormals:qf,makeRandomVertexColors:jf,reorientDirections:nl,reorientNormals:sl,reorientPositions:ol,reorientVertices:il,concatVertices:Zf,duplicateVertices:Jf});function Or(e){return!!e.texStorage2D}const cl=(function(){const e={},t={};function r(n){const s=n.constructor.name;if(!e[s]){for(const o in n)if(typeof n[o]=="number"){const a=t[n[o]];t[n[o]]=a?`${a} | ${o}`:o}e[s]=!0}}return function(s,o){return r(s),t[o]||(typeof o=="number"?`0x${o.toString(16)}`:o)}})(),Ar=void 0,dt={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},ir=kr,fl=(function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}})(),Vo=6406,Be=6407,q=6408,zo=6409,Ho=6410,Fr=6402,$o=34041,an=33071,ts=9728,rs=9729,g0=9986,ke=3553,Ge=34067,ht=32879,ft=35866,wn=34069,R0=34070,S0=34071,T0=34072,A0=34073,F0=34074,ln=10241,un=10240,cn=10242,fn=10243,Xo=32882,w0=33082,P0=33083,C0=33084,B0=33085,I0=34892,D0=34893,no=3317,dl=3314,hl=32878,ml=3316,_l=3315,vl=32877,en=37443,tn=37441,rn=37440,M0=33321,N0=36756,k0=33325,G0=33326,L0=33330,U0=33329,O0=33338,V0=33337,z0=33340,H0=33339,$0=33323,X0=36757,q0=33327,K0=33328,Y0=33336,W0=33335,j0=33332,Q0=33331,Z0=33334,J0=33333,ed=32849,td=35905,rd=36194,nd=36758,sd=35898,od=35901,id=34843,ad=34837,ld=36221,ud=36239,cd=36215,fd=36233,dd=36209,hd=36227,md=32856,_d=35907,vd=36759,pd=32855,xd=32854,bd=32857,Ed=34842,yd=34836,gd=36220,Rd=36238,Sd=36975,Td=36214,Ad=36232,Fd=36226,wd=36208,Pd=33189,Cd=33190,Bd=36012,Id=36013,Dd=35056,nt=5120,$=5121,Kr=5122,qt=5123,Yr=5124,bt=5125,ee=5126,qo=32819,Ko=32820,Yo=33635,Se=5131,wr=36193,ns=33640,Md=35899,Nd=35902,kd=36269,Gd=34042,Wr=33319,Kt=33320,jr=6403,Yt=36244,Wt=36248,Et=36249,Wo=33776,jo=33777,Qo=33778,Zo=33779,Jo=35916,ei=35917,ti=35918,ri=35919,ni=36196,si=37488,oi=37489,ii=37490,ai=37491,li=37492,ui=37493,ci=37494,fi=37495,di=37496,hi=37497,mi=35840,_i=35841,vi=35842,pi=35843,xi=37808,bi=37809,Ei=37810,yi=37811,gi=37812,Ri=37813,Si=37814,Ti=37815,Ai=37816,Fi=37817,wi=37818,Pi=37819,Ci=37820,Bi=37821,Ii=37840,Di=37841,Mi=37842,Ni=37843,ki=37844,Gi=37845,Li=37846,Ui=37847,Oi=37848,Vi=37849,zi=37850,Hi=37851,$i=37852,Xi=37853,qi=36492,Ki=36493,Yi=36494,Wi=36495,ji=36283,Qi=36284,Zi=36285,Ji=36286;let ss;function hr(e){if(!ss){const r={};r[Vo]={textureFormat:Vo,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[$,Se,wr,ee]},r[zo]={textureFormat:zo,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[$,Se,wr,ee]},r[Ho]={textureFormat:Ho,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[$,Se,wr,ee]},r[Be]={textureFormat:Be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[$,Se,wr,ee,Yo]},r[q]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[$,Se,wr,ee,qo,Ko]},r[Fr]={textureFormat:Fr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[bt,qt]},r[M0]={textureFormat:jr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[$]},r[N0]={textureFormat:jr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[nt]},r[k0]={textureFormat:jr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[ee,Se]},r[G0]={textureFormat:jr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[ee]},r[L0]={textureFormat:Yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[$]},r[U0]={textureFormat:Yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[nt]},r[j0]={textureFormat:Yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[qt]},r[Q0]={textureFormat:Yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Kr]},r[Z0]={textureFormat:Yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[bt]},r[J0]={textureFormat:Yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Yr]},r[$0]={textureFormat:Wr,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[$]},r[X0]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[nt]},r[q0]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[ee,Se]},r[K0]={textureFormat:Wr,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[ee]},r[Y0]={textureFormat:Kt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[$]},r[W0]={textureFormat:Kt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[nt]},r[O0]={textureFormat:Kt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[qt]},r[V0]={textureFormat:Kt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Kr]},r[z0]={textureFormat:Kt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[bt]},r[H0]={textureFormat:Kt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Yr]},r[ed]={textureFormat:Be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[$]},r[td]={textureFormat:Be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[$]},r[rd]={textureFormat:Be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[$,Yo]},r[nd]={textureFormat:Be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[nt]},r[sd]={textureFormat:Be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ee,Se,Md]},r[od]={textureFormat:Be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[ee,Se,Nd]},r[id]={textureFormat:Be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[ee,Se]},r[ad]={textureFormat:Be,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ee]},r[ld]={textureFormat:Wt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[$]},r[ud]={textureFormat:Wt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[nt]},r[cd]={textureFormat:Wt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[qt]},r[fd]={textureFormat:Wt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Kr]},r[dd]={textureFormat:Wt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[bt]},r[hd]={textureFormat:Wt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Yr]},r[md]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[$]},r[_d]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[$]},r[vd]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[nt]},r[pd]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[$,Ko,ns]},r[xd]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[$,qo]},r[bd]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[ns]},r[Ed]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[ee,Se]},r[yd]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[ee]},r[gd]={textureFormat:Et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[$]},r[Rd]={textureFormat:Et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[nt]},r[Sd]={textureFormat:Et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ns]},r[Td]={textureFormat:Et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[qt]},r[Ad]={textureFormat:Et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Kr]},r[Fd]={textureFormat:Et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Yr]},r[wd]={textureFormat:Et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[bt]},r[Pd]={textureFormat:Fr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[qt,bt]},r[Cd]={textureFormat:Fr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[bt]},r[Bd]={textureFormat:Fr,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ee]},r[Dd]={textureFormat:$o,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Gd]},r[Id]={textureFormat:$o,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[kd]},Object.keys(r).forEach(function(o){const a=r[o];a.bytesPerElementMap={},a.bytesPerElement.forEach(function(i,l){const u=a.type[l];a.bytesPerElementMap[u]=i})});const n={bytes:8,width:4,height:4},s={bytes:16,width:4,height:4};r[Wo]={textureFormat:Wo,colorRenderable:!1,textureFilterable:!0,block:n},r[jo]={textureFormat:jo,colorRenderable:!1,textureFilterable:!0,block:n},r[Qo]={textureFormat:Qo,colorRenderable:!1,textureFilterable:!0,block:s},r[Zo]={textureFormat:Zo,colorRenderable:!1,textureFilterable:!0,block:s},r[Jo]={textureFormat:Jo,colorRenderable:!1,textureFilterable:!0,block:n},r[ei]={textureFormat:ei,colorRenderable:!1,textureFilterable:!0,block:n},r[ti]={textureFormat:ti,colorRenderable:!1,textureFilterable:!0,block:s},r[ri]={textureFormat:ri,colorRenderable:!1,textureFilterable:!0,block:s},r[ni]={textureFormat:ni,colorRenderable:!1,textureFilterable:!0,block:n},r[si]={textureFormat:si,colorRenderable:!1,textureFilterable:!0,block:n},r[oi]={textureFormat:oi,colorRenderable:!1,textureFilterable:!0,block:n},r[ii]={textureFormat:ii,colorRenderable:!1,textureFilterable:!0,block:s},r[ai]={textureFormat:ai,colorRenderable:!1,textureFilterable:!0,block:s},r[li]={textureFormat:li,colorRenderable:!1,textureFilterable:!0,block:n},r[ui]={textureFormat:ui,colorRenderable:!1,textureFilterable:!0,block:n},r[ci]={textureFormat:ci,colorRenderable:!1,textureFilterable:!0,block:n},r[fi]={textureFormat:fi,colorRenderable:!1,textureFilterable:!0,block:n},r[di]={textureFormat:di,colorRenderable:!1,textureFilterable:!0,block:s},r[hi]={textureFormat:hi,colorRenderable:!1,textureFilterable:!0,block:s},r[mi]={textureFormat:mi,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},r[_i]={textureFormat:_i,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},r[vi]={textureFormat:vi,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},r[pi]={textureFormat:pi,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},r[xi]={textureFormat:xi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},r[bi]={textureFormat:bi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},r[Ei]={textureFormat:Ei,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},r[yi]={textureFormat:yi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},r[gi]={textureFormat:gi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},r[Ri]={textureFormat:Ri,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},r[Si]={textureFormat:Si,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},r[Ti]={textureFormat:Ti,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},r[Ai]={textureFormat:Ai,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},r[Fi]={textureFormat:Fi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},r[wi]={textureFormat:wi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},r[Pi]={textureFormat:Pi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},r[Ci]={textureFormat:Ci,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},r[Bi]={textureFormat:Bi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},r[Ii]={textureFormat:Ii,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},r[Di]={textureFormat:Di,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},r[Mi]={textureFormat:Mi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},r[Ni]={textureFormat:Ni,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},r[ki]={textureFormat:ki,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},r[Gi]={textureFormat:Gi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},r[Li]={textureFormat:Li,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},r[Ui]={textureFormat:Ui,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},r[Oi]={textureFormat:Oi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},r[Vi]={textureFormat:Vi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},r[zi]={textureFormat:zi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},r[Hi]={textureFormat:Hi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},r[$i]={textureFormat:$i,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},r[Xi]={textureFormat:Xi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},r[qi]={textureFormat:qi,colorRenderable:!1,textureFilterable:!0,block:s},r[Ki]={textureFormat:Ki,colorRenderable:!1,textureFilterable:!0,block:s},r[Yi]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!0,block:s},r[Wi]={textureFormat:Wi,colorRenderable:!1,textureFilterable:!0,block:s},r[ji]={textureFormat:ji,colorRenderable:!1,textureFilterable:!0,block:n},r[Qi]={textureFormat:Qi,colorRenderable:!1,textureFilterable:!0,block:n},r[Zi]={textureFormat:Zi,colorRenderable:!1,textureFilterable:!0,block:n},r[Ji]={textureFormat:Ji,colorRenderable:!1,textureFilterable:!0,block:n},ss=r}const t=ss[e];if(!t)throw new Error("unknown internal format");return t}function pl(e,t){const n=hr(e).bytesPerElementMap[t];if(n===void 0)throw new Error("type not supported for internal format");return n}function mr(e){const t=hr(e);if(!t)throw new Error("unknown internal format");return{format:t.textureFormat,type:t.type?.[0]??$}}function xl(e){return!!hr(e).block}function Ld(e,t){const r=hr(e);return r.block?{blockWidth:r.block.width,blockHeight:r.block.height,bytesPerBlock:r.block.bytes}:{blockWidth:1,blockHeight:1,bytesPerBlock:pl(e,t)}}function ea(e){return(e&e-1)===0}function Ud(e,t,r,n){if(!Or(e))return ea(t)&&ea(r);const s=hr(n);return s.colorRenderable&&s.textureFilterable}function os(e){return hr(e).textureFilterable}function bl(e,t,r){return ir(t)?gn(t):r||$}function Qr(e,t,r,n,s){if(s%1!==0)throw new Error("can't guess dimensions");if(!r&&!n){const o=Math.sqrt(s/(t===Ge?6:1));o%1===0?(r=o,n=o):(r=s,n=1)}else if(n){if(!r&&(r=s/n,r%1))throw new Error("can't guess dimensions")}else if(n=s/r,n%1)throw new Error("can't guess dimensions");return{width:r,height:n}}function ot(e,t,r){let n,s,o;t.colorspaceConversion!==void 0&&(n=e.getParameter(en),e.pixelStorei(en,t.colorspaceConversion)),t.premultiplyAlpha!==void 0&&(s=e.getParameter(tn),e.pixelStorei(tn,t.premultiplyAlpha)),t.flipY!==void 0&&(o=e.getParameter(rn),e.pixelStorei(rn,t.flipY)),r(),n!==void 0&&e.pixelStorei(en,n),s!==void 0&&e.pixelStorei(tn,s),o!==void 0&&e.pixelStorei(rn,o)}function is(e,t,r,n){const s=t[r];return{[r]:s===void 0?e.getParameter(n):s}}function so(e,t){return{...t,...is(e,t,"flipY",rn),...is(e,t,"premultiplyAlpha",tn),...is(e,t,"colorspaceConversion",en)}}function El(e){e.pixelStorei(no,4),Or(e)&&(e.pixelStorei(dl,0),e.pixelStorei(hl,0),e.pixelStorei(ml,0),e.pixelStorei(_l,0),e.pixelStorei(vl,0))}function Od(e,t,r,n){n.minMag&&(r.call(e,t,ln,n.minMag),r.call(e,t,un,n.minMag)),n.min&&r.call(e,t,ln,n.min),n.mag&&r.call(e,t,un,n.mag),n.wrap&&(r.call(e,t,cn,n.wrap),r.call(e,t,fn,n.wrap),(t===ht||bf(e,t))&&r.call(e,t,Xo,n.wrap)),n.wrapR&&r.call(e,t,Xo,n.wrapR),n.wrapS&&r.call(e,t,cn,n.wrapS),n.wrapT&&r.call(e,t,fn,n.wrapT),n.minLod!==void 0&&r.call(e,t,w0,n.minLod),n.maxLod!==void 0&&r.call(e,t,P0,n.maxLod),n.baseLevel!==void 0&&r.call(e,t,C0,n.baseLevel),n.maxLevel!==void 0&&r.call(e,t,B0,n.maxLevel),n.compareFunc!==void 0&&r.call(e,t,D0,n.compareFunc),n.compareMode!==void 0&&r.call(e,t,I0,n.compareMode)}function yl(e,t,r){const n=r.target||ke;e.bindTexture(n,t),Od(e,n,e.texParameteri,r)}function Vd(e){return e=e||dt.textureColor,ir(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function gl(e,t,{options:r,width:n,height:s,internalFormat:o,lastMipLevelUploaded:a}){r=r||dt.textureOptions,o=o||q;const i=r.target||ke;if(n=n||r.width,s=s||r.height,e.bindTexture(i,t),a>1){const l=Math.max(1,n>>a),u=Math.max(1,s>>a),f=l===1&&u===1,h=os(o)?rs:ts,c=os(o)?f?g0:rs:ts;e.texParameteri(i,un,h),e.texParameteri(i,ln,c)}else if(Ud(e,n,s,o))e.generateMipmap(i);else{const l=os(o)?rs:ts;e.texParameteri(i,ln,l),e.texParameteri(i,un,l),e.texParameteri(i,cn,an),e.texParameteri(i,fn,an)}}function ta(e,t,r,n,s,o){gl(e,t,{options:r,width:n,height:s,internalFormat:o})}function Gr(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function Es(e,t){return t=t||{},t.cubeFaceOrder||[wn,R0,S0,T0,A0,F0]}function ys(e,t){const n=Es(e,t).map(function(s,o){return{face:s,ndx:o}});return n.sort(function(s,o){return s.face-o.face}),n}function Rl(e,t,r,n){n=n||dt.textureOptions;const s=n.target||ke,o=n.level||0;let a=r.width,i=r.height;const l=n.internalFormat||n.format||q,u=mr(l),f=n.format||u.format,h=n.type||u.type;if(e.bindTexture(s,t),s===Ge){const c=r.width,d=r.height;let m,_;if(c/6===d)m=d,_=[0,0,1,0,2,0,3,0,4,0,5,0];else if(d/6===c)m=c,_=[0,0,0,1,0,2,0,3,0,4,0,5];else if(c/3===d/2)m=c/3,_=[0,0,1,0,2,0,0,1,1,1,2,1];else if(c/2===d/3)m=c/2,_=[0,0,1,0,0,1,1,1,0,2,1,2];else throw new Error(`can't figure out cube map from element: ${r.src?r.src:r.nodeName}`);const v=fl();v?(v.canvas.width=m,v.canvas.height=m,a=m,i=m,ot(e,n,()=>{ys(e,n).forEach(function(b){const E=_[b.ndx*2+0]*m,y=_[b.ndx*2+1]*m;v.drawImage(r,E,y,m,m,0,0,m,m),e.texImage2D(b.face,o,l,f,h,v.canvas)}),v.canvas.width=1,v.canvas.height=1})):typeof createImageBitmap<"u"&&(a=m,i=m,ys(e,n).forEach(function(b){const E=_[b.ndx*2+0]*m,y=_[b.ndx*2+1]*m;e.texImage2D(b.face,o,l,m,m,0,f,h,null),createImageBitmap(r,E,y,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(g){ot(e,n,()=>{e.bindTexture(s,t),e.texImage2D(b.face,o,l,f,h,g),Gr(n)&&ta(e,t,n,a,i,l)})})}))}else s===ht||s===ft?ot(e,n,()=>{const c=Math.min(r.width,r.height),d=Math.max(r.width,r.height),m=d/c;if(m%1!==0)throw new Error("can not compute 3D dimensions of element");const _=r.width===d?1:0,v=r.height===d?1:0;e.pixelStorei(no,1),e.pixelStorei(dl,r.width),e.pixelStorei(hl,0),e.pixelStorei(vl,0),e.texImage3D(s,o,l,c,c,c,0,f,h,null);for(let b=0;b<m;++b){const E=b*c*_,y=b*c*v;e.pixelStorei(ml,E),e.pixelStorei(_l,y),e.texSubImage3D(s,o,0,0,b,c,c,1,f,h,r)}El(e)}):ot(e,n,()=>{e.texImage2D(s,o,l,f,h,r)});Gr(n)&&ta(e,t,n,a,i,l),yl(e,t,n)}function Vr(){}function zd(e){if(typeof document<"u"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function Hd(e,t){return t===void 0&&!zd(e)?"anonymous":t}function $d(e,t,r){r=r||Vr;let n;if(t=t!==void 0?t:dt.crossOrigin,t=Hd(e,t),typeof Image<"u"){n=new Image,t!==void 0&&(n.crossOrigin=t);const s=function(){n.removeEventListener("error",o),n.removeEventListener("load",a),n=null},o=function(){const l="couldn't load image: "+e;Wa(l),r(l,n),s()},a=function(){r(null,n),s()};return n.addEventListener("error",o),n.addEventListener("load",a),n.src=e,n}else if(typeof ImageBitmap<"u"){let s,o;const a=function(){r(s,o)},i={};t&&(i.mode="cors"),fetch(e,i).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){o=l,setTimeout(a)}).catch(function(l){s=l,setTimeout(a)}),n=null}return n}function Sl(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function oo(e,t,r){return Sl(e)?(setTimeout(function(){r(null,e)}),e):$d(e,t,r)}function io(e,t,r){r=r||dt.textureOptions;const n=r.target||ke;if(e.bindTexture(n,t),r.color===!1)return;const s=Vd(r.color);if(n===Ge)for(let o=0;o<6;++o)e.texImage2D(wn+o,0,q,1,1,0,q,$,s);else n===ht||n===ft?e.texImage3D(n,0,q,1,1,1,0,q,$,s):e.texImage2D(n,0,q,1,1,0,q,$,s)}function Xd(e,t,r,n){return n=n||Vr,r=r||dt.textureOptions,io(e,t,r),r=so(e,r),oo(r.src,r.crossOrigin,function(o,a){o?n(o,t,a):(Rl(e,t,a,r),n(null,t,a))})}function qd(e,t,r,n){n=n||Vr;const s=r.src;if(s.length!==6)throw new Error("there must be 6 urls for a cubemap");const o=r.level||0,a=r.internalFormat||r.format||q,i=mr(a),l=r.format||i.format,u=r.type||$,f=r.target||ke;if(f!==Ge)throw new Error("target must be TEXTURE_CUBE_MAP");io(e,t,r),r=so(e,r);let h=6;const c=[],d=Es(e,r);let m;function _(v){return function(b,E){--h,b?c.push(b):E.width!==E.height?c.push("cubemap face img is not a square: "+E.src):ot(e,r,()=>{e.bindTexture(f,t),h===5?Es().forEach(function(y){e.texImage2D(y,o,a,l,u,E)}):e.texImage2D(v,o,a,l,u,E),Gr(r)&&e.generateMipmap(f)}),h===0&&n(c.length?c:void 0,t,m)}}m=s.map(function(v,b){return oo(v,r.crossOrigin,_(d[b]))})}function Kd(e,t,r,n){n=n||Vr;const s=r.src,o=r.internalFormat||r.format||q,a=mr(o),i=r.format||a.format,l=r.type||$,u=r.target||ft;if(u!==ht&&u!==ft)throw new Error("target must be TEXTURE_3D or TEXTURE_2D_ARRAY");io(e,t,r),r=so(e,r);let f=s.length;const h=[];let c;const d=r.level||0;let m=r.width,_=r.height;const v=s.length;let b=!0;function E(y){return function(g,x){--f,g?h.push(g):ot(e,r,()=>{if(e.bindTexture(u,t),b){b=!1,m=r.width||x.width,_=r.height||x.height,e.texImage3D(u,d,o,m,_,v,0,i,l,null);for(let S=0;S<v;++S)e.texSubImage3D(u,d,0,0,S,m,_,1,i,l,x)}else{let S=x,F;(x.width!==m||x.height!==_)&&(F=fl(),S=F.canvas,F.canvas.width=m,F.canvas.height=_,F.drawImage(x,0,0,m,_)),e.texSubImage3D(u,d,0,0,y,m,_,1,i,l,S),F&&S===F.canvas&&(F.canvas.width=0,F.canvas.height=0)}Gr(r)&&e.generateMipmap(u)}),f===0&&n(h.length?h:void 0,t,c)}}c=s.map(function(y,g){return oo(y,r.crossOrigin,E(g))})}function Yd(e,t,r,n){n=n||dt.textureOptions;const s=n.target||ke;e.bindTexture(s,t);const o=n.level||0,a=n.internalFormat||n.format||q,i=mr(a),l=n.format||i.format,u=n.type||bl(e,r,i.type);if(ir(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{const _=Ya(u);r=new _(r)}const{width:f,height:h,depth:c}=Wd(s,r,n,a,l,u),d=xl(a);El(e),e.pixelStorei(no,n.unpackAlignment||1);let m=0;return ot(e,n,()=>{let _=0;const{blockWidth:v,blockHeight:b,bytesPerBlock:E}=Ld(a,u);for(;_<r.byteLength;){const y=Math.max(1,f>>m),g=Math.max(1,h>>m),x=s===ke?Math.max(1,c>>m):c,S=Math.ceil(y/v),F=Math.ceil(g/b),P=s===Ge?6:1,A=S*F*E*x*P;if(_+A>r.byteLength)throw new Error("src size does not match number of mip levels");const C=r.subarray(_/r.BYTES_PER_ELEMENT,(_+A)/r.BYTES_PER_ELEMENT),k=o+m;if(s===Ge){const ne=C.length/6;ys(e,n).forEach(j=>{const de=ne*j.ndx,pe=C.subarray(de,de+ne);d?e.compressedTexImage2D(j.face,k,a,y,g,0,pe):e.texImage2D(j.face,k,a,y,g,0,l,u,pe)})}else s===ht||s===ft?e.texImage3D(s,k,a,y,g,x,0,l,u,C):d?e.compressedTexImage2D(s,k,a,y,g,0,C):e.texImage2D(s,k,a,y,g,0,l,u,C);if(++m,_+=A,y===1&&g===1&&x===1&&_!==r.byteLength)throw new Error("src size has more data than can fit in mip levels")}}),{width:f,height:h,depth:c,type:u,lastMipLevelUploaded:o+m-1}}function Wd(e,t,r,n,s,o){let a=r.width,i=r.height,l=r.depth;const u=xl(n);if(u){if(!a||!i)throw new Error("compressed texture needs to set width and height!");l=l||1}else{const f=pl(n,o),h=t.byteLength/f;if(h%1)throw new Error(`length wrong size for format: ${cl(Ar,s)}`);if(u&&(!a||!i))throw new Error("compressed texture needs to set width and height!");let c;if(e===ht||e===ft)if(!a&&!i&&!l){const d=Math.cbrt(h);if(d%1!==0)throw new Error(`can't guess cube size of array of numElements: ${h}`);a=d,i=d,l=d}else a&&(!i||!l)?(c=Qr(Ar,e,i,l,h/a),i=c.width,l=c.height):i&&(!a||!l)?(c=Qr(Ar,e,a,l,h/i),a=c.width,l=c.height):(c=Qr(Ar,e,a,i,h/l),a=c.width,i=c.height);else c=Qr(Ar,e,a,i,h),a=c.width,i=c.height}return{width:a,height:i,depth:l}}function jd(e,t,r){const n=r.target||ke;e.bindTexture(n,t);const s=r.level||0,o=r.internalFormat||r.format||q,a=mr(o),i=r.format||a.format,l=r.type||a.type;ot(e,r,()=>{if(n===Ge)for(let u=0;u<6;++u)e.texImage2D(wn+u,s,o,r.width,r.height,0,i,l,null);else n===ht||n===ft?e.texImage3D(n,s,o,r.width,r.height,r.depth,0,i,l,null):e.texImage2D(n,s,o,r.width,r.height,0,i,l,null)})}function Tl(e,t,r){r=r||Vr,t=t||dt.textureOptions;const n=e.createTexture(),s=t.target||ke;let o=t.width||1,a=t.height||1,i=0;const l=t.internalFormat||q;e.bindTexture(s,n),s===Ge&&(e.texParameteri(s,cn,an),e.texParameteri(s,fn,an));let u=t.src;if(u)if(typeof u=="function"&&(u=u(e,t)),typeof u=="string")Xd(e,n,t,r);else if(ir(u)||Array.isArray(u)&&(typeof u[0]=="number"||Array.isArray(u[0])||ir(u[0]))){const f=Yd(e,n,u,t);o=f.width,a=f.height,i=f.lastMipLevelUploaded}else Array.isArray(u)&&(typeof u[0]=="string"||Sl(u[0]))?s===Ge?qd(e,n,t,r):Kd(e,n,t,r):(Rl(e,n,u,t),o=u.width,a=u.height);else jd(e,n,t);return Gr(t)&&gl(e,n,{options:t,width:o,height:a,internalFormat:l,lastMipLevelUploaded:i}),yl(e,n,t),n}function Al(e,t,r,n,s,o){n=n||r.width,s=s||r.height,o=o||r.depth;const a=r.target||ke;e.bindTexture(a,t);const i=r.level||0,l=r.internalFormat||r.format||q,u=mr(l),f=r.format||u.format;let h;const c=r.src;if(c&&(ir(c)||Array.isArray(c)&&typeof c[0]=="number")?h=r.type||bl(e,c,u.type):h=r.type||u.type,a===Ge)for(let d=0;d<6;++d)e.texImage2D(wn+d,i,l,n,s,0,f,h,null);else a===ht||a===ft?e.texImage3D(a,i,l,n,s,o,0,f,h,null):e.texImage2D(a,i,l,n,s,0,f,h,null)}const ao=Wa;function Fl(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const dn=33984,Pn=34962,Qd=34963,Zd=35713,Jd=35714,eh=35632,th=35633,rh=35981,wl=35718,nh=35721,sh=35971,oh=35382,ih=35396,ah=35398,lh=35392,uh=35395,Cn=5126,Pl=35664,Cl=35665,Bl=35666,lo=5124,Il=35667,Dl=35668,Ml=35669,Nl=35670,kl=35671,Gl=35672,Ll=35673,Ul=35674,Ol=35675,Vl=35676,ch=35678,fh=35680,dh=35679,hh=35682,mh=35685,_h=35686,vh=35687,ph=35688,xh=35689,bh=35690,Eh=36289,yh=36292,gh=36293,uo=5125,zl=36294,Hl=36295,$l=36296,Rh=36298,Sh=36299,Th=36300,Ah=36303,Fh=36306,wh=36307,Ph=36308,Ch=36311,Bn=3553,In=34067,co=32879,Dn=35866,B={};function Xl(e,t){return B[t].bindPoint}function Bh(e,t){return function(r){e.uniform1f(t,r)}}function Ih(e,t){return function(r){e.uniform1fv(t,r)}}function Dh(e,t){return function(r){e.uniform2fv(t,r)}}function Mh(e,t){return function(r){e.uniform3fv(t,r)}}function Nh(e,t){return function(r){e.uniform4fv(t,r)}}function ql(e,t){return function(r){e.uniform1i(t,r)}}function Kl(e,t){return function(r){e.uniform1iv(t,r)}}function Yl(e,t){return function(r){e.uniform2iv(t,r)}}function Wl(e,t){return function(r){e.uniform3iv(t,r)}}function jl(e,t){return function(r){e.uniform4iv(t,r)}}function kh(e,t){return function(r){e.uniform1ui(t,r)}}function Gh(e,t){return function(r){e.uniform1uiv(t,r)}}function Lh(e,t){return function(r){e.uniform2uiv(t,r)}}function Uh(e,t){return function(r){e.uniform3uiv(t,r)}}function Oh(e,t){return function(r){e.uniform4uiv(t,r)}}function Vh(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}function zh(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}function Hh(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}function $h(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}function Xh(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}function qh(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}function Kh(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}function Yh(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}function Wh(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}function oe(e,t,r,n){const s=Xl(e,t);return Or(e)?function(o){let a,i;!o||Sn(e,o)?(a=o,i=null):(a=o.texture,i=o.sampler),e.uniform1i(n,r),e.activeTexture(dn+r),e.bindTexture(s,a),e.bindSampler(r,i)}:function(o){e.uniform1i(n,r),e.activeTexture(dn+r),e.bindTexture(s,o)}}function ie(e,t,r,n,s){const o=Xl(e,t),a=new Int32Array(s);for(let i=0;i<s;++i)a[i]=r+i;return Or(e)?function(i){e.uniform1iv(n,a),i.forEach(function(l,u){e.activeTexture(dn+a[u]);let f,h;!l||Sn(e,l)?(f=l,h=null):(f=l.texture,h=l.sampler),e.bindSampler(r,h),e.bindTexture(o,f)})}:function(i){e.uniform1iv(n,a),i.forEach(function(l,u){e.activeTexture(dn+a[u]),e.bindTexture(o,l)})}}B[Cn]={Type:Float32Array,size:4,setter:Bh,arraySetter:Ih};B[Pl]={Type:Float32Array,size:8,setter:Dh,cols:2};B[Cl]={Type:Float32Array,size:12,setter:Mh,cols:3};B[Bl]={Type:Float32Array,size:16,setter:Nh,cols:4};B[lo]={Type:Int32Array,size:4,setter:ql,arraySetter:Kl};B[Il]={Type:Int32Array,size:8,setter:Yl,cols:2};B[Dl]={Type:Int32Array,size:12,setter:Wl,cols:3};B[Ml]={Type:Int32Array,size:16,setter:jl,cols:4};B[uo]={Type:Uint32Array,size:4,setter:kh,arraySetter:Gh};B[zl]={Type:Uint32Array,size:8,setter:Lh,cols:2};B[Hl]={Type:Uint32Array,size:12,setter:Uh,cols:3};B[$l]={Type:Uint32Array,size:16,setter:Oh,cols:4};B[Nl]={Type:Uint32Array,size:4,setter:ql,arraySetter:Kl};B[kl]={Type:Uint32Array,size:8,setter:Yl,cols:2};B[Gl]={Type:Uint32Array,size:12,setter:Wl,cols:3};B[Ll]={Type:Uint32Array,size:16,setter:jl,cols:4};B[Ul]={Type:Float32Array,size:32,setter:Vh,rows:2,cols:2};B[Ol]={Type:Float32Array,size:48,setter:zh,rows:3,cols:3};B[Vl]={Type:Float32Array,size:64,setter:Hh,rows:4,cols:4};B[mh]={Type:Float32Array,size:32,setter:$h,rows:2,cols:3};B[_h]={Type:Float32Array,size:32,setter:qh,rows:2,cols:4};B[vh]={Type:Float32Array,size:48,setter:Xh,rows:3,cols:2};B[ph]={Type:Float32Array,size:48,setter:Yh,rows:3,cols:4};B[xh]={Type:Float32Array,size:64,setter:Kh,rows:4,cols:2};B[bh]={Type:Float32Array,size:64,setter:Wh,rows:4,cols:3};B[ch]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:Bn};B[fh]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:In};B[dh]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:co};B[hh]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:Bn};B[Eh]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:Dn};B[yh]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:Dn};B[gh]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:In};B[Rh]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:Bn};B[Sh]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:co};B[Th]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:In};B[Ah]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:Dn};B[Fh]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:Bn};B[wh]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:co};B[Ph]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:In};B[Ch]={Type:null,size:0,setter:oe,arraySetter:ie,bindPoint:Dn};function Mn(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Pn,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||Cn,r.normalize||!1,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function mt(e,t){return function(r){if(r.value)if(e.disableVertexAttribArray(t),r.value.length===4)e.vertexAttrib4iv(t,r.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Pn,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||lo,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function Nn(e,t){return function(r){if(r.value)if(e.disableVertexAttribArray(t),r.value.length===4)e.vertexAttrib4uiv(t,r.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Pn,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||uo,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function fo(e,t,r){const n=r.size,s=r.count;return function(o){e.bindBuffer(Pn,o.buffer);const a=o.size||o.numComponents||n,i=a/s,l=o.type||Cn,f=B[l].size*a,h=o.normalize||!1,c=o.offset||0,d=f/s;for(let m=0;m<s;++m)e.enableVertexAttribArray(t+m),e.vertexAttribPointer(t+m,i,l,h,f,c+d*m),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+m,o.divisor||0)}}const Y={};Y[Cn]={size:4,setter:Mn};Y[Pl]={size:8,setter:Mn};Y[Cl]={size:12,setter:Mn};Y[Bl]={size:16,setter:Mn};Y[lo]={size:4,setter:mt};Y[Il]={size:8,setter:mt};Y[Dl]={size:12,setter:mt};Y[Ml]={size:16,setter:mt};Y[uo]={size:4,setter:Nn};Y[zl]={size:8,setter:Nn};Y[Hl]={size:12,setter:Nn};Y[$l]={size:16,setter:Nn};Y[Nl]={size:4,setter:mt};Y[kl]={size:8,setter:mt};Y[Gl]={size:12,setter:mt};Y[Ll]={size:16,setter:mt};Y[Ul]={size:4,setter:fo,count:2};Y[Ol]={size:9,setter:fo,count:3};Y[Vl]={size:16,setter:fo,count:4};const jh=/ERROR:\s*\d+:(\d+)/gi;function Qh(e,t="",r=0){const n=[...t.matchAll(jh)],s=new Map(n.map((o,a)=>{const i=parseInt(o[1]),l=n[a+1],u=l?l.index:t.length,f=t.substring(o.index,u);return[i-1,f]}));return e.split(`
`).map((o,a)=>{const i=s.get(a);return`${a+1+r}: ${o}${i?`

^^^ ${i}`:""}`}).join(`
`)}const ra=/^[ \t]*\n/;function Ql(e){let t=0;return ra.test(e)&&(t=1,e=e.replace(ra,"")),{lineOffset:t,shaderSource:e}}function Zh(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function Jh(e,t,r,n){if(n=n||ao,!e.getShaderParameter(r,Zd)){const o=e.getShaderInfoLog(r),{lineOffset:a,shaderSource:i}=Ql(e.getShaderSource(r)),l=`${Qh(i,o,a)}
Error compiling ${cl(e,t)}: ${o}`;return n(l),l}return""}function ho(e,t,r){let n,s,o;if(typeof t=="function"&&(r=t,t=void 0),typeof e=="function")r=e,e=void 0;else if(e&&!Array.isArray(e)){const u=e;r=u.errorCallback,e=u.attribLocations,n=u.transformFeedbackVaryings,s=u.transformFeedbackMode,o=u.callback}const a=r||ao,i=[],l={errorCallback(u,...f){i.push(u),a(u,...f)},transformFeedbackVaryings:n,transformFeedbackMode:s,callback:o,errors:i};{let u={};Array.isArray(e)?e.forEach(function(f,h){u[f]=t?t[h]:h}):u=e||{},l.attribLocations=u}return l}const em=["VERTEX_SHADER","FRAGMENT_SHADER"];function tm(e,t){if(t.indexOf("frag")>=0)return eh;if(t.indexOf("vert")>=0)return th}function rm(e,t,r){const n=e.getAttachedShaders(t);for(const s of n)r.has(s)||e.deleteShader(s);e.deleteProgram(t)}const nm=(e=0)=>new Promise(t=>setTimeout(t,e));function sm(e,t,r){const n=e.createProgram(),{attribLocations:s,transformFeedbackVaryings:o,transformFeedbackMode:a}=ho(r);for(let i=0;i<t.length;++i){let l=t[i];if(typeof l=="string"){const u=Fl(l),f=u?u.text:l;let h=e[em[i]];u&&u.type&&(h=tm(e,u.type)||h),l=e.createShader(h),e.shaderSource(l,Ql(f).shaderSource),e.compileShader(l)}e.attachShader(n,l)}Object.entries(s).forEach(([i,l])=>e.bindAttribLocation(n,l,i));{let i=o;i&&(i.attribs&&(i=i.attribs),Array.isArray(i)||(i=Object.keys(i)),e.transformFeedbackVaryings(n,i,a||rh))}return e.linkProgram(n),n}function om(e,t,r,n,s){const o=ho(r,n,s),a=new Set(t),i=sm(e,t,o);function l(u,f){const h=am(u,f,o.errorCallback);return h&&rm(u,f,a),h}if(o.callback){im(e,i).then(()=>{const u=l(e,i);o.callback(u,u?void 0:i)});return}return l(e,i)?void 0:i}async function im(e,t){const r=e.getExtension("KHR_parallel_shader_compile"),n=r?(o,a)=>o.getProgramParameter(a,r.COMPLETION_STATUS_KHR):()=>!0;let s=0;do await nm(s),s=1e3/60;while(!n(e,t))}function am(e,t,r){if(r=r||ao,!e.getProgramParameter(t,Jd)){const s=e.getProgramInfoLog(t);r(`Error in program linking: ${s}`);const a=e.getAttachedShaders(t).map(i=>Jh(e,e.getShaderParameter(i,e.SHADER_TYPE),i,r));return`${s}
${a.filter(i=>i).join(`
`)}`}}function lm(e,t,r,n,s){return om(e,t,r,n,s)}function Zl(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const um=/(\.|\[|]|\w+)/g,cm=e=>e>="0"&&e<="9";function fm(e,t,r,n){const s=e.split(um).filter(i=>i!=="");let o=0,a="";for(;;){const i=s[o++];a+=i;const l=cm(i[0]),u=l?parseInt(i):i;if(l&&(a+=s[o++]),o===s.length){r[u]=t;break}else{const h=s[o++],c=h==="[",d=r[u]||(c?[]:{});r[u]=d,r=d,n[a]=n[a]||(function(m){return function(_){Jl(m,_)}})(d),a+=h}}}function dm(e,t){let r=0;function n(i,l,u){const f=l.name.endsWith("[0]"),h=l.type,c=B[h];if(!c)throw new Error(`unknown type: 0x${h.toString(16)}`);let d;if(c.bindPoint){const m=r;r+=l.size,f?d=c.arraySetter(e,h,m,u,l.size):d=c.setter(e,h,m,u,l.size)}else c.arraySetter&&f?d=c.arraySetter(e,u):d=c.setter(e,u);return d.location=u,d}const s={},o={},a=e.getProgramParameter(t,wl);for(let i=0;i<a;++i){const l=e.getActiveUniform(t,i);if(Zl(l))continue;let u=l.name;u.endsWith("[0]")&&(u=u.substr(0,u.length-3));const f=e.getUniformLocation(t,l.name);if(f){const h=n(t,l,f);s[u]=h,fm(u,h,o,s)}}return s}function hm(e,t){const r={},n=e.getProgramParameter(t,sh);for(let s=0;s<n;++s){const o=e.getTransformFeedbackVarying(t,s);r[o.name]={index:s,type:o.type,size:o.size}}return r}function mm(e,t){const r=e.getProgramParameter(t,wl),n=[],s=[];for(let i=0;i<r;++i){s.push(i),n.push({});const l=e.getActiveUniform(t,i);n[i].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(i){const l=i[0],u=i[1];e.getActiveUniforms(t,s,e[l]).forEach(function(f,h){n[h][u]=f})});const o={},a=e.getProgramParameter(t,oh);for(let i=0;i<a;++i){const l=e.getActiveUniformBlockName(t,i),u={index:e.getUniformBlockIndex(t,l),usedByVertexShader:e.getActiveUniformBlockParameter(t,i,ih),usedByFragmentShader:e.getActiveUniformBlockParameter(t,i,ah),size:e.getActiveUniformBlockParameter(t,i,lh),uniformIndices:e.getActiveUniformBlockParameter(t,i,uh)};u.used=u.usedByVertexShader||u.usedByFragmentShader,o[l]=u}return{blockSpecs:o,uniformData:n}}function Jl(e,t){for(const r in t){const n=e[r];typeof n=="function"?n(t[r]):Jl(e[r],t[r])}}function eu(e,...t){const r=e.uniformSetters||e,n=t.length;for(let s=0;s<n;++s){const o=t[s];if(Array.isArray(o)){const a=o.length;for(let i=0;i<a;++i)eu(r,o[i])}else for(const a in o){const i=r[a];i&&i(o[a])}}}function _m(e,t){const r={},n=e.getProgramParameter(t,nh);for(let s=0;s<n;++s){const o=e.getActiveAttrib(t,s);if(Zl(o))continue;const a=e.getAttribLocation(t,o.name),i=Y[o.type],l=i.setter(e,a,i);l.location=a,r[o.name]=l}return r}function vm(e,t){for(const r in t){const n=e[r];n&&n(t[r])}}function pm(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(vm(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(Qd,r.indices))}function na(e,t){const r=dm(e,t),n=_m(e,t),s={program:t,uniformSetters:r,attribSetters:n,uniformLocations:Object.fromEntries(Object.entries(r).map(([o,a])=>[o,a.location])),attribLocations:Object.fromEntries(Object.entries(n).map(([o,a])=>[o,a.location]))};return Or(e)&&(s.uniformBlockSpec=mm(e,t),s.transformFeedbackInfo=hm(e,t)),s}const xm=/\s|{|}|;/;function bm(e,t,r,n,s){const o=ho(r,n,s),a=[];if(t=t.map(function(u){if(!xm.test(u)){const f=Fl(u);if(f)u=f.text;else{const h=`no element with id: ${u}`;o.errorCallback(h),a.push(h)}}return u}),a.length)return Zh(o,"");const i=o.callback;i&&(o.callback=(u,f)=>{i(u,u?void 0:na(e,f))});const l=lm(e,t,o);return l?na(e,l):null}const Em=4,sa=5123;function ym(e,t,r,n,s,o){r=r===void 0?Em:r;const a=t.indices,i=t.elementType,l=n===void 0?t.numElements:n;s=s===void 0?0:s,i||a?o!==void 0?e.drawElementsInstanced(r,l,i===void 0?sa:t.elementType,s,o):e.drawElements(r,l,i===void 0?sa:t.elementType,s):o!==void 0?e.drawArraysInstanced(r,s,l,o):e.drawArrays(r,s,l)}const tu=36160,gt=36161,gm=3553,Rm=5121,Sm=6402,Tm=6408,Am=33190,Fm=36012,wm=35056,Pm=36013,Cm=32854,Bm=32855,Im=36194,ru=33189,nu=6401,su=36168,mo=34041,gs=36064,kn=36096,ou=36128,_o=33306,Rs=33071,Ss=9729,iu=[{format:Tm,type:Rm,min:Ss,wrap:Rs},{format:mo}],Pe={};Pe[mo]=_o;Pe[nu]=ou;Pe[su]=ou;Pe[Sm]=kn;Pe[ru]=kn;Pe[Am]=kn;Pe[Fm]=kn;Pe[wm]=_o;Pe[Pm]=_o;function Dm(e,t){return Pe[e]||Pe[t]}const _t={};_t[Cm]=!0;_t[Bm]=!0;_t[Im]=!0;_t[mo]=!0;_t[ru]=!0;_t[nu]=!0;_t[su]=!0;function Mm(e){return _t[e]}const Nm=32;function km(e){return e>=gs&&e<gs+Nm}function Gm(e,t,r,n){const s=tu,o=e.createFramebuffer();e.bindFramebuffer(s,o),r=r||e.drawingBufferWidth,n=n||e.drawingBufferHeight,t=t||iu;const a=[],i={framebuffer:o,attachments:[],width:r,height:n};return t.forEach(function(l,u){let f=l.attachment;const h=l.samples,c=l.format;let d=l.attachmentPoint||Dm(c,l.internalFormat);if(d||(d=gs+u),km(d)&&a.push(d),!f)if(h!==void 0||Mm(c))f=e.createRenderbuffer(),e.bindRenderbuffer(gt,f),h>1?e.renderbufferStorageMultisample(gt,h,c,r,n):e.renderbufferStorage(gt,c,r,n);else{const m=Object.assign({},l);m.width=r,m.height=n,m.auto===void 0&&(m.auto=!1,m.min=m.min||m.minMag||Ss,m.mag=m.mag||m.minMag||Ss,m.wrapS=m.wrapS||m.wrap||Rs,m.wrapT=m.wrapT||m.wrap||Rs),f=Tl(e,m)}if(ja(e,f))e.framebufferRenderbuffer(s,d,gt,f);else if(Sn(e,f))l.layer!==void 0?e.framebufferTextureLayer(s,d,f,l.level||0,l.layer):e.framebufferTexture2D(s,d,l.target||gm,f,l.level||0);else throw new Error("unknown attachment type");i.attachments.push(f)}),e.drawBuffers&&e.drawBuffers(a),i}function Lm(e,t,r,n,s){n=n||e.drawingBufferWidth,s=s||e.drawingBufferHeight,t.width=n,t.height=s,r=r||iu,r.forEach(function(o,a){const i=t.attachments[a],l=o.format,u=o.samples;if(u!==void 0||ja(e,i))e.bindRenderbuffer(gt,i),u>1?e.renderbufferStorageMultisample(gt,u,l,n,s):e.renderbufferStorage(gt,l,n,s);else if(Sn(e,i))Al(e,i,o,n,s);else throw new Error("unknown attachment type")})}function oa(e,t,r){r=r||tu,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}class le{constructor(t,r,n,s){this.gl=t,this.internalFormat=r,this.format=n,this.texture=Tl(t,{width:t.canvas.width,height:t.canvas.height,internalFormat:r,format:n,type:t.UNSIGNED_BYTE,minMag:s,wrap:t.CLAMP_TO_EDGE}),this.framebufferInfo=Gm(t,[{attachment:this.texture}],t.canvas.width,t.canvas.height)}framebufferInfo;texture;get isRGBA8(){return this.internalFormat===this.gl.RGBA8&&this.format===this.gl.RGBA}get isR8(){return this.internalFormat===this.gl.R8&&this.format===this.gl.RED}static createRGBA8(t,r=t.LINEAR){return new le(t,t.RGBA8,t.RGBA,r)}static createR8(t,r=t.LINEAR){return new le(t,t.R8,t.RED,r)}resize(t,r){Al(this.gl,this.texture,{width:t,height:r}),Lm(this.gl,this.framebufferInfo,[{attachment:this.texture}],t,r)}}class Um{constructor(t){this.gl=t,this.bitmapRenderTarget=le.createRGBA8(t)}passes=[];bitmapRenderTarget;addPass(t){this.passes.push(t)}applyBitmap(t,r){this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r)}resize(t,r){this.gl.canvas.width=t,this.gl.canvas.height=r,this.bitmapRenderTarget.resize(t,r)}async render(t){(this.gl.canvas.width!==t.width||this.gl.canvas.height!==t.height)&&this.resize(t.width,t.height),this.applyBitmap(this.bitmapRenderTarget.texture,t);const r=this.passes.filter(o=>o.enabled);if(r.length===0)throw new Error("No passes in pipeline");let n=this.bitmapRenderTarget;for(let o=0;o<r.length-1;o++)n=r[o].apply(n);r[r.length-1].applyToScreen(n)}}const Om=`#version 300 es

in vec2 position;
in vec2 texcoord;

out vec2 v_uv;

void main() {
  v_uv = texcoord;
  gl_Position = vec4(position, 0.0, 1.0);
}`;class _r{constructor(t,r){this.gl=t,this.settings=r,this.quadBufferInfo=y0.createXYQuadBufferInfo(t)}get enabled(){return this.settings.enabled}set enabled(t){this.settings.enabled=t}quadBufferInfo;apply(t){return this.applyInternal(t,!1)}applyToScreen(t){this.applyInternal(t,!0)}executeProgram(t,r,n,s=!1){this.settings.input=r.texture,t.uniformSetters.u_texelSize&&this.settings.setTextelSize(r.framebufferInfo.width,r.framebufferInfo.height),n&&!s&&(n.framebufferInfo.width!==this.gl.canvas.width||n.framebufferInfo.height!==this.gl.canvas.height)&&n.resize(this.gl.canvas.width,this.gl.canvas.height);const o=n?n.framebufferInfo.width:this.gl.canvas.width,a=n?n.framebufferInfo.height:this.gl.canvas.height;n?oa(this.gl,n.framebufferInfo):oa(this.gl,null),this.gl.useProgram(t.program),this.gl.viewport(0,0,o,a),pm(this.gl,t,this.quadBufferInfo),eu(t,this.settings.uniforms),ym(this.gl,this.quadBufferInfo)}createProgramInfo(t){return bm(this.gl,[Om,t])}}const Vm=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;        // R8 luma input
uniform vec2      u_texelSize;    // 1 / texture resolution

uniform float u_sigmaSpatial;     // spatial Gaussian sigma
uniform float u_sigmaRange;       // range (luma) Gaussian sigma
uniform int   u_kernelRadius;     // must be <= MAX_KERNEL_RADIUS

out vec4 outColor;

const int MAX_KERNEL_RADIUS = 5;

void main() {

    vec2 uv = v_uv;

    // Center pixel (luma)
    float centerLuma = texture(u_input, uv).r;

    float weightedSum = 0.0;
    float weightTotal = 0.0;

    // Precompute inverse variances
    float invSpatialVar = 1.0 / (2.0 * u_sigmaSpatial * u_sigmaSpatial);
    float invRangeVar   = 1.0 / (2.0 * u_sigmaRange   * u_sigmaRange);

    for (int ky = -MAX_KERNEL_RADIUS; ky <= MAX_KERNEL_RADIUS; ++ky) {
        for (int kx = -MAX_KERNEL_RADIUS; kx <= MAX_KERNEL_RADIUS; ++kx) {

            // Branchless kernel mask
            float maskX = step(float(abs(kx)), float(u_kernelRadius));
            float maskY = step(float(abs(ky)), float(u_kernelRadius));
            float kernelMask = maskX * maskY;

            vec2 offsetTexel =
                vec2(float(kx), float(ky)) * u_texelSize;

            float neighborLuma =
                texture(u_input, uv + offsetTexel).r;

            float spatialDist2 =
                float(kx * kx + ky * ky);

            float rangeDist2 =
                (neighborLuma - centerLuma) *
                (neighborLuma - centerLuma);

            float weightSpatial =
                exp(-spatialDist2 * invSpatialVar);

            float weightRange =
                exp(-rangeDist2 * invRangeVar);

            float kernelWeight =
                weightSpatial * weightRange * kernelMask;

            weightedSum += neighborLuma * kernelWeight;
            weightTotal += kernelWeight;
        }
    }

    float filteredLuma = weightedSum / weightTotal;

    outColor = vec4(filteredLuma,
                    filteredLuma,
                    filteredLuma,
                    1.0);
}
`;class zm extends _r{bilateralProgramInfo;outputRenderTarget;constructor(t,r){super(t,r),this.bilateralProgramInfo=this.createProgramInfo(Vm),this.outputRenderTarget=le.createRGBA8(t)}applyInternal(t,r){if(!t.isR8)throw new Error("BilateralPass only supports R8 render targets");return this.executeProgram(this.bilateralProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class vr{_enabled=!0;get enabled(){return this._enabled}set enabled(t){this._enabled=t}get input(){return this.uniforms.u_input}set input(t){this.uniforms.u_input=t}get textelSize(){return this.uniforms.u_texelSize}setTextelSize(t,r){this.uniforms.u_texelSize=[1/t,1/r]}uniforms={}}class Hm extends vr{get sigmaSpatial(){return this.uniforms.u_sigmaSpatial}set sigmaSpatial(t){this.uniforms.u_sigmaSpatial=t}get sigmaRange(){return this.uniforms.u_sigmaRange}set sigmaRange(t){this.uniforms.u_sigmaRange=t}get kernelRadius(){return this.uniforms.u_kernelRadius}set kernelRadius(t){this.uniforms.u_kernelRadius=t}}const $m=`#version 300 es
precision highp float;

in vec2 v_uv;
uniform sampler2D u_input;

out vec4 outColor;

void main() {
    vec3 color = texture(u_input, v_uv).rgb;

    // Rec.709 luma
    float luma = dot(color, vec3(
        0.2126,  // R
        0.7152,  // G
        0.0722   // B
    ));

    outColor = vec4(luma, luma, luma, 1.0);
}
`;class Xm extends _r{lum709ProgramInfo;outputRenderTarget;constructor(t){super(t,new vr),this.lum709ProgramInfo=this.createProgramInfo($m),this.outputRenderTarget=le.createR8(t)}applyInternal(t,r){if(!t.isRGBA8)throw new Error("Rec709LumPass only supports RGBA8 render targets");return this.executeProgram(this.lum709ProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}const qm=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;
uniform vec2      u_texelSize;

uniform int   u_kernelRadius;     // 1 = 3x3, 2 = 5x5
uniform float u_directionBias;    // -1 vertical, +1 horizontal
uniform float u_edgeGain;
uniform float u_minEdge;

out vec4 outColor;

/* 3x3 Sobel expanded into 5x5 space */
const float d3[5] = float[5](0.0, -1.0, 0.0, 1.0, 0.0);
const float s3[5] = float[5](0.0,  1.0, 2.0, 1.0, 0.0);

/* True 5x5 Sobel */
const float d5[5] = float[5](-2.0, -1.0, 0.0, 1.0, 2.0);
const float s5[5] = float[5]( 1.0,  4.0, 6.0, 4.0, 1.0);

void main() {
    vec2 uv = v_uv;
    vec2 t  = u_texelSize;

    float gradX = 0.0;
    float gradY = 0.0;

    float use5 = step(1.5, float(u_kernelRadius));
    float use3 = 1.0 - use5;

    float kernelNormalization =
    mix(1.0, 1.0 / 12.0, use5);

    for (int y = 0; y < 5; ++y) {
        for (int x = 0; x < 5; ++x) {

            vec2 offset = vec2(float(x - 2), float(y - 2)) * t;
            float luma  = texture(u_input, uv + offset).r;

            float gx =
                d3[x] * s3[y] * use3 +
                d5[x] * s5[y] * use5;

            float gy =
                s3[x] * d3[y] * use3 +
                s5[x] * d5[y] * use5;

            gradX += luma * gx;
            gradY += luma * gy;
        }
    }

    float ax = abs(gradX);
    float ay = abs(gradY);

    float wX = clamp(1.0 - u_directionBias, 0.0, 2.0) * 0.5;
    float wY = clamp(1.0 + u_directionBias, 0.0, 2.0) * 0.5;

    float edge =
        wX * ax +
        wY * ay;

    edge = edge * kernelNormalization;
    edge = max(edge * u_edgeGain - u_minEdge, 0.0);

    outColor = vec4(edge, edge, edge, 1.0);
}
`;class Km extends _r{sobelProgramInfo;outputRenderTarget;constructor(t,r){super(t,r),this.sobelProgramInfo=this.createProgramInfo(qm),this.outputRenderTarget=le.createRGBA8(t)}applyInternal(t,r){if(!t.isR8&&!t.isRGBA8)throw new Error("SobelPass expects R8 or RGBA8 render targets");return this.executeProgram(this.sobelProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class Ym extends vr{get kernelRadius(){return this.uniforms.u_kernelRadius}set kernelRadius(t){this.uniforms.u_kernelRadius=t}get directionBias(){return this.uniforms.u_directionBias}set directionBias(t){this.uniforms.u_directionBias=t}get edgeGain(){return this.uniforms.u_edgeGain}set edgeGain(t){this.uniforms.u_edgeGain=t}get minEdge(){return this.uniforms.u_minEdge}set minEdge(t){this.uniforms.u_minEdge=t}}const Wm=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;   // Sobel magnitude (0..1)
uniform float u_threshold;

out vec4 outColor;

void main() {
    float strength = texture(u_input, v_uv).r;

    // Drop below threshold, preserve magnitude
    float edge = strength * step(u_threshold, strength);

    outColor = vec4(edge, edge, edge, 1.0);
}`;class jm extends _r{programInfo;outputRenderTarget;constructor(t,r){super(t,r),this.programInfo=this.createProgramInfo(Wm),this.outputRenderTarget=le.createRGBA8(t)}applyInternal(t,r){if(!t.isR8&&!t.isRGBA8)throw new Error("MagnatudeGatePass expects R8 or RGBA8 render targets");return this.executeProgram(this.programInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class Qm extends vr{get threshold(){return this.uniforms.u_threshold}set threshold(t){this.uniforms.u_threshold=t}}const Zm=`#version 300 es
precision highp float;

in vec2 v_uv;

/*
  u_input is always bound by the pipeline
  and represents the CURRENT frame.
*/
uniform sampler2D u_input;

uniform sampler2D u_frame1;
uniform sampler2D u_frame2;
uniform sampler2D u_frame3;
uniform sampler2D u_frame4;

out vec4 outColor;

/*
  Exact median of 5 values.
  Deterministic, branchless.
*/
float median5(
    float v0,
    float v1,
    float v2,
    float v3,
    float v4
) {
    float a = min(v0, v1);
    float b = max(v0, v1);
    float c = min(v2, v3);
    float d = max(v2, v3);

    float e = max(a, c);
    float f = min(b, d);

    float g = min(e, f);
    float h = max(e, f);

    return max(min(h, v4), g);
}

void main() {
    float value0 = texture(u_input,  v_uv).r;
    float value1 = texture(u_frame1, v_uv).r;
    float value2 = texture(u_frame2, v_uv).r;
    float value3 = texture(u_frame3, v_uv).r;
    float value4 = texture(u_frame4, v_uv).r;

    float medianValue =
        median5(value0, value1, value2, value3, value4);

    outColor = vec4(medianValue, medianValue, medianValue, 1.0);
}
`;class Jm extends _r{programInfo;outputRenderTarget;history=[];historyWriteIndex=0;historyInitialized=!1;constructor(t,r){super(t,r),this.programInfo=this.createProgramInfo(Zm),this.outputRenderTarget=le.createRGBA8(t),this.history=[le.createRGBA8(t),le.createRGBA8(t),le.createRGBA8(t),le.createRGBA8(t)]}ensureHistorySized(t,r){for(const n of this.history)(n.framebufferInfo.width!==t||n.framebufferInfo.height!==r)&&n.resize(t,r)}copyToHistory(t){const r=this.gl,n=this.history[this.historyWriteIndex];r.bindFramebuffer(r.READ_FRAMEBUFFER,t.framebufferInfo.framebuffer),r.bindTexture(r.TEXTURE_2D,n.texture),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,0,0,t.framebufferInfo.width,t.framebufferInfo.height),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),this.historyWriteIndex=(this.historyWriteIndex+1)%this.history.length}seedHistory(t){for(let r=0;r<this.history.length;r++)this.historyWriteIndex=r,this.copyToHistory(t);this.historyInitialized=!0}applyInternal(t,r){if(!t.isR8&&!t.isRGBA8)throw new Error("TemporalPass expects R8 or RGBA8 render targets");return this.ensureHistorySized(t.framebufferInfo.width,t.framebufferInfo.height),(this.outputRenderTarget.framebufferInfo.width!==t.framebufferInfo.width||this.outputRenderTarget.framebufferInfo.height!==t.framebufferInfo.height)&&this.outputRenderTarget.resize(t.framebufferInfo.width,t.framebufferInfo.height),this.historyInitialized||this.seedHistory(t),this.settings.uniforms.u_frame1=this.history[0].texture,this.settings.uniforms.u_frame2=this.history[1].texture,this.settings.uniforms.u_frame3=this.history[2].texture,this.settings.uniforms.u_frame4=this.history[3].texture,this.executeProgram(this.programInfo,t,r?null:this.outputRenderTarget),this.copyToHistory(t),this.outputRenderTarget}}class e_ extends vr{}const t_=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;
uniform vec2 u_corners[4];
uniform float u_thickness;

out vec4 outColor;

float segmentDistance(vec2 p, vec2 a, vec2 b) {
    vec2 ab = b - a;
    float t = clamp(dot(p - a, ab) / dot(ab, ab), 0.0, 1.0);
    vec2 closest = a + t * ab;
    return length(p - closest);
}

void main() {
    vec4 base = texture(u_input, v_uv);

    vec2 p = v_uv;
    float d0 = segmentDistance(p, u_corners[0], u_corners[1]);
    float d1 = segmentDistance(p, u_corners[1], u_corners[2]);
    float d2 = segmentDistance(p, u_corners[2], u_corners[3]);
    float d3 = segmentDistance(p, u_corners[3], u_corners[0]);

    float minDist = min(min(d0, d1), min(d2, d3));

    float edge = step(u_thickness, minDist);
    float mask = 1.0 - edge;

    outColor = mix(base, vec4(1.0, 1.0, 1.0, 1.0), mask);
}
`;class r_ extends _r{boxProgramInfo;outputRenderTarget;pixelBuffer=null;pixelChannels=0;constructor(t,r){super(t,r),this.boxProgramInfo=this.createProgramInfo(t_),this.outputRenderTarget=le.createRGBA8(t)}ensurePixelBuffer(t,r,n){const s=t*r*n;(!this.pixelBuffer||this.pixelBuffer.length!==s)&&(this.pixelBuffer=new Uint8Array(s)),this.pixelChannels=n}readPixelsToBuffer(t){const r=t.framebufferInfo.width,n=t.framebufferInfo.height,s=t.isR8,o=s?this.gl.RED:this.gl.RGBA,a=s?1:4;return this.ensurePixelBuffer(r,n,a),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t.framebufferInfo.framebuffer),this.gl.readPixels(0,0,r,n,o,this.gl.UNSIGNED_BYTE,this.pixelBuffer),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),{width:r,height:n}}sampleMax3x3(t,r,n,s){if(!this.pixelBuffer)return 0;const o=Math.round(t),a=Math.round(r);let i=0;for(let l=-1;l<=1;l++)for(let u=-1;u<=1;u++){const f=Math.max(0,Math.min(n-1,o+u)),h=Math.max(0,Math.min(s-1,a+l)),d=((s-1-h)*n+f)*this.pixelChannels,m=this.pixelBuffer[d]/255;m>i&&(i=m)}return i}findRayHits(t,r,n,s,o){const a=(t-1)*.5,i=(r-1)*.5,l=[];for(let u=0;u<s;u++){const f=u/s*Math.PI*2,h=Math.cos(f),c=Math.sin(f),d=h>0?(t-1-a)/h:h<0?-a/h:1/0,m=c>0?(r-1-i)/c:c<0?-i/c:1/0,_=Math.min(d,m);if(isFinite(_))for(let v=_;v>=0;v-=o){const b=a+h*v,E=i+c*v;if(this.sampleMax3x3(b,E,t,r)>=n){l.push({x:b/(t-1),y:E/(r-1)});break}}}return l}computeOBBCorners(t,r){if(t.length<4)return[{x:.5-.25,y:.5-.25},{x:.5+.25,y:.5-.25},{x:.5+.25,y:.5+.25},{x:.5-.25,y:.5+.25}];let n=0,s=0;for(const A of t)n+=A.x,s+=A.y;n/=t.length,s/=t.length;let o=0,a=0,i=0;for(const A of t){const C=A.x-n,k=A.y-s;o+=C*C,a+=C*k,i+=k*k}const l=o+i,u=o*i-a*a,f=Math.sqrt(Math.max(0,l*l-4*u)),h=(l+f)*.5;let c=a,d=h-o;const m=Math.hypot(c,d)||1;c/=m,d/=m;const _=-d,v=c,b=[],E=[];for(const A of t){const C=A.x-n,k=A.y-s;b.push(C*c+k*d),E.push(C*_+k*v)}b.sort((A,C)=>A-C),E.sort((A,C)=>A-C);const y=Math.floor(b.length*Math.min(Math.max(r,0),.45)),g=b[y],x=b[b.length-1-y],S=E[y],F=E[E.length-1-y],P=[{x:n+g*c+S*_,y:s+g*d+S*v},{x:n+x*c+S*_,y:s+x*d+S*v},{x:n+x*c+F*_,y:s+x*d+F*v},{x:n+g*c+F*_,y:s+g*d+F*v}];for(const A of P)A.x=Math.max(0,Math.min(1,A.x)),A.y=Math.max(0,Math.min(1,A.y));return P}applyInternal(t,r){const n=this.settings,{width:s,height:o}=this.readPixelsToBuffer(t),a=this.findRayHits(s,o,n.threshold,Math.max(32,n.rayCount),n.step),i=this.computeOBBCorners(a,n.trimFraction);return this.settings.uniforms.u_corners=[i[0].x,1-i[0].y,i[1].x,1-i[1].y,i[2].x,1-i[2].y,i[3].x,1-i[3].y],this.settings.uniforms.u_thickness=1.5/Math.max(s,o),this.settings.uniforms.u_input=t.texture,this.executeProgram(this.boxProgramInfo,t,r?null:this.outputRenderTarget),this.outputRenderTarget}}class n_ extends vr{_threshold=.2;_rayCount=64;_step=.5;_trimFraction=.12;_angleThreshold=0;_distanceThreshold=0;get threshold(){return this._threshold}set threshold(t){this._threshold=t}get rayCount(){return this._rayCount}set rayCount(t){this._rayCount=t}get step(){return this._step}set step(t){this._step=t}get trimFraction(){return this._trimFraction}set trimFraction(t){this._trimFraction=t}get angleThreshold(){return this._angleThreshold}set angleThreshold(t){this._angleThreshold=t}get distanceThreshold(){return this._distanceThreshold}set distanceThreshold(t){this._distanceThreshold=t}}class ia{pipeline;passes;passMap;constructor(t){this.pipeline=new Um(t);const r=new Xm(t),n=new Hm;n.kernelRadius=2,n.sigmaSpatial=2,n.sigmaRange=.1;const s=new zm(t,n),o=new Ym;o.kernelRadius=1,o.directionBias=0,o.edgeGain=1,o.minEdge=0;const a=new Km(t,o),i=new Qm;i.threshold=.15;const l=new jm(t,i),u=new e_;u.enabled=!0;const f=new Jm(t,u),h=new n_;h.threshold=.12,h.rayCount=64,h.angleThreshold=.35,h.distanceThreshold=.5;const c=new r_(t,h);this.passes=[{id:"rec709-luma",label:"Rec709 Luma",required:!0,pass:r},{id:"bilateral",label:"Bilateral",required:!1,pass:s},{id:"sobel",label:"Sobel",required:!1,pass:a},{id:"magnatude-gate",label:"Magnitude Gate",required:!1,pass:l},{id:"temporal",label:"Temporal Median",required:!1,pass:f},{id:"ray-box",label:"Ray Box",required:!1,pass:c}],this.passMap=new Map(this.passes.map(d=>[d.id,d]));for(const d of this.passes)this.pipeline.addPass(d.pass)}getPass(t){return this.passMap.get(t)?.pass}}class rr{constructor(t){this.mediaStreamTrack=t,this.imageCapture=new ImageCapture(t)}static _imageCaptureContexts=new Map;static _initialized=!1;static get imageCaptureContexts(){if(!rr._initialized)throw new Error("ImageCaptureContext not initialized. Call ImageCaptureContext.initialize() first.");return rr._imageCaptureContexts}imageCapture;static async initialize(){await this.refreshVideoTracks(),this._initialized=!0}static async refreshVideoTracks(){await navigator.mediaDevices.getUserMedia({video:!0});const r=(await navigator.mediaDevices.enumerateDevices()).filter(s=>s.kind==="videoinput"),n=new Set;for(const s of r){const a=(await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:s.deviceId}}})).getVideoTracks()[0];n.add(a.id),this._imageCaptureContexts.has(a.id)||this._imageCaptureContexts.set(a.id,new rr(a))}for(const[s]of this._imageCaptureContexts)n.has(s)||this._imageCaptureContexts.delete(s)}}var s_=re('<button type="button" role="tab"> </button>'),o_=re('<div class="passBar" role="tablist" aria-label="Pipeline passes"></div>');function i_(e,t){ge(t,!1);let r=K(t,"passes",24,()=>[]),n=K(t,"selectedPassId",8);const s=Ns();et();var o=o_();vs(o,5,r,a=>a.id,(a,i)=>{var l=s_();let u;var f=G(l);Te(()=>{u=xs(l,1,"passButton",null,u,{passButtonActive:n()===p(i).id}),Jr(l,"aria-selected",(Ze(n()),p(i),we(()=>n()===p(i).id))),Qe(f,(p(i),we(()=>p(i).label)))}),er("click",l,()=>s("select",{passId:p(i).id})),V(a,l)}),V(e,o),Re()}var a_=re('<label class="setting"><div class="settingLabel"> </div> <div class="settingControl sliderControl svelte-2wv2v5"><div class="sliderShell svelte-2wv2v5"><div class="sliderTrack svelte-2wv2v5"><input class="sliderInput svelte-2wv2v5" type="range"/></div> <div class="settingValue svelte-2wv2v5"> </div></div></div></label>');function ye(e,t){ge(t,!1);let r=K(t,"label",8),n=K(t,"min",8),s=K(t,"max",8),o=K(t,"step",8),a=K(t,"value",8);const i=Ns();et();var l=a_(),u=G(l),f=G(u),h=O(u,2),c=G(h),d=G(c),m=G(d),_=O(d,2),v=G(_);Te(()=>{Qe(f,r()),Jr(m,"min",n()),Jr(m,"max",s()),Jr(m,"step",o()),qc(m,a()),Qe(v,a())}),er("input",m,b=>i("input",{value:Number(b.currentTarget.value)})),V(e,l),Re()}var l_=re('<label class="setting toggleSetting"><div class="settingLabel"> </div> <div class="settingControl"><input type="checkbox"/></div></label>');function zr(e,t){ge(t,!1);let r=K(t,"label",8),n=K(t,"checked",8);const s=Ns();et();var o=l_(),a=G(o),i=G(a),l=O(a,2),u=G(l);Te(()=>{Qe(i,r()),Kc(u,n())}),er("change",u,f=>s("change",{checked:f.currentTarget.checked})),V(e,o),Re()}var u_=re('<div class="settings"><!> <!> <!> <!></div>');function c_(e,t){ge(t,!1);let r=K(t,"settings",12),n=K(t,"required",8,!1),s=M(r().enabled),o=M(r().kernelRadius),a=M(r().sigmaSpatial),i=M(r().sigmaRange);function l(E){R(s,E),r(r().enabled=E,!0)}function u(E){R(o,E),r(r().kernelRadius=E,!0)}function f(E){R(a,E),r(r().sigmaSpatial=E,!0)}function h(E){R(i,E),r(r().sigmaRange=E,!0)}cr(()=>Ze(r()),()=>{r()&&(R(s,r().enabled),R(o,r().kernelRadius),R(a,r().sigmaSpatial),R(i,r().sigmaRange))}),fr(),et();var c=u_(),d=G(c);{var m=E=>{zr(E,{label:"Enabled",get checked(){return p(s)},$$events:{change:y=>l(y.detail.checked)}})};ae(d,E=>{n()||E(m)})}var _=O(d,2);ye(_,{label:"Kernel Radius",min:1,max:5,step:1,get value(){return p(o)},$$events:{input:E=>u(E.detail.value)}});var v=O(_,2);ye(v,{label:"Sigma Spatial",min:.5,max:10,step:.25,get value(){return p(a)},$$events:{input:E=>f(E.detail.value)}});var b=O(v,2);ye(b,{label:"Sigma Range",min:.01,max:.5,step:.01,get value(){return p(i)},$$events:{input:E=>h(E.detail.value)}}),V(e,c),Re()}var f_=re('<div class="settings"><div class="settingsEmpty">Rec709 is required and has no settings.</div></div>');function d_(e){var t=f_();V(e,t)}var h_=re('<div class="settings"><!> <!> <!> <!> <!></div>');function m_(e,t){ge(t,!1);let r=K(t,"settings",12),n=K(t,"required",8,!1),s=M(r().enabled),o=M(r().kernelRadius),a=M(r().directionBias),i=M(r().edgeGain),l=M(r().minEdge);function u(x){R(s,x),r(r().enabled=x,!0)}function f(x){R(o,x),r(r().kernelRadius=x,!0)}function h(x){R(a,x),r(r().directionBias=x,!0)}function c(x){R(i,x),r(r().edgeGain=x,!0)}function d(x){R(l,x),r(r().minEdge=x,!0)}cr(()=>Ze(r()),()=>{r()&&(R(s,r().enabled),R(o,r().kernelRadius),R(a,r().directionBias),R(i,r().edgeGain),R(l,r().minEdge))}),fr(),et();var m=h_(),_=G(m);{var v=x=>{zr(x,{label:"Enabled",get checked(){return p(s)},$$events:{change:S=>u(S.detail.checked)}})};ae(_,x=>{n()||x(v)})}var b=O(_,2);ye(b,{label:"Kernel Radius",min:1,max:2,step:1,get value(){return p(o)},$$events:{input:x=>f(x.detail.value)}});var E=O(b,2);ye(E,{label:"Direction Bias",min:-1,max:1,step:.1,get value(){return p(a)},$$events:{input:x=>h(x.detail.value)}});var y=O(E,2);ye(y,{label:"Edge Gain",min:0,max:8,step:.1,get value(){return p(i)},$$events:{input:x=>c(x.detail.value)}});var g=O(y,2);ye(g,{label:"Min Edge",min:0,max:1,step:.01,get value(){return p(l)},$$events:{input:x=>d(x.detail.value)}}),V(e,m),Re()}var __=re('<div class="settings"><!> <!></div>');function v_(e,t){ge(t,!1);let r=K(t,"settings",12),n=K(t,"required",8,!1),s=M(r().enabled),o=M(r().threshold);function a(c){R(s,c),r(r().enabled=c,!0)}function i(c){R(o,c),r(r().threshold=c,!0)}cr(()=>Ze(r()),()=>{r()&&(R(s,r().enabled),R(o,r().threshold))}),fr(),et();var l=__(),u=G(l);{var f=c=>{zr(c,{label:"Enabled",get checked(){return p(s)},$$events:{change:d=>a(d.detail.checked)}})};ae(u,c=>{n()||c(f)})}var h=O(u,2);ye(h,{label:"Threshold",min:0,max:.5,step:.005,get value(){return p(o)},$$events:{input:c=>i(c.detail.value)}}),V(e,l),Re()}var p_=re('<div class="settings"><!> <div class="settingsEmpty">Uses last 4 frames (median). No tunable parameters.</div></div>');function x_(e,t){ge(t,!1);let r=K(t,"settings",12),n=K(t,"required",8,!1),s=M(r().enabled);function o(u){R(s,u),r(r().enabled=u,!0)}cr(()=>Ze(r()),()=>{r()&&R(s,r().enabled)}),fr(),et();var a=p_(),i=G(a);{var l=u=>{zr(u,{label:"Enabled",get checked(){return p(s)},$$events:{change:f=>o(f.detail.checked)}})};ae(i,u=>{n()||u(l)})}V(e,a),Re()}var b_=re('<div class="settings"><!> <!> <!> <!> <!></div>');function E_(e,t){ge(t,!1);let r=K(t,"settings",12),n=K(t,"required",8,!1),s=M(r().enabled),o=M(r().threshold),a=M(r().rayCount),i=M(r().step),l=M(r().trimFraction);function u(x){R(s,x),r(r().enabled=x,!0)}function f(x){R(o,x),r(r().threshold=x,!0)}function h(x){R(a,x),r(r().rayCount=x,!0)}function c(x){R(i,x),r(r().step=x,!0)}function d(x){R(l,x),r(r().trimFraction=x,!0)}cr(()=>Ze(r()),()=>{r()&&(R(s,r().enabled),R(o,r().threshold),R(a,r().rayCount),R(i,r().step),R(l,r().trimFraction))}),fr(),et();var m=b_(),_=G(m);{var v=x=>{zr(x,{label:"Enabled",get checked(){return p(s)},$$events:{change:S=>u(S.detail.checked)}})};ae(_,x=>{n()||x(v)})}var b=O(_,2);ye(b,{label:"Threshold",min:0,max:.5,step:.005,get value(){return p(o)},$$events:{input:x=>f(x.detail.value)}});var E=O(b,2);ye(E,{label:"Ray Count",min:32,max:256,step:8,get value(){return p(a)},$$events:{input:x=>h(Math.round(x.detail.value))}});var y=O(E,2);ye(y,{label:"Step (px)",min:.25,max:5,step:.25,get value(){return p(i)},$$events:{input:x=>c(x.detail.value)}});var g=O(y,2);ye(g,{label:"Trim Fraction",min:0,max:.4,step:.01,get value(){return p(l)},$$events:{input:x=>d(x.detail.value)}}),V(e,m),Re()}var y_=re('<div class="fpsBadge svelte-1dp3x29" aria-label="Frames per second"> </div>');function g_(e,t){ge(t,!1);let r=M(0),n=0,s=performance.now();function o(){const u=performance.now();n+=1;const f=u-s;f>=500&&(R(r,Math.round(n*1e3/f)),n=0,s=u)}var a={measure:o},i=y_(),l=G(i);return Te(()=>Qe(l,`${p(r)??""} fps`)),V(e,i),Wc(t,"measure",o),Re(a)}function R_(e){const t=e-1;return t*t*t+1}function aa(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function S_(e,{delay:t=0,duration:r=400,easing:n=R_,x:s=0,y:o=0,opacity:a=0}={}){const i=getComputedStyle(e),l=+i.opacity,u=i.transform==="none"?"":i.transform,f=l*(1-a),[h,c]=aa(s),[d,m]=aa(o);return{delay:t,duration:r,easing:n,css:(_,v)=>`
			transform: ${u} translate(${(1-_)*h}${c}, ${(1-_)*d}${m});
			opacity: ${l-f*v}`}}var T_=re('<div class="toast svelte-1fk2ial" role="status"> </div>');function A_(e,t){ge(t,!1);let r=K(t,"message",8,""),n=K(t,"open",12,!1),s=K(t,"duration",8,2e3),o=M(null);cr(()=>(Ze(n()),p(o),Ze(s())),()=>{n()&&(p(o)&&clearTimeout(p(o)),R(o,setTimeout(()=>n(!1),s())))}),fr();var a=me(),i=he(a);{var l=u=>{var f=T_(),h=G(f);Te(()=>Qe(h,r())),Vc(3,f,()=>S_,()=>({y:10,duration:150})),V(u,f)};ae(i,u=>{n()&&u(l)})}V(e,a),Re()}const F_={"rec709-luma":{enabled:!0},bilateral:{enabled:!0,kernelRadius:5,sigmaSpatial:1.5,sigmaRange:.5},sobel:{enabled:!0,kernelRadius:2,directionBias:-.1,edgeGain:.7,minEdge:0},"magnatude-gate":{enabled:!0,threshold:.035},temporal:{enabled:!0},"ray-box":{enabled:!0,threshold:.06,rayCount:256,step:.25,trimFraction:.06}},w_={passes:F_},P_={"rec709-luma":{enabled:!0},bilateral:{enabled:!0,kernelRadius:5,sigmaSpatial:1.5,sigmaRange:.5},sobel:{enabled:!0,kernelRadius:2,directionBias:-.1,edgeGain:.7,minEdge:0},"magnatude-gate":{enabled:!0,threshold:.035},temporal:{enabled:!0},"ray-box":{enabled:!0,threshold:.06,rayCount:256,step:.25,trimFraction:.06}},C_={passes:P_};var B_=re("<option> </option>"),I_=re("<option> </option>"),D_=re('<div class="errorBanner svelte-1n46o8q" role="alert"> </div>'),M_=re('<main class="app svelte-1n46o8q"><section class="controls svelte-1n46o8q"><div class="controlRow svelte-1n46o8q"><div class="sideSwitcher svelte-1n46o8q" role="group" aria-label="Side selector"><button type="button">Front</button> <button type="button">Rear</button></div> <!> <button class="exportButton svelte-1n46o8q" type="button">Export</button></div> <!></section> <section class="views svelte-1n46o8q"><div class="cameraPanel svelte-1n46o8q"><div class="cameraHeader svelte-1n46o8q"><div class="cameraTitle svelte-1n46o8q">Front</div> <select class="cameraSelect svelte-1n46o8q"><option disabled>Select inputâ¦</option><!></select></div> <canvas class="cameraCanvas svelte-1n46o8q"></canvas></div> <div class="cameraPanel svelte-1n46o8q"><div class="cameraHeader svelte-1n46o8q"><div class="cameraTitle svelte-1n46o8q">Rear</div> <select class="cameraSelect svelte-1n46o8q"><option disabled>Select inputâ¦</option><!></select></div> <canvas class="cameraCanvas svelte-1n46o8q"></canvas></div></section> <!> <!> <!></main>');function N_(e,t){ge(t,!1);const r={"rec709-luma":d_,bilateral:c_,sobel:m_,"magnatude-gate":v_,temporal:x_,"ray-box":E_};let n=M(""),s=new Map,o=M([]),a=M(""),i=M(""),l=M("front"),u=M(null),f=M(null),h=M(null),c=M(null),d=M([]),m=M(null),_=!1,v=!1,b=M(null),E=M(!1),y=M("");function g(){R(o,Array.from(s.entries()).map(([T,w])=>({id:T,label:`${w.mediaStreamTrack.label||"Camera"} (${T})`})))}async function x(){await rr.initialize(),s=rr.imageCaptureContexts,g(),!p(a)&&p(o)[0]&&R(a,p(o)[0].id),!p(i)&&p(o)[1]&&R(i,p(o)[1].id),!p(i)&&p(o)[0]&&R(i,p(o)[0].id)}function S(T,w){const D=w?.getPass(T);return D?D.settings:null}function F(T,w){const D=w?.passes??{};for(const z of T.passes){const U=D[z.id];if(U){typeof U.enabled=="boolean"&&(z.pass.enabled=U.enabled);for(const[Lt,Ln]of Object.entries(U))Lt!=="enabled"&&Lt in z.pass.settings&&(z.pass.settings[Lt]=Ln)}}}function P(T){const w={};for(const D of T.passes){const z={enabled:D.pass.enabled},U=D.pass.settings;switch(D.id){case"bilateral":z.kernelRadius=U.kernelRadius,z.sigmaSpatial=U.sigmaSpatial,z.sigmaRange=U.sigmaRange;break;case"sobel":z.kernelRadius=U.kernelRadius,z.directionBias=U.directionBias,z.edgeGain=U.edgeGain,z.minEdge=U.minEdge;break;case"magnatude-gate":z.threshold=U.threshold;break;case"temporal":break;case"ray-box":z.threshold=U.threshold,z.rayCount=U.rayCount,z.step=U.step,z.trimFraction=U.trimFraction;break}w[D.id]=z}return{passes:w}}async function A(T){const w=p(T==="front"?h:c);if(!w)return;const D=JSON.stringify(P(w),null,2);await navigator.clipboard.writeText(D),R(y,`Exported ${T} settings to clipboard`),R(E,!0)}async function C(T,w){if(!T||!w)return;const D=s.get(w);if(!D)return;const z=await D.imageCapture.grabFrame();try{await T.pipeline.render(z)}finally{z.close()}}async function k(){if(_){if(v){p(b)?.measure(),requestAnimationFrame(()=>{k()});return}v=!0;try{p(b)?.measure(),await C(p(h),p(a)),await C(p(c),p(i)),R(m,null)}catch(T){R(m,T instanceof Error?T.message:String(T))}finally{v=!1,requestAnimationFrame(()=>{k()})}}}$a(async()=>{try{await x();const T=p(u)?.getContext("webgl2"),w=p(f)?.getContext("webgl2");if(!T||!w){R(m,"WebGL2 not available for one or both canvases.");return}R(h,new ia(T)),R(c,new ia(w)),p(h)&&F(p(h),w_),p(c)&&F(p(c),C_),R(d,p(h).passes),R(n,p(d)[0]?.id??""),_=!0,k()}catch(T){R(m,T instanceof Error?T.message:String(T))}}),Qc(()=>{_=!1}),et();var ne=M_(),j=G(ne),de=G(j),pe=G(de),Ce=G(pe);let ze;var He=O(Ce,2);let $e;var vt=O(pe,2);{let T=st(()=>p(d).map(w=>({id:w.id,label:w.label})));i_(vt,{get passes(){return p(T)},get selectedPassId(){return p(n)},$$events:{select:w=>R(n,w.detail.passId)}})}var Mt=O(vt,2),Nt=O(de,2);{var kt=T=>{const w=st(()=>p(d).find(br=>br.id===p(n))),D=st(()=>p(w)?r[p(w).id]:null),z=st(()=>p(l)==="front"?p(h):p(c)),U=st(()=>p(w)?S(p(w).id,p(z)):null);var Lt=me(),Ln=he(Lt);{var du=br=>{var Eo=me(),hu=he(Eo);{var mu=Ut=>{var Er=me(),Un=he(Er);Xt(Un,()=>p(D),(On,Vn)=>{Vn(On,{get required(){return p(w).required},get settings(){return p(U)}})}),V(Ut,Er)},_u=Ut=>{var Er=me(),Un=he(Er);{var On=Ot=>{var yr=me(),zn=he(yr);Xt(zn,()=>p(D),(Hn,$n)=>{$n(Hn,{get required(){return p(w).required},get settings(){return p(U)}})}),V(Ot,yr)},Vn=Ot=>{var yr=me(),zn=he(yr);{var Hn=Vt=>{var gr=me(),Xn=he(gr);Xt(Xn,()=>p(D),(qn,Kn)=>{Kn(qn,{get required(){return p(w).required},get settings(){return p(U)}})}),V(Vt,gr)},$n=Vt=>{var gr=me(),Xn=he(gr);{var qn=zt=>{var Rr=me(),Yn=he(Rr);Xt(Yn,()=>p(D),(Wn,jn)=>{jn(Wn,{get required(){return p(w).required},get settings(){return p(U)}})}),V(zt,Rr)},Kn=zt=>{var Rr=me(),Yn=he(Rr);{var Wn=Ht=>{var Sr=me(),Qn=he(Sr);Xt(Qn,()=>p(D),(Zn,Jn)=>{Jn(Zn,{get required(){return p(w).required},get settings(){return p(U)}})}),V(Ht,Sr)},jn=Ht=>{var Sr=me(),Qn=he(Sr);Xt(Qn,()=>p(D),(Zn,Jn)=>{Jn(Zn,{get required(){return p(w).required}})}),V(Ht,Sr)};ae(Yn,Ht=>{p(w).id==="ray-box"?Ht(Wn):Ht(jn,!1)},!0)}V(zt,Rr)};ae(Xn,zt=>{p(w).id==="temporal"?zt(qn):zt(Kn,!1)},!0)}V(Vt,gr)};ae(zn,Vt=>{p(w).id==="magnatude-gate"?Vt(Hn):Vt($n,!1)},!0)}V(Ot,yr)};ae(Un,Ot=>{p(w).id==="sobel"?Ot(On):Ot(Vn,!1)},!0)}V(Ut,Er)};ae(hu,Ut=>{p(w).id==="bilateral"?Ut(mu):Ut(_u,!1)})}V(br,Eo)};ae(Ln,br=>{p(w)&&p(D)&&p(U)&&br(du)})}V(T,Lt)};ae(Nt,T=>{p(n)&&T(kt)})}var pt=O(j,2),xt=G(pt),pr=G(xt),xr=O(G(pr),2);Te(()=>{p(a),Fo(()=>{p(o)})});var Gt=G(xr);Gt.value=Gt.__value="";var Hr=O(Gt);vs(Hr,1,()=>p(o),T=>T.id,(T,w)=>{var D=B_(),z=G(D),U={};Te(()=>{Qe(z,p(w).id),U!==(U=p(w).id)&&(D.value=(D.__value=p(w).id)??"")}),V(T,D)});var W=O(pr,2);es(W,T=>R(u,T),()=>p(u));var au=O(xt,2),vo=G(au),po=O(G(vo),2);Te(()=>{p(i),Fo(()=>{p(o)})});var Gn=G(po);Gn.value=Gn.__value="";var lu=O(Gn);vs(lu,1,()=>p(o),T=>T.id,(T,w)=>{var D=I_(),z=G(D),U={};Te(()=>{Qe(z,p(w).id),U!==(U=p(w).id)&&(D.value=(D.__value=p(w).id)??"")}),V(T,D)});var uu=O(vo,2);es(uu,T=>R(f,T),()=>p(f));var xo=O(pt,2);{var cu=T=>{var w=D_(),D=G(w);Te(()=>Qe(D,p(m))),V(T,w)};ae(xo,T=>{p(m)&&T(cu)})}var bo=O(xo,2);es(g_(bo,{$$legacy:!0}),T=>R(b,T),()=>p(b));var fu=O(bo,2);A_(fu,{get message(){return p(y)},get open(){return p(E)},set open(T){R(E,T)},$$legacy:!0}),Te(()=>{ze=xs(Ce,1,"svelte-1n46o8q",null,ze,{sideActive:p(l)==="front"}),$e=xs(He,1,"svelte-1n46o8q",null,$e,{sideActive:p(l)==="rear"})}),er("click",Ce,()=>R(l,"front")),er("click",He,()=>R(l,"rear")),er("click",Mt,()=>A(p(l))),No(xr,()=>p(a),T=>R(a,T)),No(po,()=>p(i),T=>R(i,T)),V(e,ne),Re()}Bc(N_,{target:document.getElementById("app")});
