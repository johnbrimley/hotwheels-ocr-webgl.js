(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const ho=!1;var _r=Array.isArray,Fc=Array.prototype.indexOf,vr=Array.from,wc=Object.defineProperty,Tt=Object.getOwnPropertyDescriptor,pa=Object.getOwnPropertyDescriptors,Pc=Object.prototype,Ic=Array.prototype,Bo=Object.getPrototypeOf,Ps=Object.isExtensible;function Bc(e){return typeof e=="function"}const Pn=()=>{};function Cc(e){return e()}function mo(e){for(var t=0;t<e.length;t++)e[t]()}function xa(){var e,t,n=new Promise((r,o)=>{e=r,t=o});return{promise:n,resolve:e,reject:t}}const te=2,Co=4,pr=8,Dc=1<<24,Ue=16,et=32,Dt=64,xr=128,Te=512,J=1024,he=2048,Ae=4096,ve=8192,je=16384,br=32768,ft=65536,Is=1<<17,ba=1<<18,dn=1<<19,Ea=1<<20,We=1<<25,Pt=32768,_o=1<<21,Do=1<<22,it=1<<23,Qe=Symbol("$state"),Mc=Symbol("legacy props"),Nc=Symbol(""),tn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Mo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function kc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Gc(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Lc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Uc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Oc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Vc(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Hc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function zc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Xc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function $c(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const qc=1,Yc=2,ga=4,Kc=8,Wc=16,jc=1,Qc=2,Zc=4,Jc=8,eu=16,tu=4,nu=2,oe=Symbol(),ru="http://www.w3.org/1999/xhtml";function ou(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function su(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ya(e){return e===this.v}function iu(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ra(e){return!iu(e,this.v)}let hn=!1,au=!1;function lu(){hn=!0}let $=null;function ln(e){$=e}function pe(e,t=!1,n){$={p:$,i:!1,c:null,e:null,s:e,x:null,l:hn&&!t?{s:null,u:null,$:[]}:null}}function xe(e){var t=$,n=t.e;if(n!==null){t.e=null;for(var r of n)ka(r)}return e!==void 0&&(t.x=e),t.i=!0,$=t.p,e??{}}function Hn(){return!hn||$!==null&&$.l===null}let nn=[];function cu(){var e=nn;nn=[],mo(e)}function Mt(e){if(nn.length===0){var t=nn;queueMicrotask(()=>{t===nn&&cu()})}nn.push(e)}function Sa(e){var t=O;if(t===null)return G.f|=it,e;if((t.f&br)===0){if((t.f&xr)===0)throw e;t.b.error(e)}else cn(e,t)}function cn(e,t){for(;t!==null;){if((t.f&xr)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Yn=new Set;let z=null,tr=null,ye=null,Be=[],No=null,vo=!1;class Ce{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#s=new Set;#o=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Be=[],tr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#a(n.effects),this.#a(n.render_effects)):(tr=this,z=null,Bs(n.render_effects),Bs(n.effects),tr=null,this.#l?.resolve()),ye=null}#i(t,n){t.f^=J;for(var r=t.first;r!==null;){var o=r.f,s=(o&(et|Dt))!==0,a=s&&(o&J)!==0,i=a||(o&ve)!==0||this.skipped_effects.has(r);if((r.f&xr)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!i&&r.fn!==null){s?r.f^=J:(o&Co)!==0?n.effects.push(r):_n(r)&&((r.f&Ue)!==0&&this.#s.add(r),un(r));var l=r.first;if(l!==null){r=l;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===n.effect&&(this.#a(n.effects),this.#a(n.render_effects),n=n.parent),r=c.next,c=c.parent}}#a(t){for(const n of t)(n.f&he)!==0?this.#s.add(n):(n.f&Ae)!==0&&this.#o.add(n),this.#c(n.deps),ee(n,J)}#c(t){if(t!==null)for(const n of t)(n.f&te)===0||(n.f&Pt)===0||(n.f^=Pt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&it)===0&&(this.current.set(t,t.v),ye?.set(t,t.v))}activate(){z=this,this.apply()}deactivate(){z===this&&(z=null,ye=null)}flush(){if(this.activate(),Be.length>0){if(uu(),z!==null&&z!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#f()}#f(){if(Yn.size>1){this.previous.clear();var t=ye,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const s of Yn){if(s===this){n=!1;continue}const a=[];for(const[l,c]of this.current){if(s.current.has(l))if(n&&c!==s.current.get(l))s.current.set(l,c);else continue;a.push(l)}if(a.length===0)continue;const i=[...s.current.keys()].filter(l=>!this.current.has(l));if(i.length>0){var o=Be;Be=[];const l=new Set,c=new Map;for(const u of a)Ta(u,i,l,c);if(Be.length>0){z=s,s.apply();for(const u of Be)s.#i(u,r);s.deactivate()}Be=o}}z=null,ye=t}this.committed=!0,Yn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#s)this.#o.delete(t),ee(t,he),It(t);for(const t of this.#o)ee(t,Ae),It(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=xa()).promise}static ensure(){if(z===null){const t=z=new Ce;Yn.add(z),Ce.enqueue(()=>{z===t&&t.flush()})}return z}static enqueue(t){Mt(t)}apply(){}}function uu(){var e=Ft;vo=!0;var t=null;try{var n=0;for(ar(!0);Be.length>0;){var r=Ce.ensure();if(n++>1e3){var o,s;fu()}r.process(Be),at.clear()}}finally{vo=!1,ar(e),No=null}}function fu(){try{Oc()}catch(e){cn(e,No)}}let Ye=null;function Bs(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(je|ve))===0&&_n(r)&&(Ye=new Set,un(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Ua(r):r.fn=null),Ye?.size>0)){at.clear();for(const o of Ye){if((o.f&(je|ve))!==0)continue;const s=[o];let a=o.parent;for(;a!==null;)Ye.has(a)&&(Ye.delete(a),s.push(a)),a=a.parent;for(let i=s.length-1;i>=0;i--){const l=s[i];(l.f&(je|ve))===0&&un(l)}}Ye.clear()}}Ye=null}}function Ta(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const o of e.reactions){const s=o.f;(s&te)!==0?Ta(o,t,n,r):(s&(Do|Ue))!==0&&(s&he)===0&&Aa(o,t,r)&&(ee(o,he),It(o))}}function Aa(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const o of e.deps){if(t.includes(o))return!0;if((o.f&te)!==0&&Aa(o,t,n))return n.set(o,!0),!0}return n.set(e,!1),!1}function It(e){for(var t=No=e;t.parent!==null;){t=t.parent;var n=t.f;if(vo&&t===O&&(n&Ue)!==0&&(n&ba)===0)return;if((n&(Dt|et))!==0){if((n&J)===0)return;t.f^=J}}Be.push(t)}function du(e){let t=0,n=Bt(0),r;return()=>{Gn()&&(p(n),yr(()=>(t===0&&(r=Fe(()=>e(()=>Nn(n)))),t+=1,()=>{Mt(()=>{t-=1,t===0&&(r?.(),r=void 0,Nn(n))})})))}}var hu=ft|dn|xr;function mu(e,t,n){new _u(e,t,n)}class _u{parent;#e=!1;#t;#r=null;#n;#l;#s;#o=null;#i=null;#a=null;#c=null;#u=null;#f=0;#d=0;#m=!1;#h=null;#b=du(()=>(this.#h=Bt(this.#f),()=>{this.#h=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=O.b,this.#e=!!this.#n.pending,this.#s=Rr(()=>{O.b=this;{var o=this.#p();try{this.#o=ge(()=>r(o))}catch(s){this.error(s)}this.#d>0?this.#v():this.#e=!1}return()=>{this.#u?.remove()}},hu)}#E(){try{this.#o=ge(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#g(){const t=this.#n.pending;t&&(this.#i=ge(()=>t(this.#t)),Ce.enqueue(()=>{var n=this.#p();this.#o=this.#_(()=>(Ce.ensure(),ge(()=>this.#l(n)))),this.#d>0?this.#v():(At(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#p(){var t=this.#t;return this.#e&&(this.#u=lt(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#_(t){var n=O,r=G,o=$;Ne(this.#s),fe(this.#s),ln(this.#s.ctx);try{return t()}catch(s){return Sa(s),null}finally{Ne(n),fe(r),ln(o)}}#v(){const t=this.#n.pending;this.#o!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Ha(this.#o,this.#c)),this.#i===null&&(this.#i=ge(()=>t(this.#t)))}#x(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#x(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#i&&At(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#x(t),this.#f+=t,this.#h&&Ct(this.#h,this.#f)}get_effect_pending(){return this.#b(),p(this.#h)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#m||!n&&!r)throw t;this.#o&&(de(this.#o),this.#o=null),this.#i&&(de(this.#i),this.#i=null),this.#a&&(de(this.#a),this.#a=null);var o=!1,s=!1;const a=()=>{if(o){su();return}o=!0,s&&$c(),Ce.ensure(),this.#f=0,this.#a!==null&&At(this.#a,()=>{this.#a=null}),this.#e=this.has_pending_snippet(),this.#o=this.#_(()=>(this.#m=!1,ge(()=>this.#l(this.#t)))),this.#d>0?this.#v():this.#e=!1};var i=G;try{fe(null),s=!0,n?.(t,a),s=!1}catch(l){cn(l,this.#s&&this.#s.parent)}finally{fe(i)}r&&Mt(()=>{this.#a=this.#_(()=>{Ce.ensure(),this.#m=!0;try{return ge(()=>{r(this.#t,()=>t,()=>a)})}catch(l){return cn(l,this.#s.parent),null}finally{this.#m=!1}})})}}function vu(e,t,n,r){const o=Hn()?Er:ot;if(n.length===0&&e.length===0){r(t.map(o));return}var s=z,a=O,i=pu();function l(){Promise.all(n.map(c=>xu(c))).then(c=>{i();try{r([...t.map(o),...c])}catch(u){(a.f&je)===0&&cn(u,a)}s?.deactivate(),ir()}).catch(c=>{cn(c,a)})}e.length>0?Promise.all(e).then(()=>{i();try{return l()}finally{s?.deactivate(),ir()}}):l()}function pu(){var e=O,t=G,n=$,r=z;return function(s=!0){Ne(e),fe(t),ln(n),s&&r?.activate()}}function ir(){Ne(null),fe(null),ln(null)}function Er(e){var t=te|he,n=G!==null&&(G.f&te)!==0?G:null;return O!==null&&(O.f|=dn),{ctx:$,deps:null,effects:null,equals:ya,f:t,fn:e,reactions:null,rv:0,v:oe,wv:0,parent:n??O,ac:null}}function xu(e,t){let n=O;n===null&&kc();var r=n.b,o=void 0,s=Bt(oe),a=!G,i=new Map;return Pu(()=>{var l=xa();o=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{c===z&&c.committed&&c.deactivate(),ir()})}catch(f){l.reject(f),ir()}var c=z;if(a){var u=!r.is_pending();r.update_pending_count(1),c.increment(u),i.get(c)?.reject(tn),i.delete(c),i.set(c,l)}const d=(f,h=void 0)=>{if(c.activate(),h)h!==tn&&(s.f|=it,Ct(s,h));else{(s.f&it)!==0&&(s.f^=it),Ct(s,f);for(const[m,_]of i){if(i.delete(m),m===c)break;_.reject(tn)}}a&&(r.update_pending_count(-1),c.decrement(u))};l.promise.then(d,f=>d(null,f||"unknown"))}),gr(()=>{for(const l of i.values())l.reject(tn)}),new Promise(l=>{function c(u){function d(){u===o?l(s):c(o)}u.then(d,d)}c(o)})}function ot(e){const t=Er(e);return t.equals=Ra,t}function Fa(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)de(t[n])}}function bu(e){for(var t=e.parent;t!==null;){if((t.f&te)===0)return(t.f&je)===0?t:null;t=t.parent}return null}function ko(e){var t,n=O;Ne(bu(e));try{e.f&=~Pt,Fa(e),t=qa(e)}finally{Ne(n)}return t}function wa(e){var t=ko(e);if(e.equals(t)||(z?.is_fork||(e.v=t),e.wv=Xa()),!Gt)if(ye!==null)(Gn()||z?.is_fork)&&ye.set(e,t);else{var n=(e.f&Te)===0?Ae:J;ee(e,n)}}let po=new Set;const at=new Map;let Pa=!1;function Bt(e,t){var n={f:0,v:e,reactions:null,equals:ya,rv:0,wv:0};return n}function tt(e,t){const n=Bt(e);return Du(n),n}function N(e,t=!1,n=!0){const r=Bt(e);return t||(r.equals=Ra),hn&&n&&$!==null&&$.l!==null&&($.l.s??=[]).push(r),r}function S(e,t,n=!1){G!==null&&(!De||(G.f&Is)!==0)&&Hn()&&(G.f&(te|Ue|Do|Is))!==0&&!Ze?.includes(e)&&Xc();let r=n?rn(t):t;return Ct(e,r)}function Ct(e,t){if(!e.equals(t)){var n=e.v;Gt?at.set(e,t):at.set(e,n),e.v=t;var r=Ce.ensure();r.capture(e,n),(e.f&te)!==0&&((e.f&he)!==0&&ko(e),ee(e,(e.f&Te)!==0?J:Ae)),e.wv=Xa(),Ia(e,he),Hn()&&O!==null&&(O.f&J)!==0&&(O.f&(et|Dt))===0&&(Ee===null?Mu([e]):Ee.push(e)),!r.is_fork&&po.size>0&&!Pa&&Eu()}return t}function Eu(){Pa=!1;var e=Ft;ar(!0);const t=Array.from(po);try{for(const n of t)(n.f&J)!==0&&ee(n,Ae),_n(n)&&un(n)}finally{ar(e)}po.clear()}function Nn(e){S(e,e.v+1)}function Ia(e,t){var n=e.reactions;if(n!==null)for(var r=Hn(),o=n.length,s=0;s<o;s++){var a=n[s],i=a.f;if(!(!r&&a===O)){var l=(i&he)===0;if(l&&ee(a,t),(i&te)!==0){var c=a;ye?.delete(c),(i&Pt)===0&&(i&Te&&(a.f|=Pt),Ia(c,Ae))}else l&&((i&Ue)!==0&&Ye!==null&&Ye.add(a),It(a))}}}function rn(e){if(typeof e!="object"||e===null||Qe in e)return e;const t=Bo(e);if(t!==Pc&&t!==Ic)return e;var n=new Map,r=_r(e),o=tt(0),s=wt,a=i=>{if(wt===s)return i();var l=G,c=wt;fe(null),Gs(s);var u=i();return fe(l),Gs(c),u};return r&&n.set("length",tt(e.length)),new Proxy(e,{defineProperty(i,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Hc();var u=n.get(l);return u===void 0?u=a(()=>{var d=tt(c.value);return n.set(l,d),d}):S(u,c.value,!0),!0},deleteProperty(i,l){var c=n.get(l);if(c===void 0){if(l in i){const u=a(()=>tt(oe));n.set(l,u),Nn(o)}}else S(c,oe),Nn(o);return!0},get(i,l,c){if(l===Qe)return e;var u=n.get(l),d=l in i;if(u===void 0&&(!d||Tt(i,l)?.writable)&&(u=a(()=>{var h=rn(d?i[l]:oe),m=tt(h);return m}),n.set(l,u)),u!==void 0){var f=p(u);return f===oe?void 0:f}return Reflect.get(i,l,c)},getOwnPropertyDescriptor(i,l){var c=Reflect.getOwnPropertyDescriptor(i,l);if(c&&"value"in c){var u=n.get(l);u&&(c.value=p(u))}else if(c===void 0){var d=n.get(l),f=d?.v;if(d!==void 0&&f!==oe)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(i,l){if(l===Qe)return!0;var c=n.get(l),u=c!==void 0&&c.v!==oe||Reflect.has(i,l);if(c!==void 0||O!==null&&(!u||Tt(i,l)?.writable)){c===void 0&&(c=a(()=>{var f=u?rn(i[l]):oe,h=tt(f);return h}),n.set(l,c));var d=p(c);if(d===oe)return!1}return u},set(i,l,c,u){var d=n.get(l),f=l in i;if(r&&l==="length")for(var h=c;h<d.v;h+=1){var m=n.get(h+"");m!==void 0?S(m,oe):h in i&&(m=a(()=>tt(oe)),n.set(h+"",m))}if(d===void 0)(!f||Tt(i,l)?.writable)&&(d=a(()=>tt(void 0)),S(d,rn(c)),n.set(l,d));else{f=d.v!==oe;var _=a(()=>rn(c));S(d,_)}var v=Reflect.getOwnPropertyDescriptor(i,l);if(v?.set&&v.set.call(u,c),!f){if(r&&typeof l=="string"){var x=n.get("length"),g=Number(l);Number.isInteger(g)&&g>=x.v&&S(x,g+1)}Nn(o)}return!0},ownKeys(i){p(o);var l=Reflect.ownKeys(i).filter(d=>{var f=n.get(d);return f===void 0||f.v!==oe});for(var[c,u]of n)u.v!==oe&&!(c in i)&&l.push(c);return l},setPrototypeOf(){zc()}})}function Cs(e){try{if(e!==null&&typeof e=="object"&&Qe in e)return e[Qe]}catch{}return e}function gu(e,t){return Object.is(Cs(e),Cs(t))}var Ds,Ba,Ca,Da;function yu(){if(Ds===void 0){Ds=window,Ba=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Ca=Tt(t,"firstChild").get,Da=Tt(t,"nextSibling").get,Ps(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ps(n)&&(n.__t=void 0)}}function lt(e=""){return document.createTextNode(e)}function Go(e){return Ca.call(e)}function zn(e){return Da.call(e)}function U(e,t){return Go(e)}function ie(e,t=!1){{var n=Go(e);return n instanceof Comment&&n.data===""?zn(n):n}}function V(e,t=1,n=!1){let r=e;for(;t--;)r=zn(r);return r}function Ru(e){e.textContent=""}function Ma(){return!1}let Ms=!1;function Su(){Ms||(Ms=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function mn(e){var t=G,n=O;fe(null),Ne(null);try{return e()}finally{fe(t),Ne(n)}}function Tu(e,t,n,r=n){e.addEventListener(t,()=>mn(n));const o=e.__on_r;o?e.__on_r=()=>{o(),r(!0)}:e.__on_r=()=>r(!0),Su()}function Na(e){O===null&&(G===null&&Uc(),Lc()),Gt&&Gc()}function Au(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Oe(e,t,n){var r=O;r!==null&&(r.f&ve)!==0&&(e|=ve);var o={ctx:$,deps:null,nodes:null,f:e|he|Te,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{un(o),o.f|=br}catch(i){throw de(o),i}else t!==null&&It(o);var s=o;if(n&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&dn)===0&&(s=s.first,(e&Ue)!==0&&(e&ft)!==0&&s!==null&&(s.f|=ft)),s!==null&&(s.parent=r,r!==null&&Au(s,r),G!==null&&(G.f&te)!==0&&(e&Dt)===0)){var a=G;(a.effects??=[]).push(s)}return o}function Gn(){return G!==null&&!De}function gr(e){const t=Oe(pr,null,!1);return ee(t,J),t.teardown=e,t}function xo(e){Na();var t=O.f,n=!G&&(t&et)!==0&&(t&br)===0;if(n){var r=$;(r.e??=[]).push(e)}else return ka(e)}function ka(e){return Oe(Co|Ea,e,!1)}function Fu(e){return Na(),Oe(pr|Ea,e,!0)}function wu(e){Ce.ensure();const t=Oe(Dt|dn,e,!0);return(n={})=>new Promise(r=>{n.outro?At(t,()=>{de(t),r(void 0)}):(de(t),r(void 0))})}function Lo(e){return Oe(Co,e,!1)}function Nt(e,t){var n=$,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=yr(()=>{e(),!r.ran&&(r.ran=!0,Fe(t))})}function kt(){var e=$;yr(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&J)!==0&&ee(n,Ae),_n(n)&&un(n),t.ran=!1}})}function Pu(e){return Oe(Do|dn,e,!0)}function yr(e,t=0){return Oe(pr|t,e,!0)}function Se(e,t=[],n=[],r=[]){vu(r,t,n,o=>{Oe(pr,()=>e(...o.map(p)),!0)})}function Rr(e,t=0){var n=Oe(Ue|t,e,!0);return n}function ge(e){return Oe(et|dn,e,!0)}function Ga(e){var t=e.teardown;if(t!==null){const n=Gt,r=G;ks(!0),fe(null);try{t.call(null)}finally{ks(n),fe(r)}}}function La(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const o=n.ac;o!==null&&mn(()=>{o.abort(tn)});var r=n.next;(n.f&Dt)!==0?n.parent=null:de(n,t),n=r}}function Iu(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&et)===0&&de(t),t=n}}function de(e,t=!0){var n=!1;(t||(e.f&ba)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Bu(e.nodes.start,e.nodes.end),n=!0),La(e,t&&!n),lr(e,0),ee(e,je);var r=e.nodes&&e.nodes.t;if(r!==null)for(const s of r)s.stop();Ga(e);var o=e.parent;o!==null&&o.first!==null&&Ua(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Bu(e,t){for(;e!==null;){var n=e===t?null:zn(e);e.remove(),e=n}}function Ua(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function At(e,t,n=!0){var r=[];Oa(e,r,!0);var o=()=>{n&&de(e),t&&t()},s=r.length;if(s>0){var a=()=>--s||o();for(var i of r)i.out(a)}else o()}function Oa(e,t,n){if((e.f&ve)===0){e.f^=ve;var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)(i.is_global||n)&&t.push(i);for(var o=e.first;o!==null;){var s=o.next,a=(o.f&ft)!==0||(o.f&et)!==0&&(e.f&Ue)!==0;Oa(o,t,a?n:!1),o=s}}}function Uo(e){Va(e,!0)}function Va(e,t){if((e.f&ve)!==0){e.f^=ve,(e.f&J)===0&&(ee(e,he),It(e));for(var n=e.first;n!==null;){var r=n.next,o=(n.f&ft)!==0||(n.f&et)!==0;Va(n,o?t:!1),n=r}var s=e.nodes&&e.nodes.t;if(s!==null)for(const a of s)(a.is_global||t)&&a.in()}}function Ha(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var o=n===r?null:zn(n);t.append(n),n=o}}let en=null;function Cu(e){var t=en;try{if(en=new Set,Fe(e),t!==null)for(var n of en)t.add(n);return en}finally{en=t}}function Ns(e){for(var t of Cu(e))Ct(t,t.v)}let Ft=!1;function ar(e){Ft=e}let Gt=!1;function ks(e){Gt=e}let G=null,De=!1;function fe(e){G=e}let O=null;function Ne(e){O=e}let Ze=null;function Du(e){G!==null&&(Ze===null?Ze=[e]:Ze.push(e))}let le=null,_e=0,Ee=null;function Mu(e){Ee=e}let za=1,Ln=0,wt=Ln;function Gs(e){wt=e}function Xa(){return++za}function _n(e){var t=e.f;if((t&he)!==0)return!0;if(t&te&&(e.f&=~Pt),(t&Ae)!==0){var n=e.deps;if(n!==null)for(var r=n.length,o=0;o<r;o++){var s=n[o];if(_n(s)&&wa(s),s.wv>e.wv)return!0}(t&Te)!==0&&ye===null&&ee(e,J)}return!1}function $a(e,t,n=!0){var r=e.reactions;if(r!==null&&!Ze?.includes(e))for(var o=0;o<r.length;o++){var s=r[o];(s.f&te)!==0?$a(s,t,!1):t===s&&(n?ee(s,he):(s.f&J)!==0&&ee(s,Ae),It(s))}}function qa(e){var t=le,n=_e,r=Ee,o=G,s=Ze,a=$,i=De,l=wt,c=e.f;le=null,_e=0,Ee=null,G=(c&(et|Dt))===0?e:null,Ze=null,ln(e.ctx),De=!1,wt=++Ln,e.ac!==null&&(mn(()=>{e.ac.abort(tn)}),e.ac=null);try{e.f|=_o;var u=e.fn,d=u(),f=e.deps;if(le!==null){var h;if(lr(e,_e),f!==null&&_e>0)for(f.length=_e+le.length,h=0;h<le.length;h++)f[_e+h]=le[h];else e.deps=f=le;if(Gn()&&(e.f&Te)!==0)for(h=_e;h<f.length;h++)(f[h].reactions??=[]).push(e)}else f!==null&&_e<f.length&&(lr(e,_e),f.length=_e);if(Hn()&&Ee!==null&&!De&&f!==null&&(e.f&(te|Ae|he))===0)for(h=0;h<Ee.length;h++)$a(Ee[h],e);return o!==null&&o!==e&&(Ln++,Ee!==null&&(r===null?r=Ee:r.push(...Ee))),(e.f&it)!==0&&(e.f^=it),d}catch(m){return Sa(m)}finally{e.f^=_o,le=t,_e=n,Ee=r,G=o,Ze=s,ln(a),De=i,wt=l}}function Nu(e,t){let n=t.reactions;if(n!==null){var r=Fc.call(n,e);if(r!==-1){var o=n.length-1;o===0?n=t.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(t.f&te)!==0&&(le===null||!le.includes(t))&&(ee(t,Ae),(t.f&Te)!==0&&(t.f^=Te,t.f&=~Pt),Fa(t),lr(t,0))}function lr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Nu(e,n[r])}function un(e){var t=e.f;if((t&je)===0){ee(e,J);var n=O,r=Ft;O=e,Ft=!0;try{(t&(Ue|Dc))!==0?Iu(e):La(e),Ga(e);var o=qa(e);e.teardown=typeof o=="function"?o:null,e.wv=za;var s;ho&&au&&(e.f&he)!==0&&e.deps}finally{Ft=r,O=n}}}function p(e){var t=e.f,n=(t&te)!==0;if(en?.add(e),G!==null&&!De){var r=O!==null&&(O.f&je)!==0;if(!r&&!Ze?.includes(e)){var o=G.deps;if((G.f&_o)!==0)e.rv<Ln&&(e.rv=Ln,le===null&&o!==null&&o[_e]===e?_e++:le===null?le=[e]:le.includes(e)||le.push(e));else{(G.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[G]:s.includes(G)||s.push(G)}}}if(Gt){if(at.has(e))return at.get(e);if(n){var a=e,i=a.v;return((a.f&J)===0&&a.reactions!==null||Ka(a))&&(i=ko(a)),at.set(a,i),i}}else n&&(!ye?.has(e)||z?.is_fork&&!Gn())&&(a=e,_n(a)&&wa(a),Ft&&Gn()&&(a.f&Te)===0&&Ya(a));if(ye?.has(e))return ye.get(e);if((e.f&it)!==0)throw e.v;return e.v}function Ya(e){if(e.deps!==null){e.f^=Te;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&te)!==0&&(t.f&Te)===0&&Ya(t)}}function Ka(e){if(e.v===oe)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(at.has(t)||(t.f&te)!==0&&Ka(t))return!0;return!1}function Fe(e){var t=De;try{return De=!0,e()}finally{De=t}}const ku=-7169;function ee(e,t){e.f=e.f&ku|t}function ke(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Qe in e)bo(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Qe in n&&bo(n)}}}function bo(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{bo(e[r],t)}catch{}const n=Bo(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=pa(n);for(let o in r){const s=r[o].get;if(s)try{s.call(e)}catch{}}}}}const Gu=["touchstart","touchmove"];function Lu(e){return Gu.includes(e)}const Uu=new Set,Ls=new Set;function Ou(e,t,n,r={}){function o(s){if(r.capture||Dn.call(t,s),!s.cancelBubble)return mn(()=>n?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Mt(()=>{t.addEventListener(e,o,r)}):t.addEventListener(e,o,r),o}function on(e,t,n,r,o){var s={capture:r,passive:o},a=Ou(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&gr(()=>{t.removeEventListener(e,a,s)})}let Us=null;function Dn(e){var t=this,n=t.ownerDocument,r=e.type,o=e.composedPath?.()||[],s=o[0]||e.target;Us=e;var a=0,i=Us===e&&e.__root;if(i){var l=o.indexOf(i);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=o.indexOf(t);if(c===-1)return;l<=c&&(a=l)}if(s=o[a]||e.target,s!==t){wc(e,"currentTarget",{configurable:!0,get(){return s||n}});var u=G,d=O;fe(null),Ne(null);try{for(var f,h=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+r];_!=null&&(!s.disabled||e.target===s)&&_.call(s,e)}catch(v){f?h.push(v):f=v}if(e.cancelBubble||m===t||m===null)break;s=m}if(f){for(let v of h)queueMicrotask(()=>{throw v});throw f}}finally{e.__root=t,delete e.currentTarget,fe(u),Ne(d)}}}function Vu(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Wa(e,t){var n=O;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function ne(e,t){var n=(t&nu)!==0,r,o=!e.startsWith("<!>");return()=>{r===void 0&&(r=Vu(o?e:"<!>"+e),r=Go(r));var s=n||Ba?document.importNode(r,!0):r.cloneNode(!0);return Wa(s,s),s}}function ae(){var e=document.createDocumentFragment(),t=document.createComment(""),n=lt();return e.append(t,n),Wa(t,n),e}function L(e,t){e!==null&&e.before(t)}let Eo=!0;function Je(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Hu(e,t){return zu(e,t)}const Wt=new Map;function zu(e,{target:t,anchor:n,props:r={},events:o,context:s,intro:a=!0}){yu();var i=new Set,l=d=>{for(var f=0;f<d.length;f++){var h=d[f];if(!i.has(h)){i.add(h);var m=Lu(h);t.addEventListener(h,Dn,{passive:m});var _=Wt.get(h);_===void 0?(document.addEventListener(h,Dn,{passive:m}),Wt.set(h,1)):Wt.set(h,_+1)}}};l(vr(Uu)),Ls.add(l);var c=void 0,u=wu(()=>{var d=n??t.appendChild(lt());return mu(d,{pending:()=>{}},f=>{if(s){pe({});var h=$;h.c=s}o&&(r.$$events=o),Eo=a,c=e(f,r)||{},Eo=!0,s&&xe()}),()=>{for(var f of i){t.removeEventListener(f,Dn);var h=Wt.get(f);--h===0?(document.removeEventListener(f,Dn),Wt.delete(f)):Wt.set(f,h)}Ls.delete(l),d!==n&&d.parentNode?.removeChild(d)}});return Xu.set(c,u),c}let Xu=new WeakMap;class ja{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#s=()=>{var t=z;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)Uo(r),this.#n.delete(n);else{var o=this.#r.get(n);o&&(this.#t.set(n,o.effect),this.#r.delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,a]of this.#e){if(this.#e.delete(s),s===t)break;const i=this.#r.get(a);i&&(de(i.effect),this.#r.delete(a))}for(const[s,a]of this.#t){if(s===n||this.#n.has(s))continue;const i=()=>{if(Array.from(this.#e.values()).includes(s)){var c=document.createDocumentFragment();Ha(a,c),c.append(lt()),this.#r.set(s,{effect:a,fragment:c})}else de(a);this.#n.delete(s),this.#t.delete(s)};this.#l||!r?(this.#n.add(s),At(a,i,!1)):i()}}};#o=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,o]of this.#r)n.includes(r)||(de(o.effect),this.#r.delete(r))};ensure(t,n){var r=z,o=Ma();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(o){var s=document.createDocumentFragment(),a=lt();s.append(a),this.#r.set(t,{effect:ge(()=>n(a)),fragment:s})}else this.#t.set(t,ge(()=>n(this.anchor)));if(this.#e.set(r,t),o){for(const[i,l]of this.#t)i===t?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[i,l]of this.#r)i===t?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#s),r.ondiscard(this.#o)}else this.#s()}}function se(e,t,n=!1){var r=new ja(e),o=n?ft:0;function s(a,i){r.ensure(a,i)}Rr(()=>{var a=!1;t((i,l=!0)=>{a=!0,s(l,i)}),a||s(!1,null)},o)}function $u(e,t,n){for(var r=[],o=t.length,s,a=t.length,i=0;i<o;i++){let d=t[i];At(d,()=>{if(s){if(s.pending.delete(d),s.done.add(d),s.pending.size===0){var f=e.outrogroups;go(vr(s.done)),f.delete(s),f.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var l=r.length===0&&n!==null;if(l){var c=n,u=c.parentNode;Ru(u),u.append(c),e.items.clear()}go(t,!l)}else s={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(s)}function go(e,t=!0){for(var n=0;n<e.length;n++)de(e[n],t)}var Os;function yo(e,t,n,r,o,s=null){var a=e,i=new Map,l=(t&ga)!==0;if(l){var c=e;a=c.appendChild(lt())}var u=null,d=ot(()=>{var x=n();return _r(x)?x:x==null?[]:vr(x)}),f,h=!0;function m(){v.fallback=u,qu(v,f,a,t,r),u!==null&&(f.length===0?(u.f&We)===0?Uo(u):(u.f^=We,Mn(u,null,a)):At(u,()=>{u=null}))}var _=Rr(()=>{f=p(d);for(var x=f.length,g=new Set,E=z,R=Ma(),b=0;b<x;b+=1){var T=f[b],F=r(T,b),I=h?null:i.get(F);I?(I.v&&Ct(I.v,T),I.i&&Ct(I.i,b),R&&E.skipped_effects.delete(I.e)):(I=Yu(i,h?a:Os??=lt(),T,F,b,o,t,n),h||(I.e.f|=We),i.set(F,I)),g.add(F)}if(x===0&&s&&!u&&(h?u=ge(()=>s(a)):(u=ge(()=>s(Os??=lt())),u.f|=We)),!h)if(R){for(const[y,A]of i)g.has(y)||E.skipped_effects.add(A.e);E.oncommit(m),E.ondiscard(()=>{})}else m();p(d)}),v={effect:_,items:i,outrogroups:null,fallback:u};h=!1}function qu(e,t,n,r,o){var s=(r&Kc)!==0,a=t.length,i=e.items,l=e.effect.first,c,u=null,d,f=[],h=[],m,_,v,x;if(s)for(x=0;x<a;x+=1)m=t[x],_=o(m,x),v=i.get(_).e,(v.f&We)===0&&(v.nodes?.a?.measure(),(d??=new Set).add(v));for(x=0;x<a;x+=1){if(m=t[x],_=o(m,x),v=i.get(_).e,e.outrogroups!==null)for(const A of e.outrogroups)A.pending.delete(v),A.done.delete(v);if((v.f&We)!==0)if(v.f^=We,v===l)Mn(v,null,n);else{var g=u?u.next:l;v===e.effect.last&&(e.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),nt(e,u,v),nt(e,v,g),Mn(v,g,n),u=v,f=[],h=[],l=u.next;continue}if((v.f&ve)!==0&&(Uo(v),s&&(v.nodes?.a?.unfix(),(d??=new Set).delete(v))),v!==l){if(c!==void 0&&c.has(v)){if(f.length<h.length){var E=h[0],R;u=E.prev;var b=f[0],T=f[f.length-1];for(R=0;R<f.length;R+=1)Mn(f[R],E,n);for(R=0;R<h.length;R+=1)c.delete(h[R]);nt(e,b.prev,T.next),nt(e,u,b),nt(e,T,E),l=E,u=T,x-=1,f=[],h=[]}else c.delete(v),Mn(v,l,n),nt(e,v.prev,v.next),nt(e,v,u===null?e.effect.first:u.next),nt(e,u,v),u=v;continue}for(f=[],h=[];l!==null&&l!==v;)(c??=new Set).add(l),h.push(l),l=l.next;if(l===null)continue}(v.f&We)===0&&f.push(v),u=v,l=v.next}if(e.outrogroups!==null){for(const A of e.outrogroups)A.pending.size===0&&(go(vr(A.done)),e.outrogroups?.delete(A));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||c!==void 0){var F=[];if(c!==void 0)for(v of c)(v.f&ve)===0&&F.push(v);for(;l!==null;)(l.f&ve)===0&&l!==e.fallback&&F.push(l),l=l.next;var I=F.length;if(I>0){var y=(r&ga)!==0&&a===0?n:null;if(s){for(x=0;x<I;x+=1)F[x].nodes?.a?.measure();for(x=0;x<I;x+=1)F[x].nodes?.a?.fix()}$u(e,F,y)}}s&&Mt(()=>{if(d!==void 0)for(v of d)v.nodes?.a?.apply()})}function Yu(e,t,n,r,o,s,a,i){var l=(a&qc)!==0?(a&Wc)===0?N(n,!1,!1):Bt(n):null,c=(a&Yc)!==0?Bt(o):null;return{v:l,i:c,e:ge(()=>(s(t,l??n,c??o,i),()=>{e.delete(r)}))}}function Mn(e,t,n){if(e.nodes)for(var r=e.nodes.start,o=e.nodes.end,s=t&&(t.f&We)===0?t.nodes.start:n;r!==null;){var a=zn(r);if(s.before(r),r===o)return;r=a}}function nt(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function Et(e,t,n){var r=new ja(e);Rr(()=>{var o=t()??null;r.ensure(o,o&&(s=>n(s,o)))},ft)}const Ku=()=>performance.now(),Ke={tick:e=>requestAnimationFrame(e),now:()=>Ku(),tasks:new Set};function Qa(){const e=Ke.now();Ke.tasks.forEach(t=>{t.c(e)||(Ke.tasks.delete(t),t.f())}),Ke.tasks.size!==0&&Ke.tick(Qa)}function Wu(e){let t;return Ke.tasks.size===0&&Ke.tick(Qa),{promise:new Promise(n=>{Ke.tasks.add(t={c:e,f:n})}),abort(){Ke.tasks.delete(t)}}}function Kn(e,t){mn(()=>{e.dispatchEvent(new CustomEvent(t))})}function ju(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Vs(e){const t={},n=e.split(";");for(const r of n){const[o,s]=r.split(":");if(!o||s===void 0)break;const a=ju(o.trim());t[a]=s.trim()}return t}const Qu=e=>e;function Zu(e,t,n,r){var o=(e&tu)!==0,s="both",a,i=t.inert,l=t.style.overflow,c,u;function d(){return mn(()=>a??=n()(t,r?.()??{},{direction:s}))}var f={is_global:o,in(){t.inert=i,Kn(t,"introstart"),c=Ro(t,d(),u,1,()=>{Kn(t,"introend"),c?.abort(),c=a=void 0,t.style.overflow=l})},out(v){t.inert=!0,Kn(t,"outrostart"),u=Ro(t,d(),c,0,()=>{Kn(t,"outroend"),v?.()})},stop:()=>{c?.abort(),u?.abort()}},h=O;if((h.nodes.t??=[]).push(f),Eo){var m=o;if(!m){for(var _=h.parent;_&&(_.f&ft)!==0;)for(;(_=_.parent)&&(_.f&Ue)===0;);m=!_||(_.f&br)!==0}m&&Lo(()=>{Fe(()=>f.in())})}}function Ro(e,t,n,r,o){var s=r===1;if(Bc(t)){var a,i=!1;return Mt(()=>{if(!i){var v=t({direction:s?"in":"out"});a=Ro(e,v,n,r,o)}}),{abort:()=>{i=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(n?.deactivate(),!t?.duration)return o(),{abort:Pn,deactivate:Pn,reset:Pn,t:()=>r};const{delay:l=0,css:c,tick:u,easing:d=Qu}=t;var f=[];if(s&&n===void 0&&(u&&u(0,1),c)){var h=Vs(c(0,1));f.push(h,h)}var m=()=>1-r,_=e.animate(f,{duration:l,fill:"forwards"});return _.onfinish=()=>{_.cancel();var v=n?.t()??1-r;n?.abort();var x=r-v,g=t.duration*Math.abs(x),E=[];if(g>0){var R=!1;if(c)for(var b=Math.ceil(g/16.666666666666668),T=0;T<=b;T+=1){var F=v+x*d(T/b),I=Vs(c(F,1-F));E.push(I),R||=I.overflow==="hidden"}R&&(e.style.overflow="hidden"),m=()=>{var y=_.currentTime;return v+x*d(y/g)},u&&Wu(()=>{if(_.playState!=="running")return!1;var y=m();return u(y,1-y),!0})}_=e.animate(E,{duration:g,fill:"forwards"}),_.onfinish=()=>{m=()=>r,u?.(r,1-r),o()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=Pn)},deactivate:()=>{o=Pn},reset:()=>{r===0&&u?.(1,0)},t:()=>m()}}const Hs=[...` 	
\r\fÂ \v\uFEFF`];function Ju(e,t,n){var r=e==null?"":""+e;if(n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,a=0;(a=r.indexOf(o,a))>=0;){var i=a+s;(a===0||Hs.includes(r[a-1]))&&(i===r.length||Hs.includes(r[i]))?r=(a===0?"":r.substring(0,a))+r.substring(i+1):a=i}}return r===""?null:r}function So(e,t,n,r,o,s){var a=e.__className;if(a!==n||a===void 0){var i=Ju(n,r,s);i==null?e.removeAttribute("class"):e.className=i,e.__className=n}else if(s&&o!==s)for(var l in s){var c=!!s[l];(o==null||c!==!!o[l])&&e.classList.toggle(l,c)}return s}function Za(e,t,n=!1){if(e.multiple){if(t==null)return;if(!_r(t))return ou();for(var r of e.options)r.selected=t.includes(kn(r));return}for(r of e.options){var o=kn(r);if(gu(o,t)){r.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ef(e){var t=new MutationObserver(()=>{Za(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),gr(()=>{t.disconnect()})}function zs(e,t,n=t){var r=new WeakSet,o=!0;Tu(e,"change",s=>{var a=s?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(a),kn);else{var l=e.querySelector(a)??e.querySelector("option:not([disabled])");i=l&&kn(l)}n(i),z!==null&&r.add(z)}),Lo(()=>{var s=t();if(e===document.activeElement){var a=tr??z;if(r.has(a))return}if(Za(e,s,o),o&&s===void 0){var i=e.querySelector(":checked");i!==null&&(s=kn(i),n(s))}e.__value=s,o=!1}),ef(e)}function kn(e){return"__value"in e?e.__value:e.value}const tf=Symbol("is custom element"),nf=Symbol("is html");function rf(e,t){var n=Oo(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function of(e,t){var n=Oo(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function nr(e,t,n,r){var o=Oo(e);o[t]!==(o[t]=n)&&(t==="loading"&&(e[Nc]=n),n==null?e.removeAttribute(t):typeof n!="string"&&sf(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Oo(e){return e.__attributes??={[tf]:e.nodeName.includes("-"),[nf]:e.namespaceURI===ru}}var Xs=new Map;function sf(e){var t=e.getAttribute("is")||e.nodeName,n=Xs.get(t);if(n)return n;Xs.set(t,n=[]);for(var r,o=e,s=Element.prototype;s!==o;){r=pa(o);for(var a in r)r[a].set&&n.push(a);o=Bo(o)}return n}function af(e,t,n){var r=Tt(e,t);r&&r.set&&(e[t]=n,gr(()=>{e[t]=null}))}function $s(e,t){return e===t||e?.[Qe]===t}function so(e={},t,n,r){return Lo(()=>{var o,s;return yr(()=>{o=s,s=[],Fe(()=>{e!==n(...s)&&(t(e,...s),o&&$s(n(...o),e)&&t(null,...o))})}),()=>{Mt(()=>{s&&$s(n(...s),e)&&t(null,...s)})}}),e}function Ve(e=!1){const t=$,n=t.l.u;if(!n)return;let r=()=>ke(t.s);if(e){let o=0,s={};const a=Er(()=>{let i=!1;const l=t.s;for(const c in l)l[c]!==s[c]&&(s[c]=l[c],i=!0);return i&&o++,o});r=()=>p(a)}n.b.length&&Fu(()=>{qs(t,r),mo(n.b)}),xo(()=>{const o=Fe(()=>n.m.map(Cc));return()=>{for(const s of o)typeof s=="function"&&s()}}),n.a.length&&xo(()=>{qs(t,r),mo(n.a)})}function qs(e,t){if(e.l.s)for(const n of e.l.s)p(n);t()}let Wn=!1;function lf(e){var t=Wn;try{return Wn=!1,[e(),Wn]}finally{Wn=t}}function Y(e,t,n,r){var o=!hn||(n&Qc)!==0,s=(n&Jc)!==0,a=(n&eu)!==0,i=r,l=!0,c=()=>(l&&(l=!1,i=a?Fe(r):r),i),u;if(s){var d=Qe in e||Mc in e;u=Tt(e,t)?.set??(d&&t in e?E=>e[t]=E:void 0)}var f,h=!1;s?[f,h]=lf(()=>e[t]):f=e[t],f===void 0&&r!==void 0&&(f=c(),u&&(o&&Vc(),u(f)));var m;if(o?m=()=>{var E=e[t];return E===void 0?c():(l=!0,E)}:m=()=>{var E=e[t];return E!==void 0&&(i=void 0),E===void 0?i:E},o&&(n&Zc)===0)return m;if(u){var _=e.$$legacy;return(function(E,R){return arguments.length>0?((!o||!R||_||h)&&u(R?m():E),E):m()})}var v=!1,x=((n&jc)!==0?Er:ot)(()=>(v=!1,m()));s&&p(x);var g=O;return(function(E,R){if(arguments.length>0){const b=R?p(x):o&&s?rn(E):E;return S(x,b),v=!0,i!==void 0&&(i=b),E}return Gt&&v||(g.f&je)!==0?x.v:p(x)})}function Ja(e){$===null&&Mo(),hn&&$.l!==null?ff($).m.push(e):xo(()=>{const t=Fe(e);if(typeof t=="function")return t})}function cf(e){$===null&&Mo(),Ja(()=>()=>Fe(e))}function uf(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function Vo(){const e=$;return e===null&&Mo(),(t,n,r)=>{const o=e.s.$$events?.[t];if(o){const s=_r(o)?o.slice():[o],a=uf(t,n,r);for(const i of s)i.call(e.x,a);return!a.defaultPrevented}return!0}}function ff(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const df="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(df);lu();let Ho=Float32Array;function zo(e,t,n){const r=new Ho(3);return e&&(r[0]=e),t&&(r[1]=t),n&&(r[2]=n),r}function hf(e,t,n){return n=n||new Ho(3),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function mf(e,t,n){return n=n||new Ho(3),n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}let el=Float32Array;function _f(e){return e=e||new el(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vf(e,t){t=t||new el(16);const n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],i=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],m=e[12],_=e[13],v=e[14],x=e[15],g=f*x,E=v*h,R=l*x,b=v*c,T=l*h,F=f*c,I=o*x,y=v*s,A=o*h,C=f*s,K=o*c,Z=l*s,me=u*_,be=m*d,Pe=a*_,Xe=m*i,$e=a*d,qe=u*i,pt=n*_,Lt=m*r,Ut=n*d,Ot=u*r,xt=n*i,bt=a*r,En=g*i+b*d+T*_-(E*i+R*d+F*_),gn=E*r+I*d+C*_-(g*r+y*d+A*_),Vt=R*r+y*i+K*_-(b*r+I*i+Z*_),qn=F*r+A*i+Z*d-(T*r+C*i+K*d),Q=1/(n*En+a*gn+u*Vt+m*qn);return t[0]=Q*En,t[1]=Q*gn,t[2]=Q*Vt,t[3]=Q*qn,t[4]=Q*(E*a+R*u+F*m-(g*a+b*u+T*m)),t[5]=Q*(g*n+y*u+A*m-(E*n+I*u+C*m)),t[6]=Q*(b*n+I*a+Z*m-(R*n+y*a+K*m)),t[7]=Q*(T*n+C*a+K*u-(F*n+A*a+Z*u)),t[8]=Q*(me*c+Xe*h+$e*x-(be*c+Pe*h+qe*x)),t[9]=Q*(be*s+pt*h+Ot*x-(me*s+Lt*h+Ut*x)),t[10]=Q*(Pe*s+Lt*c+xt*x-(Xe*s+pt*c+bt*x)),t[11]=Q*(qe*s+Ut*c+bt*h-($e*s+Ot*c+xt*h)),t[12]=Q*(Pe*f+qe*v+be*l-($e*v+me*l+Xe*f)),t[13]=Q*(Ut*v+me*o+Lt*f-(pt*f+Ot*v+be*o)),t[14]=Q*(pt*l+bt*v+Xe*o-(xt*v+Pe*o+Lt*l)),t[15]=Q*(xt*f+$e*o+Ot*l-(Ut*l+bt*f+qe*o)),t}function pf(e,t,n){n=n||zo();const r=t[0],o=t[1],s=t[2],a=r*e[3]+o*e[7]+s*e[11]+e[15];return n[0]=(r*e[0]+o*e[4]+s*e[8]+e[12])/a,n[1]=(r*e[1]+o*e[5]+s*e[9]+e[13])/a,n[2]=(r*e[2]+o*e[6]+s*e[10]+e[14])/a,n}function xf(e,t,n){n=n||zo();const r=t[0],o=t[1],s=t[2];return n[0]=r*e[0]+o*e[4]+s*e[8],n[1]=r*e[1]+o*e[5]+s*e[9],n[2]=r*e[2]+o*e[6]+s*e[10],n}const Xo=5120,Un=5121,$o=5122,qo=5123,Yo=5124,Ko=5125,Wo=5126,bf=32819,Ef=32820,gf=33635,yf=5131,Rf=33640,Sf=35899,Tf=35902,Af=36269,Ff=34042,tl={};{const e=tl;e[Xo]=Int8Array,e[Un]=Uint8Array,e[$o]=Int16Array,e[qo]=Uint16Array,e[Yo]=Int32Array,e[Ko]=Uint32Array,e[Wo]=Float32Array,e[bf]=Uint16Array,e[Ef]=Uint16Array,e[gf]=Uint16Array,e[yf]=Uint16Array,e[Rf]=Uint32Array,e[Sf]=Uint32Array,e[Tf]=Uint32Array,e[Af]=Uint32Array,e[Ff]=Uint32Array}function Sr(e){if(e instanceof Int8Array)return Xo;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return Un;if(e instanceof Int16Array)return $o;if(e instanceof Uint16Array)return qo;if(e instanceof Int32Array)return Yo;if(e instanceof Uint32Array)return Ko;if(e instanceof Float32Array)return Wo;throw new Error("unsupported typed array type")}function nl(e){if(e===Int8Array)return Xo;if(e===Uint8Array||e===Uint8ClampedArray)return Un;if(e===Int16Array)return $o;if(e===Uint16Array)return qo;if(e===Int32Array)return Yo;if(e===Uint32Array)return Ko;if(e===Float32Array)return Wo;throw new Error("unsupported typed array type")}function rl(e){const t=tl[e];if(!t)throw new Error("unknown gl type");return t}const On=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function wf(e,t,n){e.forEach(function(r){const o=t[r];o!==void 0&&(n[r]=o)})}function ol(...e){console.error(...e)}const Ys=new Map;function Tr(e,t){if(!e||typeof e!="object")return!1;let n=Ys.get(t);n||(n=new WeakMap,Ys.set(t,n));let r=n.get(e);if(r===void 0){const o=Object.prototype.toString.call(e);r=o.substring(8,o.length-1)===t,n.set(e,r)}return r}function Pf(e,t){return typeof WebGLBuffer<"u"&&Tr(t,"WebGLBuffer")}function sl(e,t){return typeof WebGLRenderbuffer<"u"&&Tr(t,"WebGLRenderbuffer")}function Ar(e,t){return typeof WebGLTexture<"u"&&Tr(t,"WebGLTexture")}function If(e,t){return typeof WebGLSampler<"u"&&Tr(t,"WebGLSampler")}const il=35044,ct=34962,al=34963,Bf=34660,Cf=5120,Df=5121,Mf=5122,Nf=5123,kf=5124,Gf=5125,ll=5126,cl={attribPrefix:""};function Lf(e,t,n,r,o){e.bindBuffer(t,n),e.bufferData(t,r,o||il)}function jo(e,t,n,r){if(Pf(e,t))return t;n=n||ct;const o=e.createBuffer();return Lf(e,n,o,t,r),o}function ul(e){return e==="indices"}function Uf(e){return e===Int8Array||e===Uint8Array}function Qo(e){return e.length?e:e.data}const Of=/coord|texture/i,Vf=/color|colour/i;function Hf(e,t){let n;if(Of.test(e)?n=2:Vf.test(e)?n=4:n=3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function Zo(e,t,n){return e.numComponents||e.size||Hf(t,n||Qo(e).length)}function Fr(e,t){if(On(e))return e;if(On(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type?Jo(e.type):void 0;return n||(ul(t)?n=Uint16Array:n=Float32Array),new n(e.data)}function zf(e){return typeof e=="number"?e:e?nl(e):ll}function Jo(e){return typeof e=="number"?rl(e):e||Float32Array}function Xf(e,t){return{buffer:t.buffer,numValues:24,type:zf(t.type),arrayType:Jo(t.type)}}function $f(e,t){const n=t.data||t,r=Jo(t.type),o=n*r.BYTES_PER_ELEMENT,s=e.createBuffer();return e.bindBuffer(ct,s),e.bufferData(ct,o,t.drawType||il),{buffer:s,numValues:n,type:nl(r),arrayType:r}}function qf(e,t,n){const r=Fr(t,n);return{arrayType:r.constructor,buffer:jo(e,r,void 0,t.drawType),type:Sr(r),numValues:0}}function Yf(e,t){const n={};return Object.keys(t).forEach(function(r){if(!ul(r)){const o=t[r],s=o.attrib||o.name||o.attribName||cl.attribPrefix+r;if(o.value){if(!Array.isArray(o.value)&&!On(o.value))throw new Error("array.value is not array or typedarray");n[s]={value:o.value}}else{let a;o.buffer&&o.buffer instanceof WebGLBuffer?a=Xf:typeof o=="number"||typeof o.data=="number"?a=$f:a=qf;const{buffer:i,type:l,numValues:c,arrayType:u}=a(e,o,r),d=o.normalize!==void 0?o.normalize:Uf(u),f=Zo(o,r,c);n[s]={buffer:i,numComponents:f,type:l,normalize:d,stride:o.stride||0,offset:o.offset||0,divisor:o.divisor===void 0?void 0:o.divisor,drawType:o.drawType}}}}),e.bindBuffer(ct,null),n}function Kf(e,t){return t===Cf||t===Df?1:t===Mf||t===Nf?2:t===kf||t===Gf||t===ll?4:0}const sn=["position","positions","a_position"];function Wf(e){let t,n;for(n=0;n<sn.length&&(t=sn[n],!(t in e));++n);n===sn.length&&(t=Object.keys(e)[0]);const r=e[t],o=Qo(r).length;if(o===void 0)return 1;const s=Zo(r,t),a=o/s;if(o%s>0)throw new Error(`numComponents ${s} not correct for length ${o}`);return a}function jf(e,t){let n,r;for(r=0;r<sn.length&&(n=sn[r],!(n in t||(n=cl.attribPrefix+n,n in t)));++r);r===sn.length&&(n=Object.keys(t)[0]);const o=t[n];if(!o.buffer)return 1;e.bindBuffer(ct,o.buffer);const s=e.getBufferParameter(ct,Bf);e.bindBuffer(ct,null);const a=Kf(e,o.type),i=s/a,l=o.numComponents||o.size,c=i/l;if(c%1!==0)throw new Error(`numComponents ${l} not correct for length ${length}`);return c}function Qf(e,t,n){const r=Yf(e,t),o=Object.assign({},n||{});o.attribs=Object.assign({},n?n.attribs:{},r);const s=t.indices;if(s){const a=Fr(s,"indices");o.indices=jo(e,a,al),o.numElements=a.length,o.elementType=Sr(a)}else o.numElements||(o.numElements=jf(e,o.attribs));return o}function Zf(e,t,n){const r=n==="indices"?al:ct,o=Fr(t,n);return jo(e,o,r)}function Jf(e,t){const n={};return Object.keys(t).forEach(function(r){n[r]=Zf(e,t[r],r)}),t.indices?(n.numElements=t.indices.length,n.elementType=Sr(Fr(t.indices))):n.numElements=Wf(t),n}const Rt=Qo,ed=Zo;function fl(e,t){let n=0;return e.push=function(){for(let r=0;r<arguments.length;++r){const o=arguments[r];if(o instanceof Array||On(o))for(let s=0;s<o.length;++s)e[n++]=o[s];else e[n++]=o}},e.reset=function(r){n=r||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function D(e,t,n){const r=n||Float32Array;return fl(new r(e*t),e)}function td(e){return e!=="indices"}function nd(e){const t=e.indices,n={},r=t.length;function o(s){const a=e[s],i=a.numComponents,l=D(i,r,a.constructor);for(let c=0;c<r;++c){const d=t[c]*i;for(let f=0;f<i;++f)l.push(a[d+f])}n[s]=l}return Object.keys(e).filter(td).forEach(o),n}function rd(e){if(e.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const t=e.normal,n=t.length;for(let r=0;r<n;r+=9){const o=t[r+0],s=t[r+1],a=t[r+2],i=t[r+3],l=t[r+4],c=t[r+5],u=t[r+6],d=t[r+7],f=t[r+8];let h=o+i+u,m=s+l+d,_=a+c+f;const v=Math.sqrt(h*h+m*m+_*_);h/=v,m/=v,_/=v,t[r+0]=h,t[r+1]=m,t[r+2]=_,t[r+3]=h,t[r+4]=m,t[r+5]=_,t[r+6]=h,t[r+7]=m,t[r+8]=_}return e}function es(e,t,n){const r=e.length,o=new Float32Array(3);for(let s=0;s<r;s+=3)n(t,[e[s],e[s+1],e[s+2]],o),e[s]=o[0],e[s+1]=o[1],e[s+2]=o[2]}function od(e,t,n){n=n||zo();const r=t[0],o=t[1],s=t[2];return n[0]=r*e[0]+o*e[1]+s*e[2],n[1]=r*e[4]+o*e[5]+s*e[6],n[2]=r*e[8]+o*e[9]+s*e[10],n}function dl(e,t){return es(e,t,xf),e}function hl(e,t){return es(e,vf(t),od),e}function ml(e,t){return es(e,t,pf),e}function _l(e,t){return Object.keys(e).forEach(function(n){const r=e[n];n.indexOf("pos")>=0?ml(r,t):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?dl(r,t):n.indexOf("norm")>=0&&hl(r,t)}),e}function ts(e,t,n){return e=e||2,t=t||0,n=n||0,e*=.5,{position:{numComponents:2,data:[t+-1*e,n+-1*e,t+1*e,n+-1*e,t+-1*e,n+1*e,t+1*e,n+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function ns(e,t,n,r,o){e=e||1,t=t||1,n=n||1,r=r||1,o=o||_f();const s=(n+1)*(r+1),a=D(3,s),i=D(3,s),l=D(2,s);for(let f=0;f<=r;f++)for(let h=0;h<=n;h++){const m=h/n,_=f/r;a.push(e*m-e*.5,0,t*_-t*.5),i.push(0,1,0),l.push(m,_)}const c=n+1,u=D(3,n*r*2,Uint16Array);for(let f=0;f<r;f++)for(let h=0;h<n;h++)u.push((f+0)*c+h,(f+1)*c+h,(f+0)*c+h+1),u.push((f+1)*c+h,(f+1)*c+h+1,(f+0)*c+h+1);return _l({position:a,normal:i,texcoord:l,indices:u},o)}function rs(e,t,n,r,o,s,a){if(t<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");r=r||0,o=o||Math.PI,s=s||0,a=a||Math.PI*2;const i=o-r,l=a-s,c=(t+1)*(n+1),u=D(3,c),d=D(3,c),f=D(2,c);for(let _=0;_<=n;_++)for(let v=0;v<=t;v++){const x=v/t,g=_/n,E=l*x+s,R=i*g+r,b=Math.sin(E),T=Math.cos(E),F=Math.sin(R),I=Math.cos(R),y=T*F,A=I,C=b*F;u.push(e*y,e*A,e*C),d.push(y,A,C),f.push(1-x,g)}const h=t+1,m=D(3,t*n*2,Uint16Array);for(let _=0;_<t;_++)for(let v=0;v<n;v++)m.push((v+0)*h+_,(v+0)*h+_+1,(v+1)*h+_),m.push((v+1)*h+_,(v+0)*h+_+1,(v+1)*h+_+1);return{position:u,normal:d,texcoord:f,indices:m}}const sd=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function os(e){e=e||1;const t=e/2,n=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],r=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],s=24,a=D(3,s),i=D(3,s),l=D(2,s),c=D(3,12,Uint16Array);for(let u=0;u<6;++u){const d=sd[u];for(let h=0;h<4;++h){const m=n[d[h]],_=r[u],v=o[h];a.push(m),i.push(_),l.push(v)}const f=4*u;c.push(f+0,f+1,f+2),c.push(f+0,f+2,f+3)}return{position:a,normal:i,texcoord:l,indices:c}}function wr(e,t,n,r,o,s,a){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");const i=s===void 0?!0:s,l=a===void 0?!0:a,c=(i?2:0)+(l?2:0),u=(r+1)*(o+1+c),d=D(3,u),f=D(3,u),h=D(2,u),m=D(3,r*(o+c/2)*2,Uint16Array),_=r+1,v=Math.atan2(e-t,n),x=Math.cos(v),g=Math.sin(v),E=i?-2:0,R=o+(l?2:0);for(let b=E;b<=R;++b){let T=b/o,F=n*T,I;b<0?(F=0,T=1,I=e):b>o?(F=n,T=1,I=t):I=e+(t-e)*(b/o),(b===-2||b===o+2)&&(I=0,T=0),F-=n/2;for(let y=0;y<_;++y){const A=Math.sin(y*Math.PI*2/r),C=Math.cos(y*Math.PI*2/r);d.push(A*I,F,C*I),b<0?f.push(0,-1,0):b>o?f.push(0,1,0):I===0?f.push(0,0,0):f.push(A*x,g,C*x),h.push(y/r,1-T)}}for(let b=0;b<o+c;++b)if(!(b===1&&i||b===o+c-2&&l))for(let T=0;T<r;++T)m.push(_*(b+0)+0+T,_*(b+0)+1+T,_*(b+1)+1+T),m.push(_*(b+0)+0+T,_*(b+1)+1+T,_*(b+1)+0+T);return{position:d,normal:f,texcoord:h,indices:m}}function Ks(e,t){t=t||[];const n=[];for(let r=0;r<e.length;r+=4){const o=e[r],s=e.slice(r+1,r+4);s.push.apply(s,t);for(let a=0;a<o;++a)n.push.apply(n,s)}return n}function ss(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],n=Ks([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=Ks([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),o=e.length/3,s={position:D(3,o),texcoord:D(2,o),normal:D(3,o),color:D(4,o,Uint8Array),indices:D(3,o/3,Uint16Array)};s.position.push(e),s.texcoord.push(t),s.normal.push(n),s.color.push(r);for(let a=0;a<o;++a)s.indices.push(a);return s}function Pr(e,t,n,r,o,s,a){if(o<=0)throw new Error("subdivisionDown must be > 0");s=s||0,a=a||1;const i=2,l=a-s,c=(o+1)*2*(2+i),u=D(3,c),d=D(3,c),f=D(2,c);function h(g,E,R){return g+(E-g)*R}function m(g,E,R,b,T,F){for(let I=0;I<=o;I++){const y=E/(i-1),A=I/o,C=(y-.5)*2,K=(s+A*l)*Math.PI,Z=Math.sin(K),me=Math.cos(K),be=h(e,g,Z),Pe=C*r,Xe=me*e,$e=Z*be;u.push(Pe,Xe,$e);const qe=hf(mf([0,Z,me],R),b);d.push(qe),f.push(y*T+F,A)}}for(let g=0;g<i;g++){const E=(g/(i-1)-.5)*2;m(t,g,[1,1,1],[0,0,0],1,0),m(t,g,[0,0,0],[E,0,0],0,0),m(n,g,[1,1,1],[0,0,0],1,0),m(n,g,[0,0,0],[E,0,0],0,1)}const _=D(3,o*2*(2+i),Uint16Array);function v(g,E){for(let R=0;R<o;++R)_.push(g+R+0,g+R+1,E+R+0),_.push(g+R+1,E+R+1,E+R+0)}const x=o+1;return v(x*0,x*4),v(x*5,x*7),v(x*6,x*2),v(x*3,x*1),{position:u,normal:d,texcoord:f,indices:_}}function is(e,t,n,r,o,s){return wr(e,e,t,n,r,o,s)}function as(e,t,n,r,o,s){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0,s=s||Math.PI*2;const a=s-o,i=n+1,l=r+1,c=i*l,u=D(3,c),d=D(3,c),f=D(2,c),h=D(3,n*r*2,Uint16Array);for(let m=0;m<l;++m){const _=m/r,v=_*Math.PI*2,x=Math.sin(v),g=e+x*t,E=Math.cos(v),R=E*t;for(let b=0;b<i;++b){const T=b/n,F=o+T*a,I=Math.sin(F),y=Math.cos(F),A=I*g,C=y*g,K=I*x,Z=y*x;u.push(A,R,C),d.push(K,E,Z),f.push(T,1-_)}}for(let m=0;m<r;++m)for(let _=0;_<n;++_){const v=1+_,x=1+m;h.push(i*m+_,i*x+_,i*m+v),h.push(i*x+_,i*x+v,i*m+v)}return{position:u,normal:d,texcoord:f,indices:h}}function ls(e,t,n,r,o){if(t<3)throw new Error("divisions must be at least 3");n=n||1,o=o||1,r=r||0;const s=(t+1)*(n+1),a=D(3,s),i=D(3,s),l=D(2,s),c=D(3,n*t*2,Uint16Array);let u=0;const d=e-r,f=t+1;for(let h=0;h<=n;++h){const m=r+d*Math.pow(h/n,o);for(let _=0;_<=t;++_){const v=2*Math.PI*_/t,x=m*Math.cos(v),g=m*Math.sin(v);if(a.push(x,0,g),i.push(0,1,0),l.push(1-_/t,h/n),h>0&&_!==t){const E=u+(_+1),R=u+_,b=u+_-f,T=u+(_+1)-f;c.push(E,R,b),c.push(E,b,T)}}u+=t+1}return{position:a,normal:i,texcoord:l,indices:c}}function id(e){return Math.random()*e|0}function ad(e,t){t=t||{};const n=e.position.numElements,r=D(4,n,Uint8Array),o=t.rand||function(s,a){return a<3?id(256):255};if(e.color=r,e.indices)for(let s=0;s<n;++s)r.push(o(s,0),o(s,1),o(s,2),o(s,3));else{const s=t.vertsPerColor||3,a=n/s;for(let i=0;i<a;++i){const l=[o(i,0),o(i,1),o(i,2),o(i,3)];for(let c=0;c<s;++c)r.push(l)}}return e}function He(e){return function(t){const n=e.apply(this,Array.prototype.slice.call(arguments,1));return Jf(t,n)}}function ze(e){return function(t){const n=e.apply(null,Array.prototype.slice.call(arguments,1));return Qf(t,n)}}const ld=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function To(e,t,n,r){r=r||0;const o=e.length;for(let s=0;s<o;++s)t[n+s]=e[s]+r}function vl(e,t){const n=Rt(e),r=new n.constructor(t);let o=r;return n.numComponents&&n.numElements&&fl(r,n.numComponents),e.data&&(o={data:r},wf(ld,e,o)),o}function cd(e){const t={};let n;for(let i=0;i<e.length;++i){const l=e[i];Object.keys(l).forEach(function(c){t[c]||(t[c]=[]),!n&&c!=="indices"&&(n=c);const u=l[c],d=ed(u,c),h=Rt(u).length/d;t[c].push(h)})}function r(i){let l=0,c;for(let u=0;u<e.length;++u){const f=e[u][i],h=Rt(f);l+=h.length,(!c||f.data)&&(c=f)}return{length:l,spec:c}}function o(i,l,c){let u=0,d=0;for(let f=0;f<e.length;++f){const m=e[f][i],_=Rt(m);i==="indices"?(To(_,c,d,u),u+=l[f]):To(_,c,d),d+=_.length}}const s=t[n],a={};return Object.keys(t).forEach(function(i){const l=r(i),c=vl(l.spec,l.length);o(i,s,Rt(c)),a[i]=c}),a}function ud(e){const t={};return Object.keys(e).forEach(function(n){const r=e[n],o=Rt(r),s=vl(r,o.length);To(o,Rt(s),0),t[n]=s}),t}const fd=ze(ss),dd=He(ss),hd=ze(os),md=He(os),_d=ze(ns),vd=He(ns),pd=ze(rs),xd=He(rs),bd=ze(wr),Ed=He(wr),gd=ze(ts),yd=He(ts),pl=ze(Pr),xl=He(Pr),Rd=ze(is),Sd=He(is),Td=ze(as),Ad=He(as),Fd=ze(ls),wd=He(ls),Pd=pl,Id=xl,Bd=Pr;var bl=Object.freeze({__proto__:null,create3DFBufferInfo:fd,create3DFBuffers:dd,create3DFVertices:ss,createAugmentedTypedArray:D,createCubeBufferInfo:hd,createCubeBuffers:md,createCubeVertices:os,createPlaneBufferInfo:_d,createPlaneBuffers:vd,createPlaneVertices:ns,createSphereBufferInfo:pd,createSphereBuffers:xd,createSphereVertices:rs,createTruncatedConeBufferInfo:bd,createTruncatedConeBuffers:Ed,createTruncatedConeVertices:wr,createXYQuadBufferInfo:gd,createXYQuadBuffers:yd,createXYQuadVertices:ts,createCresentBufferInfo:Pd,createCresentBuffers:Id,createCresentVertices:Bd,createCrescentBufferInfo:pl,createCrescentBuffers:xl,createCrescentVertices:Pr,createCylinderBufferInfo:Rd,createCylinderBuffers:Sd,createCylinderVertices:is,createTorusBufferInfo:Td,createTorusBuffers:Ad,createTorusVertices:as,createDiscBufferInfo:Fd,createDiscBuffers:wd,createDiscVertices:ls,deindexVertices:nd,flattenNormals:rd,makeRandomVertexColors:ad,reorientDirections:dl,reorientNormals:hl,reorientPositions:ml,reorientVertices:_l,concatVertices:cd,duplicateVertices:ud});function Xn(e){return!!e.texStorage2D}const El=(function(){const e={},t={};function n(r){const o=r.constructor.name;if(!e[o]){for(const s in r)if(typeof r[s]=="number"){const a=t[r[s]];t[r[s]]=a?`${a} | ${s}`:s}e[o]=!0}}return function(o,s){return n(o),t[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}})(),In=void 0,ht={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},fn=On,gl=(function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}})(),Ws=6406,Ie=6407,q=6408,js=6409,Qs=6410,Bn=6402,Zs=34041,cr=33071,io=9728,ao=9729,Cd=9986,Ge=3553,Le=34067,mt=32879,dt=35866,Ir=34069,Dd=34070,Md=34071,Nd=34072,kd=34073,Gd=34074,ur=10241,fr=10240,dr=10242,hr=10243,Js=32882,Ld=33082,Ud=33083,Od=33084,Vd=33085,Hd=34892,zd=34893,cs=3317,yl=3314,Rl=32878,Sl=3316,Tl=3315,Al=32877,rr=37443,or=37441,sr=37440,Xd=33321,$d=36756,qd=33325,Yd=33326,Kd=33330,Wd=33329,jd=33338,Qd=33337,Zd=33340,Jd=33339,e0=33323,t0=36757,n0=33327,r0=33328,o0=33336,s0=33335,i0=33332,a0=33331,l0=33334,c0=33333,u0=32849,f0=35905,d0=36194,h0=36758,m0=35898,_0=35901,v0=34843,p0=34837,x0=36221,b0=36239,E0=36215,g0=36233,y0=36209,R0=36227,S0=32856,T0=35907,A0=36759,F0=32855,w0=32854,P0=32857,I0=34842,B0=34836,C0=36220,D0=36238,M0=36975,N0=36214,k0=36232,G0=36226,L0=36208,U0=33189,O0=33190,V0=36012,H0=36013,z0=35056,rt=5120,X=5121,jn=5122,jt=5123,Qn=5124,gt=5125,re=5126,ei=32819,ti=32820,ni=33635,Re=5131,Cn=36193,lo=33640,X0=35899,$0=35902,q0=36269,Y0=34042,Zn=33319,Qt=33320,Jn=6403,Zt=36244,Jt=36248,yt=36249,ri=33776,oi=33777,si=33778,ii=33779,ai=35916,li=35917,ci=35918,ui=35919,fi=36196,di=37488,hi=37489,mi=37490,_i=37491,vi=37492,pi=37493,xi=37494,bi=37495,Ei=37496,gi=37497,yi=35840,Ri=35841,Si=35842,Ti=35843,Ai=37808,Fi=37809,wi=37810,Pi=37811,Ii=37812,Bi=37813,Ci=37814,Di=37815,Mi=37816,Ni=37817,ki=37818,Gi=37819,Li=37820,Ui=37821,Oi=37840,Vi=37841,Hi=37842,zi=37843,Xi=37844,$i=37845,qi=37846,Yi=37847,Ki=37848,Wi=37849,ji=37850,Qi=37851,Zi=37852,Ji=37853,ea=36492,ta=36493,na=36494,ra=36495,oa=36283,sa=36284,ia=36285,aa=36286;let co;function vn(e){if(!co){const n={};n[Ws]={textureFormat:Ws,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[X,Re,Cn,re]},n[js]={textureFormat:js,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[X,Re,Cn,re]},n[Qs]={textureFormat:Qs,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[X,Re,Cn,re]},n[Ie]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[X,Re,Cn,re,ni]},n[q]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[X,Re,Cn,re,ei,ti]},n[Bn]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[gt,jt]},n[Xd]={textureFormat:Jn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[X]},n[$d]={textureFormat:Jn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[rt]},n[qd]={textureFormat:Jn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[re,Re]},n[Yd]={textureFormat:Jn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[re]},n[Kd]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[X]},n[Wd]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[rt]},n[i0]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[jt]},n[a0]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[jn]},n[l0]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[gt]},n[c0]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Qn]},n[e0]={textureFormat:Zn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[X]},n[t0]={textureFormat:Zn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[rt]},n[n0]={textureFormat:Zn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[re,Re]},n[r0]={textureFormat:Zn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[re]},n[o0]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[X]},n[s0]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[rt]},n[jd]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[jt]},n[Qd]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[jn]},n[Zd]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[gt]},n[Jd]={textureFormat:Qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Qn]},n[u0]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[X]},n[f0]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[X]},n[d0]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[X,ni]},n[h0]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[rt]},n[m0]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[re,Re,X0]},n[_0]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[re,Re,$0]},n[v0]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[re,Re]},n[p0]={textureFormat:Ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[re]},n[x0]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[X]},n[b0]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[rt]},n[E0]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[jt]},n[g0]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[jn]},n[y0]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[gt]},n[R0]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Qn]},n[S0]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[X]},n[T0]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[X]},n[A0]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[rt]},n[F0]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[X,ti,lo]},n[w0]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[X,ei]},n[P0]={textureFormat:q,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[lo]},n[I0]={textureFormat:q,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[re,Re]},n[B0]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[re]},n[C0]={textureFormat:yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[X]},n[D0]={textureFormat:yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[rt]},n[M0]={textureFormat:yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[lo]},n[N0]={textureFormat:yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[jt]},n[k0]={textureFormat:yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[jn]},n[G0]={textureFormat:yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Qn]},n[L0]={textureFormat:yt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[gt]},n[U0]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[jt,gt]},n[O0]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[gt]},n[V0]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[re]},n[z0]={textureFormat:Zs,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Y0]},n[H0]={textureFormat:Zs,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[q0]},Object.keys(n).forEach(function(s){const a=n[s];a.bytesPerElementMap={},a.bytesPerElement.forEach(function(i,l){const c=a.type[l];a.bytesPerElementMap[c]=i})});const r={bytes:8,width:4,height:4},o={bytes:16,width:4,height:4};n[ri]={textureFormat:ri,colorRenderable:!1,textureFilterable:!0,block:r},n[oi]={textureFormat:oi,colorRenderable:!1,textureFilterable:!0,block:r},n[si]={textureFormat:si,colorRenderable:!1,textureFilterable:!0,block:o},n[ii]={textureFormat:ii,colorRenderable:!1,textureFilterable:!0,block:o},n[ai]={textureFormat:ai,colorRenderable:!1,textureFilterable:!0,block:r},n[li]={textureFormat:li,colorRenderable:!1,textureFilterable:!0,block:r},n[ci]={textureFormat:ci,colorRenderable:!1,textureFilterable:!0,block:o},n[ui]={textureFormat:ui,colorRenderable:!1,textureFilterable:!0,block:o},n[fi]={textureFormat:fi,colorRenderable:!1,textureFilterable:!0,block:r},n[di]={textureFormat:di,colorRenderable:!1,textureFilterable:!0,block:r},n[hi]={textureFormat:hi,colorRenderable:!1,textureFilterable:!0,block:r},n[mi]={textureFormat:mi,colorRenderable:!1,textureFilterable:!0,block:o},n[_i]={textureFormat:_i,colorRenderable:!1,textureFilterable:!0,block:o},n[vi]={textureFormat:vi,colorRenderable:!1,textureFilterable:!0,block:r},n[pi]={textureFormat:pi,colorRenderable:!1,textureFilterable:!0,block:r},n[xi]={textureFormat:xi,colorRenderable:!1,textureFilterable:!0,block:r},n[bi]={textureFormat:bi,colorRenderable:!1,textureFilterable:!0,block:r},n[Ei]={textureFormat:Ei,colorRenderable:!1,textureFilterable:!0,block:o},n[gi]={textureFormat:gi,colorRenderable:!1,textureFilterable:!0,block:o},n[yi]={textureFormat:yi,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},n[Ri]={textureFormat:Ri,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},n[Si]={textureFormat:Si,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},n[Ti]={textureFormat:Ti,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},n[Ai]={textureFormat:Ai,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},n[Fi]={textureFormat:Fi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},n[wi]={textureFormat:wi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},n[Pi]={textureFormat:Pi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},n[Ii]={textureFormat:Ii,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},n[Bi]={textureFormat:Bi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},n[Ci]={textureFormat:Ci,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},n[Di]={textureFormat:Di,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},n[Mi]={textureFormat:Mi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},n[Ni]={textureFormat:Ni,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},n[ki]={textureFormat:ki,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},n[Gi]={textureFormat:Gi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},n[Li]={textureFormat:Li,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},n[Ui]={textureFormat:Ui,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},n[Oi]={textureFormat:Oi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},n[Vi]={textureFormat:Vi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},n[Hi]={textureFormat:Hi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},n[zi]={textureFormat:zi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},n[Xi]={textureFormat:Xi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},n[$i]={textureFormat:$i,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},n[qi]={textureFormat:qi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},n[Yi]={textureFormat:Yi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},n[Ki]={textureFormat:Ki,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},n[Wi]={textureFormat:Wi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},n[ji]={textureFormat:ji,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},n[Qi]={textureFormat:Qi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},n[Zi]={textureFormat:Zi,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},n[Ji]={textureFormat:Ji,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},n[ea]={textureFormat:ea,colorRenderable:!1,textureFilterable:!0,block:o},n[ta]={textureFormat:ta,colorRenderable:!1,textureFilterable:!0,block:o},n[na]={textureFormat:na,colorRenderable:!1,textureFilterable:!0,block:o},n[ra]={textureFormat:ra,colorRenderable:!1,textureFilterable:!0,block:o},n[oa]={textureFormat:oa,colorRenderable:!1,textureFilterable:!0,block:r},n[sa]={textureFormat:sa,colorRenderable:!1,textureFilterable:!0,block:r},n[ia]={textureFormat:ia,colorRenderable:!1,textureFilterable:!0,block:r},n[aa]={textureFormat:aa,colorRenderable:!1,textureFilterable:!0,block:r},co=n}const t=co[e];if(!t)throw new Error("unknown internal format");return t}function Fl(e,t){const r=vn(e).bytesPerElementMap[t];if(r===void 0)throw new Error("type not supported for internal format");return r}function pn(e){const t=vn(e);if(!t)throw new Error("unknown internal format");return{format:t.textureFormat,type:t.type?.[0]??X}}function wl(e){return!!vn(e).block}function K0(e,t){const n=vn(e);return n.block?{blockWidth:n.block.width,blockHeight:n.block.height,bytesPerBlock:n.block.bytes}:{blockWidth:1,blockHeight:1,bytesPerBlock:Fl(e,t)}}function la(e){return(e&e-1)===0}function W0(e,t,n,r){if(!Xn(e))return la(t)&&la(n);const o=vn(r);return o.colorRenderable&&o.textureFilterable}function uo(e){return vn(e).textureFilterable}function Pl(e,t,n){return fn(t)?Sr(t):n||X}function er(e,t,n,r,o){if(o%1!==0)throw new Error("can't guess dimensions");if(!n&&!r){const s=Math.sqrt(o/(t===Le?6:1));s%1===0?(n=s,r=s):(n=o,r=1)}else if(r){if(!n&&(n=o/r,n%1))throw new Error("can't guess dimensions")}else if(r=o/n,r%1)throw new Error("can't guess dimensions");return{width:n,height:r}}function st(e,t,n){let r,o,s;t.colorspaceConversion!==void 0&&(r=e.getParameter(rr),e.pixelStorei(rr,t.colorspaceConversion)),t.premultiplyAlpha!==void 0&&(o=e.getParameter(or),e.pixelStorei(or,t.premultiplyAlpha)),t.flipY!==void 0&&(s=e.getParameter(sr),e.pixelStorei(sr,t.flipY)),n(),r!==void 0&&e.pixelStorei(rr,r),o!==void 0&&e.pixelStorei(or,o),s!==void 0&&e.pixelStorei(sr,s)}function fo(e,t,n,r){const o=t[n];return{[n]:o===void 0?e.getParameter(r):o}}function us(e,t){return{...t,...fo(e,t,"flipY",sr),...fo(e,t,"premultiplyAlpha",or),...fo(e,t,"colorspaceConversion",rr)}}function Il(e){e.pixelStorei(cs,4),Xn(e)&&(e.pixelStorei(yl,0),e.pixelStorei(Rl,0),e.pixelStorei(Sl,0),e.pixelStorei(Tl,0),e.pixelStorei(Al,0))}function j0(e,t,n,r){r.minMag&&(n.call(e,t,ur,r.minMag),n.call(e,t,fr,r.minMag)),r.min&&n.call(e,t,ur,r.min),r.mag&&n.call(e,t,fr,r.mag),r.wrap&&(n.call(e,t,dr,r.wrap),n.call(e,t,hr,r.wrap),(t===mt||If(e,t))&&n.call(e,t,Js,r.wrap)),r.wrapR&&n.call(e,t,Js,r.wrapR),r.wrapS&&n.call(e,t,dr,r.wrapS),r.wrapT&&n.call(e,t,hr,r.wrapT),r.minLod!==void 0&&n.call(e,t,Ld,r.minLod),r.maxLod!==void 0&&n.call(e,t,Ud,r.maxLod),r.baseLevel!==void 0&&n.call(e,t,Od,r.baseLevel),r.maxLevel!==void 0&&n.call(e,t,Vd,r.maxLevel),r.compareFunc!==void 0&&n.call(e,t,zd,r.compareFunc),r.compareMode!==void 0&&n.call(e,t,Hd,r.compareMode)}function Bl(e,t,n){const r=n.target||Ge;e.bindTexture(r,t),j0(e,r,e.texParameteri,n)}function Q0(e){return e=e||ht.textureColor,fn(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function Cl(e,t,{options:n,width:r,height:o,internalFormat:s,lastMipLevelUploaded:a}){n=n||ht.textureOptions,s=s||q;const i=n.target||Ge;if(r=r||n.width,o=o||n.height,e.bindTexture(i,t),a>1){const l=Math.max(1,r>>a),c=Math.max(1,o>>a),u=l===1&&c===1,d=uo(s)?ao:io,f=uo(s)?u?Cd:ao:io;e.texParameteri(i,fr,d),e.texParameteri(i,ur,f)}else if(W0(e,r,o,s))e.generateMipmap(i);else{const l=uo(s)?ao:io;e.texParameteri(i,ur,l),e.texParameteri(i,fr,l),e.texParameteri(i,dr,cr),e.texParameteri(i,hr,cr)}}function ca(e,t,n,r,o,s){Cl(e,t,{options:n,width:r,height:o,internalFormat:s})}function Vn(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function Ao(e,t){return t=t||{},t.cubeFaceOrder||[Ir,Dd,Md,Nd,kd,Gd]}function Fo(e,t){const r=Ao(e,t).map(function(o,s){return{face:o,ndx:s}});return r.sort(function(o,s){return o.face-s.face}),r}function Dl(e,t,n,r){r=r||ht.textureOptions;const o=r.target||Ge,s=r.level||0;let a=n.width,i=n.height;const l=r.internalFormat||r.format||q,c=pn(l),u=r.format||c.format,d=r.type||c.type;if(e.bindTexture(o,t),o===Le){const f=n.width,h=n.height;let m,_;if(f/6===h)m=h,_=[0,0,1,0,2,0,3,0,4,0,5,0];else if(h/6===f)m=f,_=[0,0,0,1,0,2,0,3,0,4,0,5];else if(f/3===h/2)m=f/3,_=[0,0,1,0,2,0,0,1,1,1,2,1];else if(f/2===h/3)m=f/2,_=[0,0,1,0,0,1,1,1,0,2,1,2];else throw new Error(`can't figure out cube map from element: ${n.src?n.src:n.nodeName}`);const v=gl();v?(v.canvas.width=m,v.canvas.height=m,a=m,i=m,st(e,r,()=>{Fo(e,r).forEach(function(x){const g=_[x.ndx*2+0]*m,E=_[x.ndx*2+1]*m;v.drawImage(n,g,E,m,m,0,0,m,m),e.texImage2D(x.face,s,l,u,d,v.canvas)}),v.canvas.width=1,v.canvas.height=1})):typeof createImageBitmap<"u"&&(a=m,i=m,Fo(e,r).forEach(function(x){const g=_[x.ndx*2+0]*m,E=_[x.ndx*2+1]*m;e.texImage2D(x.face,s,l,m,m,0,u,d,null),createImageBitmap(n,g,E,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(R){st(e,r,()=>{e.bindTexture(o,t),e.texImage2D(x.face,s,l,u,d,R),Vn(r)&&ca(e,t,r,a,i,l)})})}))}else o===mt||o===dt?st(e,r,()=>{const f=Math.min(n.width,n.height),h=Math.max(n.width,n.height),m=h/f;if(m%1!==0)throw new Error("can not compute 3D dimensions of element");const _=n.width===h?1:0,v=n.height===h?1:0;e.pixelStorei(cs,1),e.pixelStorei(yl,n.width),e.pixelStorei(Rl,0),e.pixelStorei(Al,0),e.texImage3D(o,s,l,f,f,f,0,u,d,null);for(let x=0;x<m;++x){const g=x*f*_,E=x*f*v;e.pixelStorei(Sl,g),e.pixelStorei(Tl,E),e.texSubImage3D(o,s,0,0,x,f,f,1,u,d,n)}Il(e)}):st(e,r,()=>{e.texImage2D(o,s,l,u,d,n)});Vn(r)&&ca(e,t,r,a,i,l),Bl(e,t,r)}function $n(){}function Z0(e){if(typeof document<"u"){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function J0(e,t){return t===void 0&&!Z0(e)?"anonymous":t}function eh(e,t,n){n=n||$n;let r;if(t=t!==void 0?t:ht.crossOrigin,t=J0(e,t),typeof Image<"u"){r=new Image,t!==void 0&&(r.crossOrigin=t);const o=function(){r.removeEventListener("error",s),r.removeEventListener("load",a),r=null},s=function(){const l="couldn't load image: "+e;ol(l),n(l,r),o()},a=function(){n(null,r),o()};return r.addEventListener("error",s),r.addEventListener("load",a),r.src=e,r}else if(typeof ImageBitmap<"u"){let o,s;const a=function(){n(o,s)},i={};t&&(i.mode="cors"),fetch(e,i).then(function(l){if(!l.ok)throw l;return l.blob()}).then(function(l){return createImageBitmap(l,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(l){s=l,setTimeout(a)}).catch(function(l){o=l,setTimeout(a)}),r=null}return r}function Ml(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function fs(e,t,n){return Ml(e)?(setTimeout(function(){n(null,e)}),e):eh(e,t,n)}function ds(e,t,n){n=n||ht.textureOptions;const r=n.target||Ge;if(e.bindTexture(r,t),n.color===!1)return;const o=Q0(n.color);if(r===Le)for(let s=0;s<6;++s)e.texImage2D(Ir+s,0,q,1,1,0,q,X,o);else r===mt||r===dt?e.texImage3D(r,0,q,1,1,1,0,q,X,o):e.texImage2D(r,0,q,1,1,0,q,X,o)}function th(e,t,n,r){return r=r||$n,n=n||ht.textureOptions,ds(e,t,n),n=us(e,n),fs(n.src,n.crossOrigin,function(s,a){s?r(s,t,a):(Dl(e,t,a,n),r(null,t,a))})}function nh(e,t,n,r){r=r||$n;const o=n.src;if(o.length!==6)throw new Error("there must be 6 urls for a cubemap");const s=n.level||0,a=n.internalFormat||n.format||q,i=pn(a),l=n.format||i.format,c=n.type||X,u=n.target||Ge;if(u!==Le)throw new Error("target must be TEXTURE_CUBE_MAP");ds(e,t,n),n=us(e,n);let d=6;const f=[],h=Ao(e,n);let m;function _(v){return function(x,g){--d,x?f.push(x):g.width!==g.height?f.push("cubemap face img is not a square: "+g.src):st(e,n,()=>{e.bindTexture(u,t),d===5?Ao().forEach(function(E){e.texImage2D(E,s,a,l,c,g)}):e.texImage2D(v,s,a,l,c,g),Vn(n)&&e.generateMipmap(u)}),d===0&&r(f.length?f:void 0,t,m)}}m=o.map(function(v,x){return fs(v,n.crossOrigin,_(h[x]))})}function rh(e,t,n,r){r=r||$n;const o=n.src,s=n.internalFormat||n.format||q,a=pn(s),i=n.format||a.format,l=n.type||X,c=n.target||dt;if(c!==mt&&c!==dt)throw new Error("target must be TEXTURE_3D or TEXTURE_2D_ARRAY");ds(e,t,n),n=us(e,n);let u=o.length;const d=[];let f;const h=n.level||0;let m=n.width,_=n.height;const v=o.length;let x=!0;function g(E){return function(R,b){--u,R?d.push(R):st(e,n,()=>{if(e.bindTexture(c,t),x){x=!1,m=n.width||b.width,_=n.height||b.height,e.texImage3D(c,h,s,m,_,v,0,i,l,null);for(let T=0;T<v;++T)e.texSubImage3D(c,h,0,0,T,m,_,1,i,l,b)}else{let T=b,F;(b.width!==m||b.height!==_)&&(F=gl(),T=F.canvas,F.canvas.width=m,F.canvas.height=_,F.drawImage(b,0,0,m,_)),e.texSubImage3D(c,h,0,0,E,m,_,1,i,l,T),F&&T===F.canvas&&(F.canvas.width=0,F.canvas.height=0)}Vn(n)&&e.generateMipmap(c)}),u===0&&r(d.length?d:void 0,t,f)}}f=o.map(function(E,R){return fs(E,n.crossOrigin,g(R))})}function oh(e,t,n,r){r=r||ht.textureOptions;const o=r.target||Ge;e.bindTexture(o,t);const s=r.level||0,a=r.internalFormat||r.format||q,i=pn(a),l=r.format||i.format,c=r.type||Pl(e,n,i.type);if(fn(n))n instanceof Uint8ClampedArray&&(n=new Uint8Array(n.buffer));else{const _=rl(c);n=new _(n)}const{width:u,height:d,depth:f}=sh(o,n,r,a,l,c),h=wl(a);Il(e),e.pixelStorei(cs,r.unpackAlignment||1);let m=0;return st(e,r,()=>{let _=0;const{blockWidth:v,blockHeight:x,bytesPerBlock:g}=K0(a,c);for(;_<n.byteLength;){const E=Math.max(1,u>>m),R=Math.max(1,d>>m),b=o===Ge?Math.max(1,f>>m):f,T=Math.ceil(E/v),F=Math.ceil(R/x),I=o===Le?6:1,y=T*F*g*b*I;if(_+y>n.byteLength)throw new Error("src size does not match number of mip levels");const A=n.subarray(_/n.BYTES_PER_ELEMENT,(_+y)/n.BYTES_PER_ELEMENT),C=s+m;if(o===Le){const K=A.length/6;Fo(e,r).forEach(Z=>{const me=K*Z.ndx,be=A.subarray(me,me+K);h?e.compressedTexImage2D(Z.face,C,a,E,R,0,be):e.texImage2D(Z.face,C,a,E,R,0,l,c,be)})}else o===mt||o===dt?e.texImage3D(o,C,a,E,R,b,0,l,c,A):h?e.compressedTexImage2D(o,C,a,E,R,0,A):e.texImage2D(o,C,a,E,R,0,l,c,A);if(++m,_+=y,E===1&&R===1&&b===1&&_!==n.byteLength)throw new Error("src size has more data than can fit in mip levels")}}),{width:u,height:d,depth:f,type:c,lastMipLevelUploaded:s+m-1}}function sh(e,t,n,r,o,s){let a=n.width,i=n.height,l=n.depth;const c=wl(r);if(c){if(!a||!i)throw new Error("compressed texture needs to set width and height!");l=l||1}else{const u=Fl(r,s),d=t.byteLength/u;if(d%1)throw new Error(`length wrong size for format: ${El(In,o)}`);if(c&&(!a||!i))throw new Error("compressed texture needs to set width and height!");let f;if(e===mt||e===dt)if(!a&&!i&&!l){const h=Math.cbrt(d);if(h%1!==0)throw new Error(`can't guess cube size of array of numElements: ${d}`);a=h,i=h,l=h}else a&&(!i||!l)?(f=er(In,e,i,l,d/a),i=f.width,l=f.height):i&&(!a||!l)?(f=er(In,e,a,l,d/i),a=f.width,l=f.height):(f=er(In,e,a,i,d/l),a=f.width,i=f.height);else f=er(In,e,a,i,d),a=f.width,i=f.height}return{width:a,height:i,depth:l}}function ih(e,t,n){const r=n.target||Ge;e.bindTexture(r,t);const o=n.level||0,s=n.internalFormat||n.format||q,a=pn(s),i=n.format||a.format,l=n.type||a.type;st(e,n,()=>{if(r===Le)for(let c=0;c<6;++c)e.texImage2D(Ir+c,o,s,n.width,n.height,0,i,l,null);else r===mt||r===dt?e.texImage3D(r,o,s,n.width,n.height,n.depth,0,i,l,null):e.texImage2D(r,o,s,n.width,n.height,0,i,l,null)})}function Nl(e,t,n){n=n||$n,t=t||ht.textureOptions;const r=e.createTexture(),o=t.target||Ge;let s=t.width||1,a=t.height||1,i=0;const l=t.internalFormat||q;e.bindTexture(o,r),o===Le&&(e.texParameteri(o,dr,cr),e.texParameteri(o,hr,cr));let c=t.src;if(c)if(typeof c=="function"&&(c=c(e,t)),typeof c=="string")th(e,r,t,n);else if(fn(c)||Array.isArray(c)&&(typeof c[0]=="number"||Array.isArray(c[0])||fn(c[0]))){const u=oh(e,r,c,t);s=u.width,a=u.height,i=u.lastMipLevelUploaded}else Array.isArray(c)&&(typeof c[0]=="string"||Ml(c[0]))?o===Le?nh(e,r,t,n):rh(e,r,t,n):(Dl(e,r,c,t),s=c.width,a=c.height);else ih(e,r,t);return Vn(t)&&Cl(e,r,{options:t,width:s,height:a,internalFormat:l,lastMipLevelUploaded:i}),Bl(e,r,t),r}function kl(e,t,n,r,o,s){r=r||n.width,o=o||n.height,s=s||n.depth;const a=n.target||Ge;e.bindTexture(a,t);const i=n.level||0,l=n.internalFormat||n.format||q,c=pn(l),u=n.format||c.format;let d;const f=n.src;if(f&&(fn(f)||Array.isArray(f)&&typeof f[0]=="number")?d=n.type||Pl(e,f,c.type):d=n.type||c.type,a===Le)for(let h=0;h<6;++h)e.texImage2D(Ir+h,i,l,r,o,0,u,d,null);else a===mt||a===dt?e.texImage3D(a,i,l,r,o,s,0,u,d,null):e.texImage2D(a,i,l,r,o,0,u,d,null)}const hs=ol;function Gl(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const mr=33984,Br=34962,ah=34963,lh=35713,ch=35714,uh=35632,fh=35633,dh=35981,Ll=35718,hh=35721,mh=35971,_h=35382,vh=35396,ph=35398,xh=35392,bh=35395,Cr=5126,Ul=35664,Ol=35665,Vl=35666,ms=5124,Hl=35667,zl=35668,Xl=35669,$l=35670,ql=35671,Yl=35672,Kl=35673,Wl=35674,jl=35675,Ql=35676,Eh=35678,gh=35680,yh=35679,Rh=35682,Sh=35685,Th=35686,Ah=35687,Fh=35688,wh=35689,Ph=35690,Ih=36289,Bh=36292,Ch=36293,_s=5125,Zl=36294,Jl=36295,ec=36296,Dh=36298,Mh=36299,Nh=36300,kh=36303,Gh=36306,Lh=36307,Uh=36308,Oh=36311,Dr=3553,Mr=34067,vs=32879,Nr=35866,B={};function tc(e,t){return B[t].bindPoint}function Vh(e,t){return function(n){e.uniform1f(t,n)}}function Hh(e,t){return function(n){e.uniform1fv(t,n)}}function zh(e,t){return function(n){e.uniform2fv(t,n)}}function Xh(e,t){return function(n){e.uniform3fv(t,n)}}function $h(e,t){return function(n){e.uniform4fv(t,n)}}function nc(e,t){return function(n){e.uniform1i(t,n)}}function rc(e,t){return function(n){e.uniform1iv(t,n)}}function oc(e,t){return function(n){e.uniform2iv(t,n)}}function sc(e,t){return function(n){e.uniform3iv(t,n)}}function ic(e,t){return function(n){e.uniform4iv(t,n)}}function qh(e,t){return function(n){e.uniform1ui(t,n)}}function Yh(e,t){return function(n){e.uniform1uiv(t,n)}}function Kh(e,t){return function(n){e.uniform2uiv(t,n)}}function Wh(e,t){return function(n){e.uniform3uiv(t,n)}}function jh(e,t){return function(n){e.uniform4uiv(t,n)}}function Qh(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function Zh(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function Jh(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function em(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function tm(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function nm(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function rm(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function om(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function sm(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function ce(e,t,n,r){const o=tc(e,t);return Xn(e)?function(s){let a,i;!s||Ar(e,s)?(a=s,i=null):(a=s.texture,i=s.sampler),e.uniform1i(r,n),e.activeTexture(mr+n),e.bindTexture(o,a),e.bindSampler(n,i)}:function(s){e.uniform1i(r,n),e.activeTexture(mr+n),e.bindTexture(o,s)}}function ue(e,t,n,r,o){const s=tc(e,t),a=new Int32Array(o);for(let i=0;i<o;++i)a[i]=n+i;return Xn(e)?function(i){e.uniform1iv(r,a),i.forEach(function(l,c){e.activeTexture(mr+a[c]);let u,d;!l||Ar(e,l)?(u=l,d=null):(u=l.texture,d=l.sampler),e.bindSampler(n,d),e.bindTexture(s,u)})}:function(i){e.uniform1iv(r,a),i.forEach(function(l,c){e.activeTexture(mr+a[c]),e.bindTexture(s,l)})}}B[Cr]={Type:Float32Array,size:4,setter:Vh,arraySetter:Hh};B[Ul]={Type:Float32Array,size:8,setter:zh,cols:2};B[Ol]={Type:Float32Array,size:12,setter:Xh,cols:3};B[Vl]={Type:Float32Array,size:16,setter:$h,cols:4};B[ms]={Type:Int32Array,size:4,setter:nc,arraySetter:rc};B[Hl]={Type:Int32Array,size:8,setter:oc,cols:2};B[zl]={Type:Int32Array,size:12,setter:sc,cols:3};B[Xl]={Type:Int32Array,size:16,setter:ic,cols:4};B[_s]={Type:Uint32Array,size:4,setter:qh,arraySetter:Yh};B[Zl]={Type:Uint32Array,size:8,setter:Kh,cols:2};B[Jl]={Type:Uint32Array,size:12,setter:Wh,cols:3};B[ec]={Type:Uint32Array,size:16,setter:jh,cols:4};B[$l]={Type:Uint32Array,size:4,setter:nc,arraySetter:rc};B[ql]={Type:Uint32Array,size:8,setter:oc,cols:2};B[Yl]={Type:Uint32Array,size:12,setter:sc,cols:3};B[Kl]={Type:Uint32Array,size:16,setter:ic,cols:4};B[Wl]={Type:Float32Array,size:32,setter:Qh,rows:2,cols:2};B[jl]={Type:Float32Array,size:48,setter:Zh,rows:3,cols:3};B[Ql]={Type:Float32Array,size:64,setter:Jh,rows:4,cols:4};B[Sh]={Type:Float32Array,size:32,setter:em,rows:2,cols:3};B[Th]={Type:Float32Array,size:32,setter:nm,rows:2,cols:4};B[Ah]={Type:Float32Array,size:48,setter:tm,rows:3,cols:2};B[Fh]={Type:Float32Array,size:48,setter:om,rows:3,cols:4};B[wh]={Type:Float32Array,size:64,setter:rm,rows:4,cols:2};B[Ph]={Type:Float32Array,size:64,setter:sm,rows:4,cols:3};B[Eh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Dr};B[gh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Mr};B[yh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:vs};B[Rh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Dr};B[Ih]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Nr};B[Bh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Nr};B[Ch]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Mr};B[Dh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Dr};B[Mh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:vs};B[Nh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Mr};B[kh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Nr};B[Gh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Dr};B[Lh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:vs};B[Uh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Mr};B[Oh]={Type:null,size:0,setter:ce,arraySetter:ue,bindPoint:Nr};function kr(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Br,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||Cr,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function _t(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Br,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||ms,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function Gr(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Br,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||_s,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function ps(e,t,n){const r=n.size,o=n.count;return function(s){e.bindBuffer(Br,s.buffer);const a=s.size||s.numComponents||r,i=a/o,l=s.type||Cr,u=B[l].size*a,d=s.normalize||!1,f=s.offset||0,h=u/o;for(let m=0;m<o;++m)e.enableVertexAttribArray(t+m),e.vertexAttribPointer(t+m,i,l,d,u,f+h*m),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+m,s.divisor||0)}}const W={};W[Cr]={size:4,setter:kr};W[Ul]={size:8,setter:kr};W[Ol]={size:12,setter:kr};W[Vl]={size:16,setter:kr};W[ms]={size:4,setter:_t};W[Hl]={size:8,setter:_t};W[zl]={size:12,setter:_t};W[Xl]={size:16,setter:_t};W[_s]={size:4,setter:Gr};W[Zl]={size:8,setter:Gr};W[Jl]={size:12,setter:Gr};W[ec]={size:16,setter:Gr};W[$l]={size:4,setter:_t};W[ql]={size:8,setter:_t};W[Yl]={size:12,setter:_t};W[Kl]={size:16,setter:_t};W[Wl]={size:4,setter:ps,count:2};W[jl]={size:9,setter:ps,count:3};W[Ql]={size:16,setter:ps,count:4};const im=/ERROR:\s*\d+:(\d+)/gi;function am(e,t="",n=0){const r=[...t.matchAll(im)],o=new Map(r.map((s,a)=>{const i=parseInt(s[1]),l=r[a+1],c=l?l.index:t.length,u=t.substring(s.index,c);return[i-1,u]}));return e.split(`
`).map((s,a)=>{const i=o.get(a);return`${a+1+n}: ${s}${i?`

^^^ ${i}`:""}`}).join(`
`)}const ua=/^[ \t]*\n/;function ac(e){let t=0;return ua.test(e)&&(t=1,e=e.replace(ua,"")),{lineOffset:t,shaderSource:e}}function lm(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function cm(e,t,n,r){if(r=r||hs,!e.getShaderParameter(n,lh)){const s=e.getShaderInfoLog(n),{lineOffset:a,shaderSource:i}=ac(e.getShaderSource(n)),l=`${am(i,s,a)}
Error compiling ${El(e,t)}: ${s}`;return r(l),l}return""}function xs(e,t,n){let r,o,s;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){const c=e;n=c.errorCallback,e=c.attribLocations,r=c.transformFeedbackVaryings,o=c.transformFeedbackMode,s=c.callback}const a=n||hs,i=[],l={errorCallback(c,...u){i.push(c),a(c,...u)},transformFeedbackVaryings:r,transformFeedbackMode:o,callback:s,errors:i};{let c={};Array.isArray(e)?e.forEach(function(u,d){c[u]=t?t[d]:d}):c=e||{},l.attribLocations=c}return l}const um=["VERTEX_SHADER","FRAGMENT_SHADER"];function fm(e,t){if(t.indexOf("frag")>=0)return uh;if(t.indexOf("vert")>=0)return fh}function dm(e,t,n){const r=e.getAttachedShaders(t);for(const o of r)n.has(o)||e.deleteShader(o);e.deleteProgram(t)}const hm=(e=0)=>new Promise(t=>setTimeout(t,e));function mm(e,t,n){const r=e.createProgram(),{attribLocations:o,transformFeedbackVaryings:s,transformFeedbackMode:a}=xs(n);for(let i=0;i<t.length;++i){let l=t[i];if(typeof l=="string"){const c=Gl(l),u=c?c.text:l;let d=e[um[i]];c&&c.type&&(d=fm(e,c.type)||d),l=e.createShader(d),e.shaderSource(l,ac(u).shaderSource),e.compileShader(l)}e.attachShader(r,l)}Object.entries(o).forEach(([i,l])=>e.bindAttribLocation(r,l,i));{let i=s;i&&(i.attribs&&(i=i.attribs),Array.isArray(i)||(i=Object.keys(i)),e.transformFeedbackVaryings(r,i,a||dh))}return e.linkProgram(r),r}function _m(e,t,n,r,o){const s=xs(n,r,o),a=new Set(t),i=mm(e,t,s);function l(c,u){const d=pm(c,u,s.errorCallback);return d&&dm(c,u,a),d}if(s.callback){vm(e,i).then(()=>{const c=l(e,i);s.callback(c,c?void 0:i)});return}return l(e,i)?void 0:i}async function vm(e,t){const n=e.getExtension("KHR_parallel_shader_compile"),r=n?(s,a)=>s.getProgramParameter(a,n.COMPLETION_STATUS_KHR):()=>!0;let o=0;do await hm(o),o=1e3/60;while(!r(e,t))}function pm(e,t,n){if(n=n||hs,!e.getProgramParameter(t,ch)){const o=e.getProgramInfoLog(t);n(`Error in program linking: ${o}`);const a=e.getAttachedShaders(t).map(i=>cm(e,e.getShaderParameter(i,e.SHADER_TYPE),i,n));return`${o}
${a.filter(i=>i).join(`
`)}`}}function xm(e,t,n,r,o){return _m(e,t,n,r,o)}function lc(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const bm=/(\.|\[|]|\w+)/g,Em=e=>e>="0"&&e<="9";function gm(e,t,n,r){const o=e.split(bm).filter(i=>i!=="");let s=0,a="";for(;;){const i=o[s++];a+=i;const l=Em(i[0]),c=l?parseInt(i):i;if(l&&(a+=o[s++]),s===o.length){n[c]=t;break}else{const d=o[s++],f=d==="[",h=n[c]||(f?[]:{});n[c]=h,n=h,r[a]=r[a]||(function(m){return function(_){cc(m,_)}})(h),a+=d}}}function ym(e,t){let n=0;function r(i,l,c){const u=l.name.endsWith("[0]"),d=l.type,f=B[d];if(!f)throw new Error(`unknown type: 0x${d.toString(16)}`);let h;if(f.bindPoint){const m=n;n+=l.size,u?h=f.arraySetter(e,d,m,c,l.size):h=f.setter(e,d,m,c,l.size)}else f.arraySetter&&u?h=f.arraySetter(e,c):h=f.setter(e,c);return h.location=c,h}const o={},s={},a=e.getProgramParameter(t,Ll);for(let i=0;i<a;++i){const l=e.getActiveUniform(t,i);if(lc(l))continue;let c=l.name;c.endsWith("[0]")&&(c=c.substr(0,c.length-3));const u=e.getUniformLocation(t,l.name);if(u){const d=r(t,l,u);o[c]=d,gm(c,d,s,o)}}return o}function Rm(e,t){const n={},r=e.getProgramParameter(t,mh);for(let o=0;o<r;++o){const s=e.getTransformFeedbackVarying(t,o);n[s.name]={index:o,type:s.type,size:s.size}}return n}function Sm(e,t){const n=e.getProgramParameter(t,Ll),r=[],o=[];for(let i=0;i<n;++i){o.push(i),r.push({});const l=e.getActiveUniform(t,i);r[i].name=l.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(i){const l=i[0],c=i[1];e.getActiveUniforms(t,o,e[l]).forEach(function(u,d){r[d][c]=u})});const s={},a=e.getProgramParameter(t,_h);for(let i=0;i<a;++i){const l=e.getActiveUniformBlockName(t,i),c={index:e.getUniformBlockIndex(t,l),usedByVertexShader:e.getActiveUniformBlockParameter(t,i,vh),usedByFragmentShader:e.getActiveUniformBlockParameter(t,i,ph),size:e.getActiveUniformBlockParameter(t,i,xh),uniformIndices:e.getActiveUniformBlockParameter(t,i,bh)};c.used=c.usedByVertexShader||c.usedByFragmentShader,s[l]=c}return{blockSpecs:s,uniformData:r}}function cc(e,t){for(const n in t){const r=e[n];typeof r=="function"?r(t[n]):cc(e[n],t[n])}}function bs(e,...t){const n=e.uniformSetters||e,r=t.length;for(let o=0;o<r;++o){const s=t[o];if(Array.isArray(s)){const a=s.length;for(let i=0;i<a;++i)bs(n,s[i])}else for(const a in s){const i=n[a];i&&i(s[a])}}}function Tm(e,t){const n={},r=e.getProgramParameter(t,hh);for(let o=0;o<r;++o){const s=e.getActiveAttrib(t,o);if(lc(s))continue;const a=e.getAttribLocation(t,s.name),i=W[s.type],l=i.setter(e,a,i);l.location=a,n[s.name]=l}return n}function Am(e,t){for(const n in t){const r=e[n];r&&r(t[n])}}function uc(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(Am(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(ah,n.indices))}function fa(e,t){const n=ym(e,t),r=Tm(e,t),o={program:t,uniformSetters:n,attribSetters:r,uniformLocations:Object.fromEntries(Object.entries(n).map(([s,a])=>[s,a.location])),attribLocations:Object.fromEntries(Object.entries(r).map(([s,a])=>[s,a.location]))};return Xn(e)&&(o.uniformBlockSpec=Sm(e,t),o.transformFeedbackInfo=Rm(e,t)),o}const Fm=/\s|{|}|;/;function wm(e,t,n,r,o){const s=xs(n,r,o),a=[];if(t=t.map(function(c){if(!Fm.test(c)){const u=Gl(c);if(u)c=u.text;else{const d=`no element with id: ${c}`;s.errorCallback(d),a.push(d)}}return c}),a.length)return lm(s,"");const i=s.callback;i&&(s.callback=(c,u)=>{i(c,c?void 0:fa(e,u))});const l=xm(e,t,s);return l?fa(e,l):null}const Pm=4,da=5123;function fc(e,t,n,r,o,s){n=n===void 0?Pm:n;const a=t.indices,i=t.elementType,l=r===void 0?t.numElements:r;o=o===void 0?0:o,i||a?s!==void 0?e.drawElementsInstanced(n,l,i===void 0?da:t.elementType,o,s):e.drawElements(n,l,i===void 0?da:t.elementType,o):s!==void 0?e.drawArraysInstanced(n,o,l,s):e.drawArrays(n,o,l)}const dc=36160,St=36161,Im=3553,Bm=5121,Cm=6402,Dm=6408,Mm=33190,Nm=36012,km=35056,Gm=36013,Lm=32854,Um=32855,Om=36194,hc=33189,mc=6401,_c=36168,Es=34041,wo=36064,Lr=36096,vc=36128,gs=33306,Po=33071,Io=9729,pc=[{format:Dm,type:Bm,min:Io,wrap:Po},{format:Es}],we={};we[Es]=gs;we[mc]=vc;we[_c]=vc;we[Cm]=Lr;we[hc]=Lr;we[Mm]=Lr;we[Nm]=Lr;we[km]=gs;we[Gm]=gs;function Vm(e,t){return we[e]||we[t]}const vt={};vt[Lm]=!0;vt[Um]=!0;vt[Om]=!0;vt[Es]=!0;vt[hc]=!0;vt[mc]=!0;vt[_c]=!0;function Hm(e){return vt[e]}const zm=32;function Xm(e){return e>=wo&&e<wo+zm}function $m(e,t,n,r){const o=dc,s=e.createFramebuffer();e.bindFramebuffer(o,s),n=n||e.drawingBufferWidth,r=r||e.drawingBufferHeight,t=t||pc;const a=[],i={framebuffer:s,attachments:[],width:n,height:r};return t.forEach(function(l,c){let u=l.attachment;const d=l.samples,f=l.format;let h=l.attachmentPoint||Vm(f,l.internalFormat);if(h||(h=wo+c),Xm(h)&&a.push(h),!u)if(d!==void 0||Hm(f))u=e.createRenderbuffer(),e.bindRenderbuffer(St,u),d>1?e.renderbufferStorageMultisample(St,d,f,n,r):e.renderbufferStorage(St,f,n,r);else{const m=Object.assign({},l);m.width=n,m.height=r,m.auto===void 0&&(m.auto=!1,m.min=m.min||m.minMag||Io,m.mag=m.mag||m.minMag||Io,m.wrapS=m.wrapS||m.wrap||Po,m.wrapT=m.wrapT||m.wrap||Po),u=Nl(e,m)}if(sl(e,u))e.framebufferRenderbuffer(o,h,St,u);else if(Ar(e,u))l.layer!==void 0?e.framebufferTextureLayer(o,h,u,l.level||0,l.layer):e.framebufferTexture2D(o,h,l.target||Im,u,l.level||0);else throw new Error("unknown attachment type");i.attachments.push(u)}),e.drawBuffers&&e.drawBuffers(a),i}function qm(e,t,n,r,o){r=r||e.drawingBufferWidth,o=o||e.drawingBufferHeight,t.width=r,t.height=o,n=n||pc,n.forEach(function(s,a){const i=t.attachments[a],l=s.format,c=s.samples;if(c!==void 0||sl(e,i))e.bindRenderbuffer(St,i),c>1?e.renderbufferStorageMultisample(St,c,l,r,o):e.renderbufferStorage(St,l,r,o);else if(Ar(e,i))kl(e,i,s,r,o);else throw new Error("unknown attachment type")})}function ha(e,t,n){n=n||dc,t?(e.bindFramebuffer(n,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(n,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}class j{constructor(t,n,r,o){this.gl=t,this.internalFormat=n,this.format=r,this.texture=Nl(t,{width:t.canvas.width,height:t.canvas.height,internalFormat:n,format:r,type:t.UNSIGNED_BYTE,minMag:o,wrap:t.CLAMP_TO_EDGE}),this.framebufferInfo=$m(t,[{attachment:this.texture}],t.canvas.width,t.canvas.height)}framebufferInfo;texture;get isRGBA8(){return this.internalFormat===this.gl.RGBA8&&this.format===this.gl.RGBA}get isR8(){return this.internalFormat===this.gl.R8&&this.format===this.gl.RED}static createRGBA8(t,n=t.LINEAR){return new j(t,t.RGBA8,t.RGBA,n)}static createRGB8(t,n=t.LINEAR){return new j(t,t.RGB8,t.RGB,n)}static createR8(t,n=t.LINEAR){return new j(t,t.R8,t.RED,n)}resize(t,n){kl(this.gl,this.texture,{width:t,height:n}),qm(this.gl,this.framebufferInfo,[{attachment:this.texture}],t,n)}}class Ym{constructor(t){this.canvas=t;const n=t.getContext("webgl2");if(!n)throw new Error("WebGL2 not available for pipeline");this.gl=n,this.bitmapRenderTarget=j.createRGBA8(n)}passChain=[];bitmapRenderTarget;gl;addPass(t){this.passChain.push(t)}applyBitmap(t,n){this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n)}resize(t,n){this.canvas.width=t,this.canvas.height=n,this.bitmapRenderTarget.resize(t,n)}postprocess(t){}async render(t){(this.canvas.width!==t.width||this.canvas.height!==t.height)&&this.resize(t.width,t.height),this.applyBitmap(this.bitmapRenderTarget.texture,t);const n=this.passChain.filter(a=>a.enabled);if(n.length===0)throw new Error("No passes in pipeline");let r=this.bitmapRenderTarget;for(let a=0;a<n.length-1;a++)r=n[a].apply(r);const s=n[n.length-1].applyToScreen(r)??r;return this.postprocess(s)}}const Km=`#version 300 es

in vec2 position;
in vec2 texcoord;

out vec2 v_uv;

void main() {
  v_uv = texcoord;
  gl_Position = vec4(position, 0.0, 1.0);
}`;class xn{constructor(t,n){this.gl=t,this.settings=n,this.quadBufferInfo=bl.createXYQuadBufferInfo(t)}get enabled(){return this.settings.enabled}set enabled(t){this.settings.enabled=t}quadBufferInfo;apply(t){return this.applyInternal(t,!1)}applyToScreen(t){return this.applyInternal(t,!0)}executeProgram(t,n,r,o=!1){this.settings.input=n.texture,t.uniformSetters.u_texelSize&&this.settings.setTextelSize(n.framebufferInfo.width,n.framebufferInfo.height),r&&!o&&(r.framebufferInfo.width!==this.gl.canvas.width||r.framebufferInfo.height!==this.gl.canvas.height)&&r.resize(this.gl.canvas.width,this.gl.canvas.height);const s=r?r.framebufferInfo.width:this.gl.canvas.width,a=r?r.framebufferInfo.height:this.gl.canvas.height;r?ha(this.gl,r.framebufferInfo):ha(this.gl,null),this.gl.useProgram(t.program),this.gl.viewport(0,0,s,a),uc(this.gl,t,this.quadBufferInfo),bs(t,this.settings.uniforms),fc(this.gl,this.quadBufferInfo)}createProgramInfo(t){return wm(this.gl,[Km,t])}}const Wm=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;        // R8 luma input
uniform vec2      u_texelSize;    // 1 / texture resolution

uniform float u_sigmaSpatial;     // spatial Gaussian sigma
uniform float u_sigmaRange;       // range (luma) Gaussian sigma
uniform int   u_kernelRadius;     // must be <= MAX_KERNEL_RADIUS

out vec4 outColor;

const int MAX_KERNEL_RADIUS = 5;

void main() {

    vec2 uv = v_uv;

    // Center pixel (luma)
    float centerLuma = texture(u_input, uv).r;

    float weightedSum = 0.0;
    float weightTotal = 0.0;

    // Precompute inverse variances
    float invSpatialVar = 1.0 / (2.0 * u_sigmaSpatial * u_sigmaSpatial);
    float invRangeVar   = 1.0 / (2.0 * u_sigmaRange   * u_sigmaRange);

    for (int ky = -MAX_KERNEL_RADIUS; ky <= MAX_KERNEL_RADIUS; ++ky) {
        for (int kx = -MAX_KERNEL_RADIUS; kx <= MAX_KERNEL_RADIUS; ++kx) {

            // Branchless kernel mask
            float maskX = step(float(abs(kx)), float(u_kernelRadius));
            float maskY = step(float(abs(ky)), float(u_kernelRadius));
            float kernelMask = maskX * maskY;

            vec2 offsetTexel =
                vec2(float(kx), float(ky)) * u_texelSize;

            float neighborLuma =
                texture(u_input, uv + offsetTexel).r;

            float spatialDist2 =
                float(kx * kx + ky * ky);

            float rangeDist2 =
                (neighborLuma - centerLuma) *
                (neighborLuma - centerLuma);

            float weightSpatial =
                exp(-spatialDist2 * invSpatialVar);

            float weightRange =
                exp(-rangeDist2 * invRangeVar);

            float kernelWeight =
                weightSpatial * weightRange * kernelMask;

            weightedSum += neighborLuma * kernelWeight;
            weightTotal += kernelWeight;
        }
    }

    float filteredLuma = weightedSum / weightTotal;

    outColor = vec4(filteredLuma,
                    filteredLuma,
                    filteredLuma,
                    1.0);
}
`;class jm extends xn{bilateralProgramInfo;outputRenderTarget;constructor(t,n){super(t,n),this.bilateralProgramInfo=this.createProgramInfo(Wm),this.outputRenderTarget=j.createR8(t)}applyInternal(t,n){if(!t.isR8)throw new Error("BilateralPass only supports R8 render targets");return this.executeProgram(this.bilateralProgramInfo,t,n?null:this.outputRenderTarget),this.outputRenderTarget}}class bn{_enabled=!0;get enabled(){return this._enabled}set enabled(t){this._enabled=t}get input(){return this.uniforms.u_input}set input(t){this.uniforms.u_input=t}get textelSize(){return this.uniforms.u_texelSize}setTextelSize(t,n){this.uniforms.u_texelSize=[1/t,1/n]}uniforms={}}class Qm extends bn{get sigmaSpatial(){return this.uniforms.u_sigmaSpatial}set sigmaSpatial(t){this.uniforms.u_sigmaSpatial=t}get sigmaRange(){return this.uniforms.u_sigmaRange}set sigmaRange(t){this.uniforms.u_sigmaRange=t}get kernelRadius(){return this.uniforms.u_kernelRadius}set kernelRadius(t){this.uniforms.u_kernelRadius=t}}const Zm=`#version 300 es
precision highp float;

in vec2 v_uv;
uniform sampler2D u_input;

out vec4 outColor;

void main() {
    vec3 color = texture(u_input, v_uv).rgb;

    // Rec.709 luma
    float luma = dot(color, vec3(
        0.2126,  // R
        0.7152,  // G
        0.0722   // B
    ));

    outColor = vec4(luma, luma, luma, 1.0);
}
`;class Jm extends xn{lum709ProgramInfo;outputRenderTarget;constructor(t){super(t,new bn),this.lum709ProgramInfo=this.createProgramInfo(Zm),this.outputRenderTarget=j.createR8(t)}applyInternal(t,n){if(!t.isRGBA8)throw new Error("Rec709LumPass only supports RGBA8 render targets");return this.executeProgram(this.lum709ProgramInfo,t,n?null:this.outputRenderTarget),this.outputRenderTarget}}const e_=`#version 300 es
precision highp float;

in vec2 v_uv;
uniform sampler2D u_input;
uniform int u_flipX;
uniform int u_flipY;

out vec4 outColor;

void main() {
    vec2 uv = v_uv;
    if (u_flipX == 1) uv.x = 1.0 - uv.x;
    if (u_flipY == 1) uv.y = 1.0 - uv.y;
    outColor = texture(u_input, uv);
}
`;class t_ extends xn{programInfo;outputRenderTarget;constructor(t,n){super(t,n),this.programInfo=this.createProgramInfo(e_),this.outputRenderTarget=j.createR8(t)}applyInternal(t,n){if(!t.isR8)throw new Error("OrientationPass expects R8 render targets");return this.executeProgram(this.programInfo,t,n?null:this.outputRenderTarget),this.outputRenderTarget}}class n_ extends bn{get flipX(){return!!this.uniforms.u_flipX}set flipX(t){this.uniforms.u_flipX=t?1:0}get flipY(){return!!this.uniforms.u_flipY}set flipY(t){this.uniforms.u_flipY=t?1:0}}const ma=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;
uniform vec2      u_texelSize;

out vec4 outColor;

const float sobelDerivative[5] = float[5](
    -2.0, -1.0, 0.0, 1.0, 2.0
);

const float sobelSmoothing[5] = float[5](
     1.0,  4.0, 6.0, 4.0, 1.0
);

const float SOBEL_G_MAX   = 48.0;
const float SOBEL_MAG_MAX = 51.264022471905186;

float encodeSnorm8(float v)
{
    return clamp(v * 0.5 + 0.5, 0.0, 1.0);
}

vec2 encodeUNorm16(float v)
{
    float x = clamp(v, 0.0, 1.0);
    float hi = floor(x * 65535.0 / 256.0);
    float lo = floor(x * 65535.0 - hi * 256.0);
    return vec2(hi, lo) / 255.0;
}

void main()
{
    float gx = 0.0;
    float gy = 0.0;

    for (int y = 0; y < 5; y++)
    {
        for (int x = 0; x < 5; x++)
        {
            vec2 o = vec2(float(x - 2), float(y - 2)) * u_texelSize;
            float l = texture(u_input, v_uv + o).r;

            gx += l * sobelDerivative[x] * sobelSmoothing[y];
            gy += l * sobelSmoothing[x] * sobelDerivative[y];
        }
    }

    // Signed int8-normalized gx/gy
    float gxN = clamp(gx / SOBEL_G_MAX, -1.0, 1.0);
    float gyN = clamp(gy / SOBEL_G_MAX, -1.0, 1.0);

    float mag = length(vec2(gx, gy));
    float magN = mag / SOBEL_MAG_MAX;

    vec2 magBA = encodeUNorm16(magN);

    outColor = vec4(
        encodeSnorm8(gxN),
        encodeSnorm8(gyN),
        magBA.x,
        magBA.y
    );
}
`,r_=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;

out vec4 outColor;

// --- decoders ---

float decodeSnorm8(float v)
{
    return v * 2.0 - 1.0;
}

float decodeUNorm16(vec2 ba)
{
    float hi = ba.x * 255.0;
    float lo = ba.y * 255.0;
    return (hi * 256.0 + lo) / 65535.0;
}

// --- half pack ---

vec4 packHalf2x16ToRGBA8(float x, float y)
{
    uint bits = packHalf2x16(vec2(x, y));

    return vec4(
        float((bits >> 24) & 0xFFu) / 255.0,
        float((bits >> 16) & 0xFFu) / 255.0,
        float((bits >>  8) & 0xFFu) / 255.0,
        float((bits >>  0) & 0xFFu) / 255.0
    );
}

void main()
{
    vec4 packed = texture(u_input, v_uv);

    // Decode signed gradients (normalized)
    float gx = decodeSnorm8(packed.r);
    float gy = decodeSnorm8(packed.g);

    // Decode normalized magnitude (optional use)
    float mag = decodeUNorm16(packed.ba);

    // Protect against zero vector
    float len = max(length(vec2(gx, gy)), 1e-6);

    vec2 dir = vec2(gx, gy) / len;

    // Store direction as half floats
    outColor = packHalf2x16ToRGBA8(dir.x, dir.y);
}
`,o_=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input; // sobel unit vectors (half2 packed)
uniform vec2      u_texelSize;

out vec4 outColor;

// ---------- unpack helpers ----------

vec2 unpackRGBA8ToHalf2x16(vec4 rgba)
{
    uint r = uint(round(rgba.r * 255.0));
    uint g = uint(round(rgba.g * 255.0));
    uint b = uint(round(rgba.b * 255.0));
    uint a = uint(round(rgba.a * 255.0));

    uint bits = (r << 24) | (g << 16) | (b << 8) | a;
    return unpackHalf2x16(bits);
}

vec3 packUnorm24(float v)
{
    v = clamp(v, 0.0, 1.0);
    uint u = uint(round(v * 16777215.0));

    return vec3(
        float((u >> 16) & 0xFFu) / 255.0,
        float((u >>  8) & 0xFFu) / 255.0,
        float((u >>  0) & 0xFFu) / 255.0
    );
}

// ---------- neighbor offsets ----------

const vec2 offsets[8] = vec2[8](
    vec2(-1,-1), vec2(-1,0), vec2(-1,1),
    vec2( 0,-1),             vec2( 0,1),
    vec2( 1,-1), vec2( 1,0), vec2( 1,1)
);

void main()
{
    // Center data
    vec2 centerVec = unpackRGBA8ToHalf2x16(texture(u_input, v_uv));
    vec2 centerTangent = vec2(-centerVec.y, centerVec.x);

    float maxScore = 0.0;
    float bestDir  = 0.0;

    for (int i = 0; i < 8; i++)
    {
        vec2 uv = v_uv + offsets[i] * u_texelSize;

        vec2 nVec = unpackRGBA8ToHalf2x16(texture(u_input, uv));

        // Directional agreement
        float cosine = abs(dot(centerVec, nVec));

        // Forward-only
        float forward = step(1e-6, dot(centerTangent, offsets[i]));


        cosine *= forward;// * sameSign;// * strong;

        float take = step(maxScore, cosine);

        maxScore = mix(maxScore, cosine, take);
        bestDir  = mix(bestDir, float(i), take);
    }

    vec3 scoreRGB = packUnorm24(maxScore);

    outColor = vec4(
        bestDir / 255.0, // direction index
        scoreRGB.r,
        scoreRGB.g,
        scoreRGB.b
    );
}
`;function s_(e){const t=e-1;return t*t*t+1}function _a(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function i_(e,{delay:t=0,duration:n=400,easing:r=s_,x:o=0,y:s=0,opacity:a=0}={}){const i=getComputedStyle(e),l=+i.opacity,c=i.transform==="none"?"":i.transform,u=l*(1-a),[d,f]=_a(o),[h,m]=_a(s);return{delay:t,duration:n,easing:r,css:(_,v)=>`
			transform: ${c} translate(${(1-_)*d}${f}, ${(1-_)*h}${m});
			opacity: ${l-u*v}`}}class ys{static OFFSETS=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];neighborXOffset;neighborYOffset;score;constructor(t,n,r,o){const s=t&255,[a,i]=ys.OFFSETS[s];this.neighborXOffset=a,this.neighborYOffset=i;const l=(n&255)<<16|(r&255)<<8|(o&255)<<0;this.score=l/16777215}}class Rs extends xn{constructor(t,n){super(t,n),this.sobelPassSettings=n,this.sobelGradientsProgramInfo=this.createProgramInfo(ma),this.sobelGradientsRenderTarget=j.createRGBA8(t),this.sobelGradientsProgramInfo=this.createProgramInfo(ma),this.sobelGradientsRenderTarget=j.createRGBA8(t),this.sobelVectorsProgramInfo=this.createProgramInfo(r_),this.sobelVectorsRenderTarget=j.createRGBA8(t),this.neighborScoringProgramInfo=this.createProgramInfo(o_),this.neighborScoringRenderTarget=j.createRGBA8(t),this.debugProgramInfo=this.createProgramInfo(this.debugFragmentShaderSource),this.debugRenderTarget=j.createRGBA8(t),this.debugQuadBufferInfo=bl.createXYQuadBufferInfo(t)}sobelGradientsProgramInfo;sobelGradientsRenderTarget;sobelGradientsRGBAData=new Uint8Array;sobelVectorsProgramInfo;sobelVectorsRenderTarget;neighborScoringProgramInfo;neighborScoringRenderTarget;neighborScoringRGBAData=new Uint8Array;continuityScores=[];metadata=[];debugProgramInfo;debugRenderTarget;debugQuadBufferInfo;debugFragmentShaderSource=`
#version 300 es
precision highp float;

in vec2 v_uv;
uniform sampler2D u_input;

out vec4 outColor;

void main() {
outColor = texture(u_input, v_uv);
}
`;applyInternal(t,n){if(!t.isR8)throw new Error("StructurePass expects R8 target");return this.executeProgram(this.sobelGradientsProgramInfo,t,this.sobelGradientsRenderTarget),this.executeProgram(this.sobelVectorsProgramInfo,this.sobelGradientsRenderTarget,this.sobelVectorsRenderTarget),this.executeNeighborScoring(),this.buildMetadata(),this.drawJunk(this.neighborScoringRenderTarget.framebufferInfo.width,this.neighborScoringRenderTarget.framebufferInfo.height),this.neighborScoringRenderTarget}drawJunk(t,n){let r=0;this.metadata.sort((s,a)=>{const i=a.continuityScore.score-s.continuityScore.score;return Math.abs(i)>.01?i:a.magnitude-s.magnitude});const o=new Float32Array(this.metadata.length);for(let s=0;s<this.metadata.length;s++){const a=this.metadata[s];if(a.visited)continue;if(a.continuityScore.score<.8)break;let i=a;for(;i&&!i.visited&&i.continuityScore.score>.5&&i.magnitude>.04;){i.visited=!0,o[i.index]=i.magnitude,r++;const l=i.nextContinuityScoreIndex;if(l<0)break;i=this.metadata[l]}}console.log(`StructurePass: drew ${r} pixels in structure lines`),this.drawLumaArray(this.gl,this.debugProgramInfo,this.debugRenderTarget,t,n,o,!1)}executeNeighborScoring(){this.executeProgram(this.neighborScoringProgramInfo,this.sobelVectorsRenderTarget,this.neighborScoringRenderTarget);const t=this.neighborScoringRenderTarget.framebufferInfo.width,n=this.neighborScoringRenderTarget.framebufferInfo.height;this.neighborScoringRGBAData=this.readRGBA8Framebuffer(this.gl,this.neighborScoringRenderTarget.framebufferInfo.framebuffer,t,n,this.neighborScoringRGBAData),this.continuityScores.length<t*n&&(this.continuityScores=new Array(t*n));for(let r=0;r<t*n;r++){const o=r*4,s=this.neighborScoringRGBAData[o+0],a=this.neighborScoringRGBAData[o+1],i=this.neighborScoringRGBAData[o+2],l=this.neighborScoringRGBAData[o+3];this.continuityScores[r]=new ys(s,a,i,l)}}buildMetadata(){const t=this.neighborScoringRenderTarget.framebufferInfo.width,n=this.neighborScoringRenderTarget.framebufferInfo.height;this.metadata.length<t*n&&(this.metadata=new Array(t*n)),this.sobelGradientsRGBAData=this.readRGBA8Framebuffer(this.gl,this.sobelGradientsRenderTarget.framebufferInfo.framebuffer,t,n,this.sobelGradientsRGBAData);for(let r=0;r<t*n;r++){const o=r*4,s=this.sobelGradientsRGBAData[o+2],a=this.sobelGradientsRGBAData[o+3],i=(s<<8|a)/65535,l=this.continuityScores[r];let c=-1;if(l.neighborXOffset!==0||l.neighborYOffset!==0){const u=r%t,d=r/t|0,f=u+l.neighborXOffset,h=d+l.neighborYOffset;f>=0&&f<t&&h>=0&&h<n&&(c=h*t+f)}this.metadata[r]={index:r,visited:!1,continuityScore:l,nextContinuityScoreIndex:c,magnitude:i,score:l.score*i}}}readRGBA8Framebuffer(t,n,r,o,s){return(!s||s.length<r*o*4)&&(s=new Uint8Array(r*o*4)),t.bindFramebuffer(t.FRAMEBUFFER,n),t.pixelStorei(t.PACK_ALIGNMENT,1),t.readPixels(0,0,r,o,t.RGBA,t.UNSIGNED_BYTE,s),t.bindFramebuffer(t.FRAMEBUFFER,null),s}drawLumaArray(t,n,r,o,s,a,i=!1){const l=new Uint8Array(o*s*4);if(i)for(let c=0;c<o*s;c++){const d=Math.max(0,Math.min(1,a[c]))*360,[f,h,m]=Rs.hsvToRgb(d,1,1),_=c*4;l[_+0]=f,l[_+1]=h,l[_+2]=m,l[_+3]=255}else for(let c=0;c<o*s;c++){const u=Math.max(0,Math.min(1,a[c]))*255,d=c*4;l[d+0]=u,l[d+1]=u,l[d+2]=u,l[d+3]=255}t.bindTexture(t.TEXTURE_2D,r.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,o,s,0,t.RGBA,t.UNSIGNED_BYTE,l),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,o,s),t.useProgram(n.program),uc(t,n,this.quadBufferInfo),bs(n,{u_input:r.texture}),fc(t,this.quadBufferInfo)}static hsvToRgb(t,n,r){const o=r*n,s=t/60,a=o*(1-Math.abs(s%2-1));let i=0,l=0,c=0;s<1?[i,l,c]=[o,a,0]:s<2?[i,l,c]=[a,o,0]:s<3?[i,l,c]=[0,o,a]:s<4?[i,l,c]=[0,a,o]:s<5?[i,l,c]=[a,0,o]:[i,l,c]=[o,0,a];const u=r-o;return[Math.round((i+u)*255),Math.round((l+u)*255),Math.round((c+u)*255)]}}class a_ extends bn{get sigmaSmall(){return this.uniforms.u_sigmaSmall}set sigmaSmall(t){this.uniforms.u_sigmaSmall=t}get sigmaLarge(){return this.uniforms.u_sigmaLarge}set sigmaLarge(t){this.uniforms.u_sigmaLarge=t}}const l_=`#version 300 es
precision highp float;

in vec2 v_uv;

/*
  u_input is always bound by the pipeline
  and represents the CURRENT frame.
*/
uniform sampler2D u_input;

uniform sampler2D u_frame1;
uniform sampler2D u_frame2;
uniform sampler2D u_frame3;
uniform sampler2D u_frame4;

out vec4 outColor;

/*
  Exact median of 5 values.
  Deterministic, branchless.
*/
float median5(
    float v0,
    float v1,
    float v2,
    float v3,
    float v4
) {
    float a = min(v0, v1);
    float b = max(v0, v1);
    float c = min(v2, v3);
    float d = max(v2, v3);

    float e = max(a, c);
    float f = min(b, d);

    float g = min(e, f);
    float h = max(e, f);

    return max(min(h, v4), g);
}

void main() {
    float value0 = texture(u_input,  v_uv).r;
    float value1 = texture(u_frame1, v_uv).r;
    float value2 = texture(u_frame2, v_uv).r;
    float value3 = texture(u_frame3, v_uv).r;
    float value4 = texture(u_frame4, v_uv).r;

    float medianValue =
        median5(value0, value1, value2, value3, value4);

    outColor = vec4(medianValue, medianValue, medianValue, 1.0);
}
`;class c_ extends xn{programInfo;outputRenderTarget;history=[];historyWriteIndex=0;historyInitialized=!1;constructor(t,n){super(t,n),this.programInfo=this.createProgramInfo(l_),this.outputRenderTarget=j.createR8(t),this.history=[j.createR8(t),j.createR8(t),j.createR8(t),j.createR8(t)]}ensureHistorySized(t,n){for(const r of this.history)(r.framebufferInfo.width!==t||r.framebufferInfo.height!==n)&&r.resize(t,n)}copyToHistory(t){const n=this.gl,r=this.history[this.historyWriteIndex];n.bindFramebuffer(n.READ_FRAMEBUFFER,t.framebufferInfo.framebuffer),n.bindTexture(n.TEXTURE_2D,r.texture),n.copyTexSubImage2D(n.TEXTURE_2D,0,0,0,0,0,t.framebufferInfo.width,t.framebufferInfo.height),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),this.historyWriteIndex=(this.historyWriteIndex+1)%this.history.length}seedHistory(t){for(let n=0;n<this.history.length;n++)this.historyWriteIndex=n,this.copyToHistory(t);this.historyInitialized=!0}applyInternal(t,n){if(!t.isR8)throw new Error("TemporalPass expects R8 or RGBA8 render targets");return this.ensureHistorySized(t.framebufferInfo.width,t.framebufferInfo.height),(this.outputRenderTarget.framebufferInfo.width!==t.framebufferInfo.width||this.outputRenderTarget.framebufferInfo.height!==t.framebufferInfo.height)&&this.outputRenderTarget.resize(t.framebufferInfo.width,t.framebufferInfo.height),this.historyInitialized||this.seedHistory(t),this.settings.uniforms.u_frame1=this.history[0].texture,this.settings.uniforms.u_frame2=this.history[1].texture,this.settings.uniforms.u_frame3=this.history[2].texture,this.settings.uniforms.u_frame4=this.history[3].texture,this.executeProgram(this.programInfo,t,n?null:this.outputRenderTarget),this.copyToHistory(t),this.outputRenderTarget}}class u_ extends bn{}const f_=`#version 300 es
precision highp float;

in vec2 v_uv;

uniform sampler2D u_input;
uniform vec2 u_corners[4];
uniform float u_thickness;

out vec4 outColor;

float segmentDistance(vec2 p, vec2 a, vec2 b) {
    vec2 ab = b - a;
    float t = clamp(dot(p - a, ab) / dot(ab, ab), 0.0, 1.0);
    vec2 closest = a + t * ab;
    return length(p - closest);
}

void main() {
    vec4 base = texture(u_input, v_uv);

    vec2 p = v_uv;
    float d0 = segmentDistance(p, u_corners[0], u_corners[1]);
    float d1 = segmentDistance(p, u_corners[1], u_corners[2]);
    float d2 = segmentDistance(p, u_corners[2], u_corners[3]);
    float d3 = segmentDistance(p, u_corners[3], u_corners[0]);

    float minDist = min(min(d0, d1), min(d2, d3));

    float edge = step(u_thickness, minDist);
    float mask = 1.0 - edge;

    outColor = mix(base, vec4(1.0, 1.0, 1.0, 1.0), mask);
}
`;class d_ extends xn{boxProgramInfo;outputRenderTarget;pixelBuffer=null;pixelChannels=0;lastBox=null;constructor(t,n){super(t,n),this.boxProgramInfo=this.createProgramInfo(f_),this.outputRenderTarget=j.createRGBA8(t)}ensurePixelBuffer(t,n,r){const o=t*n*r;(!this.pixelBuffer||this.pixelBuffer.length!==o)&&(this.pixelBuffer=new Uint8Array(o)),this.pixelChannels=r}readPixelsToBuffer(t){const n=t.framebufferInfo.width,r=t.framebufferInfo.height,o=t.isR8,s=o?this.gl.RED:this.gl.RGBA,a=o?1:4;return this.ensurePixelBuffer(n,r,a),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t.framebufferInfo.framebuffer),this.gl.readPixels(0,0,n,r,s,this.gl.UNSIGNED_BYTE,this.pixelBuffer),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),{width:n,height:r}}sampleMax3x3(t,n,r,o){if(!this.pixelBuffer)return 0;const s=Math.round(t),a=Math.round(n);let i=0;for(let l=-1;l<=1;l++)for(let c=-1;c<=1;c++){const u=Math.max(0,Math.min(r-1,s+c)),d=Math.max(0,Math.min(o-1,a+l)),h=((o-1-d)*r+u)*this.pixelChannels,m=this.pixelBuffer[h]/255;m>i&&(i=m)}return i}findRayHits(t,n,r,o,s){const a=(t-1)*.5,i=(n-1)*.5,l=[];for(let c=0;c<o;c++){const u=c/o*Math.PI*2,d=Math.cos(u),f=Math.sin(u),h=d>0?(t-1-a)/d:d<0?-a/d:1/0,m=f>0?(n-1-i)/f:f<0?-i/f:1/0,_=Math.min(h,m);if(isFinite(_))for(let v=_;v>=0;v-=s){const x=a+d*v,g=i+f*v;if(this.sampleMax3x3(x,g,t,n)>=r){l.push({x:x/(t-1),y:g/(n-1)});break}}}return l}computeOBBCorners(t,n){if(t.length<4)return[{x:.5-.25,y:.5-.25},{x:.5+.25,y:.5-.25},{x:.5+.25,y:.5+.25},{x:.5-.25,y:.5+.25}];let r=0,o=0;for(const y of t)r+=y.x,o+=y.y;r/=t.length,o/=t.length;let s=0,a=0,i=0;for(const y of t){const A=y.x-r,C=y.y-o;s+=A*A,a+=A*C,i+=C*C}const l=s+i,c=s*i-a*a,u=Math.sqrt(Math.max(0,l*l-4*c)),d=(l+u)*.5;let f=a,h=d-s;const m=Math.hypot(f,h)||1;f/=m,h/=m;const _=-h,v=f,x=[],g=[];for(const y of t){const A=y.x-r,C=y.y-o;x.push(A*f+C*h),g.push(A*_+C*v)}x.sort((y,A)=>y-A),g.sort((y,A)=>y-A);const E=Math.floor(x.length*Math.min(Math.max(n,0),.45)),R=x[E],b=x[x.length-1-E],T=g[E],F=g[g.length-1-E],I=[{x:r+R*f+T*_,y:o+R*h+T*v},{x:r+b*f+T*_,y:o+b*h+T*v},{x:r+b*f+F*_,y:o+b*h+F*v},{x:r+R*f+F*_,y:o+R*h+F*v}];for(const y of I)y.x=Math.max(0,Math.min(1,y.x)),y.y=Math.max(0,Math.min(1,y.y));return I}applyInternal(t,n){const r=this.settings,{width:o,height:s}=this.readPixelsToBuffer(t),a=this.findRayHits(o,s,r.threshold,Math.max(32,r.rayCount),r.step),i=this.computeOBBCorners(a,r.trimFraction);return this.lastBox={corners:i},this.settings.uniforms.u_corners=[i[0].x,1-i[0].y,i[1].x,1-i[1].y,i[2].x,1-i[2].y,i[3].x,1-i[3].y],this.settings.uniforms.u_thickness=1.5/Math.max(o,s),this.settings.uniforms.u_input=t.texture,this.executeProgram(this.boxProgramInfo,t,n?null:this.outputRenderTarget),this.outputRenderTarget}}class h_ extends bn{_threshold=.2;_rayCount=64;_step=.5;_trimFraction=.12;_angleThreshold=0;_distanceThreshold=0;get threshold(){return this._threshold}set threshold(t){this._threshold=t}get rayCount(){return this._rayCount}set rayCount(t){this._rayCount=t}get step(){return this._step}set step(t){this._step=t}get trimFraction(){return this._trimFraction}set trimFraction(t){this._trimFraction=t}get angleThreshold(){return this._angleThreshold}set angleThreshold(t){this._angleThreshold=t}get distanceThreshold(){return this._distanceThreshold}set distanceThreshold(t){this._distanceThreshold=t}}class va extends Ym{passes;passMap;rayBoxPass;constructor(t){super(t);const n=new Jm(this.gl),r=new n_;r.flipX=!1,r.flipY=!1;const o=new t_(this.gl,r),s=new u_;s.enabled=!0;const a=new c_(this.gl,s),i=new Qm;i.kernelRadius=2,i.sigmaSpatial=2,i.sigmaRange=.1;const l=new jm(this.gl,i),c=new a_;c.sigmaSmall=1.4,c.sigmaLarge=2.8;const u=new Rs(this.gl,c),d=new h_;d.threshold=.12,d.rayCount=64,d.step=.5,d.trimFraction=.12,this.rayBoxPass=new d_(this.gl,d),this.passes=[{id:"rec709-luma",label:"Rec709 Luma",required:!0,pass:n},{id:"orientation",label:"Orientation",required:!1,pass:o},{id:"temporal",label:"Temporal Median",required:!1,pass:a},{id:"bilateral",label:"Bilateral",required:!1,pass:l},{id:"sobel",label:"Structure",required:!1,pass:u},{id:"ray-box",label:"Ray Box",required:!1,pass:this.rayBoxPass}],this.passMap=new Map(this.passes.map(f=>[f.id,f]));for(const f of this.passes)this.addPass(f.pass)}getPass(t){return this.passMap.get(t)?.pass}postprocess(){return{box:this.rayBoxPass.lastBox}}}class an{constructor(t){this.mediaStreamTrack=t,this.imageCapture=new ImageCapture(t)}static _imageCaptureContexts=new Map;static _initialized=!1;static get imageCaptureContexts(){if(!an._initialized)throw new Error("ImageCaptureContext not initialized. Call ImageCaptureContext.initialize() first.");return an._imageCaptureContexts}imageCapture;static async initialize(){await this.refreshVideoTracks(),this._initialized=!0}static async refreshVideoTracks(){await navigator.mediaDevices.getUserMedia({video:!0});const n=(await navigator.mediaDevices.enumerateDevices()).filter(o=>o.kind==="videoinput"),r=new Set;for(const o of n){const a=(await navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:o.deviceId}}})).getVideoTracks()[0];r.add(a.id),this._imageCaptureContexts.has(a.id)||this._imageCaptureContexts.set(a.id,new an(a))}for(const[o]of this._imageCaptureContexts)r.has(o)||this._imageCaptureContexts.delete(o)}}var m_=ne('<button type="button" role="tab"> </button>'),__=ne('<div class="passBar" role="tablist" aria-label="Pipeline passes"></div>');function v_(e,t){pe(t,!1);let n=Y(t,"passes",24,()=>[]),r=Y(t,"selectedPassId",8);const o=Vo();Ve();var s=__();yo(s,5,n,a=>a.id,(a,i)=>{var l=m_();let c;var u=U(l);Se(()=>{c=So(l,1,"passButton",null,c,{passButtonActive:r()===p(i).id}),nr(l,"aria-selected",(ke(r()),p(i),Fe(()=>r()===p(i).id))),Je(u,(p(i),Fe(()=>p(i).label)))}),on("click",l,()=>o("select",{passId:p(i).id})),L(a,l)}),L(e,s),xe()}var p_=ne('<label class="setting"><div class="settingLabel"> </div> <div class="settingControl sliderControl svelte-2wv2v5"><div class="sliderShell svelte-2wv2v5"><div class="sliderTrack svelte-2wv2v5"><input class="sliderInput svelte-2wv2v5" type="range"/></div> <div class="settingValue svelte-2wv2v5"> </div></div></div></label>');function Me(e,t){pe(t,!1);let n=Y(t,"label",8),r=Y(t,"min",8),o=Y(t,"max",8),s=Y(t,"step",8),a=Y(t,"value",8);const i=Vo();Ve();var l=p_(),c=U(l),u=U(c),d=V(c,2),f=U(d),h=U(f),m=U(h),_=V(h,2),v=U(_);Se(()=>{Je(u,n()),nr(m,"min",r()),nr(m,"max",o()),nr(m,"step",s()),rf(m,a()),Je(v,a())}),on("input",m,x=>i("input",{value:Number(x.currentTarget.value)})),L(e,l),xe()}var x_=ne('<label class="setting toggleSetting"><div class="settingLabel"> </div> <div class="settingControl"><input type="checkbox"/></div></label>');function ut(e,t){pe(t,!1);let n=Y(t,"label",8),r=Y(t,"checked",8);const o=Vo();Ve();var s=x_(),a=U(s),i=U(a),l=V(a,2),c=U(l);Se(()=>{Je(i,n()),of(c,r())}),on("change",c,u=>o("change",{checked:u.currentTarget.checked})),L(e,s),xe()}var b_=ne('<div class="settings"><!> <!> <!> <!></div>');function E_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1);const o=5,s=2,a=.5,i=o/3;let l=N(n().enabled),c=N(n().kernelRadius),u=N(n().sigmaSpatial),d=N(n().sigmaRange);function f(y,A,C){return Math.max(A,Math.min(C,y))}function h(y){return Math.ceil(3*y)}function m(y){return y/3}function _(y){S(l,y),n(n().enabled=y,!0)}function v(y){const A=f(Math.round(y),s,o),C=m(A),K=Math.min(n().sigmaSpatial,C);S(c,A),S(u,K),n(n().kernelRadius=A,!0),n(n().sigmaSpatial=K,!0)}function x(y){const A=f(y,a,i),C=h(A),K=f(C,s,o);S(u,A),S(c,K),n(n().sigmaSpatial=A,!0),n(n().kernelRadius=K,!0)}function g(y){S(d,y),n(n().sigmaRange=y,!0)}Nt(()=>ke(n()),()=>{n()&&(S(l,n().enabled),S(c,n().kernelRadius),S(u,n().sigmaSpatial),S(d,n().sigmaRange))}),kt(),Ve();var E=b_(),R=U(E);{var b=y=>{ut(y,{label:"Enabled",get checked(){return p(l)},$$events:{change:A=>_(A.detail.checked)}})};se(R,y=>{r()||y(b)})}var T=V(R,2);Me(T,{label:"Kernel Radius",min:s,max:o,step:1,get value(){return p(c)},$$events:{input:y=>v(y.detail.value)}});var F=V(T,2);Me(F,{label:"Sigma Spatial",min:a,max:i,step:.1,get value(){return p(u)},$$events:{input:y=>x(y.detail.value)}});var I=V(F,2);Me(I,{label:"Sigma Range",min:.01,max:.5,step:.01,get value(){return p(d)},$$events:{input:y=>g(y.detail.value)}}),L(e,E),xe()}var g_=ne('<div class="settings"><div class="settingsEmpty">Rec709 is required and has no settings.</div></div>');function y_(e){var t=g_();L(e,t)}var R_=ne('<div class="settings"><!> <!> <!></div>');function S_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1),o=N(n().enabled),s=N(n().sigmaSmall),a=N(n().sigmaLarge);function i(_){S(o,_),n(n().enabled=_,!0)}function l(_){S(s,_),n(n().sigmaSmall=_,!0)}function c(_){S(a,_),n(n().sigmaLarge=_,!0)}Nt(()=>ke(n()),()=>{n()&&(S(o,n().enabled),S(s,n().sigmaSmall),S(a,n().sigmaLarge))}),kt(),Ve();var u=R_(),d=U(u);{var f=_=>{ut(_,{label:"Enabled",get checked(){return p(o)},$$events:{change:v=>i(v.detail.checked)}})};se(d,_=>{r()||_(f)})}var h=V(d,2);Me(h,{label:"Sigma Small",min:1,max:1.8,step:.05,get value(){return p(s)},$$events:{input:_=>l(_.detail.value)}});var m=V(h,2);Me(m,{label:"Sigma Large",min:2,max:3,step:.05,get value(){return p(a)},$$events:{input:_=>c(_.detail.value)}}),L(e,u),xe()}var T_=ne('<div class="settings"><!> <!></div>');function A_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1),o=N(n().enabled),s=N(n().threshold);function a(f){S(o,f),n(n().enabled=f,!0)}function i(f){S(s,f),n(n().threshold=f,!0)}Nt(()=>ke(n()),()=>{n()&&(S(o,n().enabled),S(s,n().threshold))}),kt(),Ve();var l=T_(),c=U(l);{var u=f=>{ut(f,{label:"Enabled",get checked(){return p(o)},$$events:{change:h=>a(h.detail.checked)}})};se(c,f=>{r()||f(u)})}var d=V(c,2);Me(d,{label:"Threshold",min:0,max:.5,step:.005,get value(){return p(s)},$$events:{input:f=>i(f.detail.value)}}),L(e,l),xe()}var F_=ne('<div class="settings"><!> <div class="settingsEmpty">Uses last 4 frames (median). No tunable parameters.</div></div>');function w_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1),o=N(n().enabled);function s(c){S(o,c),n(n().enabled=c,!0)}Nt(()=>ke(n()),()=>{n()&&S(o,n().enabled)}),kt(),Ve();var a=F_(),i=U(a);{var l=c=>{ut(c,{label:"Enabled",get checked(){return p(o)},$$events:{change:u=>s(u.detail.checked)}})};se(i,c=>{r()||c(l)})}L(e,a),xe()}var P_=ne('<div class="settings"><!> <!> <!> <!> <!></div>');function I_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1),o=N(n().enabled),s=N(n().threshold),a=N(n().rayCount),i=N(n().step),l=N(n().trimFraction);function c(b){S(o,b),n(n().enabled=b,!0)}function u(b){S(s,b),n(n().threshold=b,!0)}function d(b){S(a,b),n(n().rayCount=b,!0)}function f(b){S(i,b),n(n().step=b,!0)}function h(b){S(l,b),n(n().trimFraction=b,!0)}Nt(()=>ke(n()),()=>{n()&&(S(o,n().enabled),S(s,n().threshold),S(a,n().rayCount),S(i,n().step),S(l,n().trimFraction))}),kt(),Ve();var m=P_(),_=U(m);{var v=b=>{ut(b,{label:"Enabled",get checked(){return p(o)},$$events:{change:T=>c(T.detail.checked)}})};se(_,b=>{r()||b(v)})}var x=V(_,2);Me(x,{label:"Threshold",min:0,max:.5,step:.005,get value(){return p(s)},$$events:{input:b=>u(b.detail.value)}});var g=V(x,2);Me(g,{label:"Ray Count",min:32,max:256,step:8,get value(){return p(a)},$$events:{input:b=>d(Math.round(b.detail.value))}});var E=V(g,2);Me(E,{label:"Step (px)",min:.25,max:5,step:.25,get value(){return p(i)},$$events:{input:b=>f(b.detail.value)}});var R=V(E,2);Me(R,{label:"Trim Fraction",min:0,max:.4,step:.01,get value(){return p(l)},$$events:{input:b=>h(b.detail.value)}}),L(e,m),xe()}var B_=ne('<div class="settings"><!> <!> <!></div>');function C_(e,t){pe(t,!1);let n=Y(t,"settings",12),r=Y(t,"required",8,!1),o=N(n().enabled),s=N(n().flipX),a=N(n().flipY);function i(_){S(o,_),n(n().enabled=_,!0)}function l(_){S(s,_),n(n().flipX=_,!0)}function c(_){S(a,_),n(n().flipY=_,!0)}Nt(()=>ke(n()),()=>{n()&&(S(o,n().enabled),S(s,n().flipX),S(a,n().flipY))}),kt(),Ve();var u=B_(),d=U(u);{var f=_=>{ut(_,{label:"Enabled",get checked(){return p(o)},$$events:{change:v=>i(v.detail.checked)}})};se(d,_=>{r()||_(f)})}var h=V(d,2);ut(h,{label:"Flip X",get checked(){return p(s)},$$events:{change:_=>l(_.detail.checked)}});var m=V(h,2);ut(m,{label:"Flip Y",get checked(){return p(a)},$$events:{change:_=>c(_.detail.checked)}}),L(e,u),xe()}var D_=ne('<div class="fpsBadge svelte-1dp3x29" aria-label="Frames per second"> </div>');function M_(e,t){pe(t,!1);let n=N(0),r=0,o=performance.now();function s(){const c=performance.now();r+=1;const u=c-o;u>=500&&(S(n,Math.round(r*1e3/u)),r=0,o=c)}var a={measure:s},i=D_(),l=U(i);return Se(()=>Je(l,`${p(n)??""} fps`)),L(e,i),af(t,"measure",s),xe(a)}var N_=ne('<div class="toast svelte-1fk2ial" role="status"> </div>');function k_(e,t){pe(t,!1);let n=Y(t,"message",8,""),r=Y(t,"open",12,!1),o=Y(t,"duration",8,2e3),s=N(null);Nt(()=>(ke(r()),p(s),ke(o())),()=>{r()&&(p(s)&&clearTimeout(p(s)),S(s,setTimeout(()=>r(!1),o())))}),kt();var a=ae(),i=ie(a);{var l=c=>{var u=N_(),d=U(u);Se(()=>Je(d,n())),Zu(3,u,()=>i_,()=>({y:10,duration:150})),L(c,u)};se(i,c=>{r()&&c(l)})}L(e,a),xe()}const G_={"rec709-luma":{enabled:!0},orientation:{enabled:!0,flipX:!0,flipY:!1},temporal:{enabled:!0},bilateral:{enabled:!0,kernelRadius:2,sigmaSpatial:2,sigmaRange:.1},sobel:{enabled:!1,sigmaSmall:1.4,sigmaLarge:2.8},"ray-box":{enabled:!1}},L_={passes:G_},U_={"rec709-luma":{enabled:!0},orientation:{enabled:!0,flipX:!0,flipY:!1},temporal:{enabled:!0},bilateral:{enabled:!0,kernelRadius:2,sigmaSpatial:2,sigmaRange:.1},sobel:{enabled:!0,sigmaSmall:1.4,sigmaLarge:2.8},"ray-box":{enabled:!1}},O_={passes:U_};var V_=ne("<option> </option>"),H_=ne("<option> </option>"),z_=ne('<div class="errorBanner svelte-1n46o8q" role="alert"> </div>'),X_=ne('<main class="app svelte-1n46o8q"><section class="controls svelte-1n46o8q"><div class="controlRow svelte-1n46o8q"><div class="sideSwitcher svelte-1n46o8q" role="group" aria-label="Side selector"><button type="button">Front</button> <button type="button">Rear</button></div> <!> <button class="exportButton svelte-1n46o8q" type="button">Export</button></div> <!></section> <section class="views svelte-1n46o8q"><div class="cameraPanel svelte-1n46o8q"><div class="cameraHeader svelte-1n46o8q"><div class="cameraTitle svelte-1n46o8q">Front</div> <select class="cameraSelect svelte-1n46o8q"><option disabled>Select inputâ¦</option><!></select></div> <canvas class="cameraCanvas svelte-1n46o8q"></canvas></div> <div class="cameraPanel svelte-1n46o8q"><div class="cameraHeader svelte-1n46o8q"><div class="cameraTitle svelte-1n46o8q">Rear</div> <select class="cameraSelect svelte-1n46o8q"><option disabled>Select inputâ¦</option><!></select></div> <canvas class="cameraCanvas svelte-1n46o8q"></canvas></div></section> <!> <!> <!></main>');function $_(e,t){pe(t,!1);const n={"rec709-luma":y_,bilateral:E_,sobel:S_,"magnatude-gate":A_,temporal:w_,"ray-box":I_,orientation:C_};let r=N(""),o=new Map,s=N([]),a=N(""),i=N(""),l=N("front"),c=N(null),u=N(null),d=N(null),f=N(null),h=N([]),m=N(null),_=!1,v=!1,x=N(null),g=N(!1),E=N("");function R(){S(s,Array.from(o.entries()).map(([w,P])=>({id:w,label:`${P.mediaStreamTrack.label||"Camera"} (${w})`})))}async function b(){await an.initialize(),o=an.imageCaptureContexts,R(),!p(a)&&p(s)[0]&&S(a,p(s)[0].id),!p(i)&&p(s)[1]&&S(i,p(s)[1].id),!p(i)&&p(s)[0]&&S(i,p(s)[0].id)}function T(w,P){const M=P?.getPass(w);return M?M.settings:null}function F(w,P){const M=P?.passes??{};for(const H of w.passes){const k=M[H.id];if(k){typeof k.enabled=="boolean"&&(H.pass.enabled=k.enabled);for(const[Ht,Or]of Object.entries(k))Ht!=="enabled"&&Ht in H.pass.settings&&(H.pass.settings[Ht]=Or)}}}function I(w){const P={};for(const M of w.passes){const H={enabled:M.pass.enabled},k=M.pass.settings;switch(M.id){case"bilateral":H.kernelRadius=k.kernelRadius,H.sigmaSpatial=k.sigmaSpatial,H.sigmaRange=k.sigmaRange;break;case"sobel":H.kernelRadius=k.kernelRadius,H.directionBias=k.directionBias,H.edgeGain=k.edgeGain,H.minEdge=k.minEdge;break;case"magnatude-gate":H.threshold=k.threshold;break;case"temporal":break;case"orientation":H.flipX=k.flipX,H.flipY=k.flipY;break;case"ray-box":H.threshold=k.threshold,H.rayCount=k.rayCount,H.step=k.step,H.trimFraction=k.trimFraction;break}P[M.id]=H}return{passes:P}}async function y(w){const P=p(w==="front"?d:f);if(!P)return;const M=JSON.stringify(I(P),null,2);await navigator.clipboard.writeText(M),S(E,`Exported ${w} settings to clipboard`),S(g,!0)}async function A(w,P){if(!w||!P)return;const M=o.get(P);if(!M)return;const H=await M.imageCapture.grabFrame();try{await w.render(H)}finally{H.close()}}async function C(){if(_){if(v){p(x)?.measure(),requestAnimationFrame(()=>{C()});return}v=!0;try{p(x)?.measure(),await A(p(d),p(a)),await A(p(f),p(i)),S(m,null)}catch(w){S(m,w instanceof Error?w.message:String(w))}finally{v=!1,requestAnimationFrame(()=>{C()})}}}Ja(async()=>{try{if(await b(),!p(c)||!p(u)){S(m,"Canvas not available for one or both views.");return}S(d,new va(p(c))),S(f,new va(p(u))),p(d)&&F(p(d),L_),p(f)&&F(p(f),O_),S(h,p(d).passes),S(r,p(h)[0]?.id??""),_=!0,C()}catch(w){S(m,w instanceof Error?w.message:String(w))}}),cf(()=>{_=!1}),Ve();var K=X_(),Z=U(K),me=U(Z),be=U(me),Pe=U(be);let Xe;var $e=V(Pe,2);let qe;var pt=V(be,2);{let w=ot(()=>p(h).map(P=>({id:P.id,label:P.label})));v_(pt,{get passes(){return p(w)},get selectedPassId(){return p(r)},$$events:{select:P=>S(r,P.detail.passId)}})}var Lt=V(pt,2),Ut=V(me,2);{var Ot=w=>{const P=ot(()=>p(h).find(yn=>yn.id===p(r))),M=ot(()=>p(P)?n[p(P).id]:null),H=ot(()=>p(l)==="front"?p(d):p(f)),k=ot(()=>p(P)?T(p(P).id,p(H)):null);var Ht=ae(),Or=ie(Ht);{var Rc=yn=>{var ws=ae(),Sc=ie(ws);{var Tc=zt=>{var Rn=ae(),Vr=ie(Rn);Et(Vr,()=>p(M),(Hr,zr)=>{zr(Hr,{get required(){return p(P).required},get settings(){return p(k)}})}),L(zt,Rn)},Ac=zt=>{var Rn=ae(),Vr=ie(Rn);{var Hr=Xt=>{var Sn=ae(),Xr=ie(Sn);Et(Xr,()=>p(M),($r,qr)=>{qr($r,{get required(){return p(P).required},get settings(){return p(k)}})}),L(Xt,Sn)},zr=Xt=>{var Sn=ae(),Xr=ie(Sn);{var $r=$t=>{var Tn=ae(),Yr=ie(Tn);Et(Yr,()=>p(M),(Kr,Wr)=>{Wr(Kr,{get required(){return p(P).required},get settings(){return p(k)}})}),L($t,Tn)},qr=$t=>{var Tn=ae(),Yr=ie(Tn);{var Kr=qt=>{var An=ae(),jr=ie(An);Et(jr,()=>p(M),(Qr,Zr)=>{Zr(Qr,{get required(){return p(P).required},get settings(){return p(k)}})}),L(qt,An)},Wr=qt=>{var An=ae(),jr=ie(An);{var Qr=Yt=>{var Fn=ae(),Jr=ie(Fn);Et(Jr,()=>p(M),(eo,to)=>{to(eo,{get required(){return p(P).required},get settings(){return p(k)}})}),L(Yt,Fn)},Zr=Yt=>{var Fn=ae(),Jr=ie(Fn);{var eo=Kt=>{var wn=ae(),no=ie(wn);Et(no,()=>p(M),(ro,oo)=>{oo(ro,{get required(){return p(P).required},get settings(){return p(k)}})}),L(Kt,wn)},to=Kt=>{var wn=ae(),no=ie(wn);Et(no,()=>p(M),(ro,oo)=>{oo(ro,{get required(){return p(P).required}})}),L(Kt,wn)};se(Jr,Kt=>{p(P).id==="ray-box"?Kt(eo):Kt(to,!1)},!0)}L(Yt,Fn)};se(jr,Yt=>{p(P).id==="temporal"?Yt(Qr):Yt(Zr,!1)},!0)}L(qt,An)};se(Yr,qt=>{p(P).id==="magnatude-gate"?qt(Kr):qt(Wr,!1)},!0)}L($t,Tn)};se(Xr,$t=>{p(P).id==="orientation"?$t($r):$t(qr,!1)},!0)}L(Xt,Sn)};se(Vr,Xt=>{p(P).id==="sobel"?Xt(Hr):Xt(zr,!1)},!0)}L(zt,Rn)};se(Sc,zt=>{p(P).id==="bilateral"?zt(Tc):zt(Ac,!1)})}L(yn,ws)};se(Or,yn=>{p(P)&&p(M)&&p(k)&&yn(Rc)})}L(w,Ht)};se(Ut,w=>{p(r)&&w(Ot)})}var xt=V(Z,2),bt=U(xt),En=U(bt),gn=V(U(En),2);Se(()=>{p(a),Ns(()=>{p(s)})});var Vt=U(gn);Vt.value=Vt.__value="";var qn=V(Vt);yo(qn,1,()=>p(s),w=>w.id,(w,P)=>{var M=V_(),H=U(M),k={};Se(()=>{Je(H,p(P).id),k!==(k=p(P).id)&&(M.value=(M.__value=p(P).id)??"")}),L(w,M)});var Q=V(En,2);so(Q,w=>S(c,w),()=>p(c));var xc=V(bt,2),Ss=U(xc),Ts=V(U(Ss),2);Se(()=>{p(i),Ns(()=>{p(s)})});var Ur=U(Ts);Ur.value=Ur.__value="";var bc=V(Ur);yo(bc,1,()=>p(s),w=>w.id,(w,P)=>{var M=H_(),H=U(M),k={};Se(()=>{Je(H,p(P).id),k!==(k=p(P).id)&&(M.value=(M.__value=p(P).id)??"")}),L(w,M)});var Ec=V(Ss,2);so(Ec,w=>S(u,w),()=>p(u));var As=V(xt,2);{var gc=w=>{var P=z_(),M=U(P);Se(()=>Je(M,p(m))),L(w,P)};se(As,w=>{p(m)&&w(gc)})}var Fs=V(As,2);so(M_(Fs,{$$legacy:!0}),w=>S(x,w),()=>p(x));var yc=V(Fs,2);k_(yc,{get message(){return p(E)},get open(){return p(g)},set open(w){S(g,w)},$$legacy:!0}),Se(()=>{Xe=So(Pe,1,"svelte-1n46o8q",null,Xe,{sideActive:p(l)==="front"}),qe=So($e,1,"svelte-1n46o8q",null,qe,{sideActive:p(l)==="rear"})}),on("click",Pe,()=>S(l,"front")),on("click",$e,()=>S(l,"rear")),on("click",Lt,()=>y(p(l))),zs(gn,()=>p(a),w=>S(a,w)),zs(Ts,()=>p(i),w=>S(i,w)),L(e,K),xe()}Hu($_,{target:document.getElementById("app")});
